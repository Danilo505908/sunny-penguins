{"version":3,"file":"index.js","sources":["../src/js/artist-modal.js"],"sourcesContent":["// ===== Форматування мілісекунд у хв:сек =====\nfunction formatDuration(ms) {\n  if (!ms || isNaN(ms)) return \"—\";\n  const minutes = Math.floor(ms / 60000);\n  const seconds = Math.floor((ms % 60000) / 1000)\n    .toString()\n    .padStart(2, \"0\");\n  return `${minutes}:${seconds}`;\n}\n\n// ===== Екранування HTML, щоб уникнути XSS =====\nfunction escapeHtml(str) {\n  return String(str)\n    .replaceAll(\"&\", \"&amp;\")\n    .replaceAll(\"<\", \"&lt;\")\n    .replaceAll(\">\", \"&gt;\")\n    .replaceAll('\"', \"&quot;\")\n    .replaceAll(\"'\", \"&#039;\");\n}\n\n// ===== Основна функція для рендеру модального вікна =====\nasync function renderArtistModal(artistId) {\n  try {\n    const res = await fetch(`https://sound-wave.b.goit.study/api/artists/${artistId}/albums`);\n    if (!res.ok) throw new Error(`Request failed: ${res.status}`);\n    const data = await res.json();\n\n    const modalClose = document.querySelector(\".modal_close\");\n    const modalWindow = document.querySelector(\".modal_window\")\n    const nameEl = document.querySelector(\".modal_artist\");\n    const imgEl = document.querySelector(\".modal_content img\");\n    const infoPs = document.querySelectorAll(\".modal_basic_info li p\");\n    const bioEl = document.querySelector(\".modal_text_biography\");\n    const genresList = document.querySelector(\".genres\");\n    const albumsContainer = document.querySelector(\".albums_info ul\");\n\n    // ===== Закриття модалки =====\n    function closeModal(e) {\n      e.preventDefault();\n      modalWindow.classList.remove(\"is-open\");\n      modalWindow.remove();\n      modalClose.removeEventListener(\"click\", closeModal);\n    }\n    modalClose.addEventListener(\"click\", closeModal);\n\n    // ===== Основна інформація =====\n    nameEl.textContent = data.strArtist ?? \"Unknown artist\";\n    imgEl.src = data.strArtistThumb || \"https://via.placeholder.com/300x300?text=No+Image\";\n    imgEl.alt = data.strArtist ?? \"Artist\";\n\n    // ===== Роки існування =====\n    if (data.intFormedYear && data.intDiedYear) {\n      infoPs[0].textContent = `${data.intFormedYear} - ${data.intDiedYear}`;\n    } else if (data.intFormedYear && !data.intDiedYear) {\n      infoPs[0].textContent = `${data.intFormedYear} - present`;\n    } else {\n      infoPs[0].textContent = \"information missing\";\n    }\n\n    infoPs[1].textContent = data.strGender || \"Undefined\";\n    infoPs[2].textContent = data.intMembers || \"?\";\n    infoPs[3].textContent = data.strCountry || \"Undefined\";\n\n    bioEl.textContent = data.strBiographyEN || \"No biography available.\";\n\n    // ===== Жанри =====\n    genresList.innerHTML = Array.isArray(data.genres) && data.genres.length\n      ? data.genres.map(g => `<li>${escapeHtml(g)}</li>`).join(\"\")\n      : \"<li>Unknown</li>\";\n\n    // ===== Альбоми =====\n    albumsContainer.innerHTML = \"\";\n    if (Array.isArray(data.albumsList) && data.albumsList.length) {\n      data.albumsList.forEach(album => {\n        const tracks = Array.isArray(album.tracks) ? album.tracks : [];\n        const rows = tracks.map(track => {\n          const playButton = track.movie\n            ? `<a href=\"${track.movie}\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"play-svg-link\">\n                 <svg width=\"21\" height=\"15\">\n                   <use href=\"../img/modal/modal-icons.svg#icon-play\"></use>\n                 </svg>\n               </a>`\n            : \"\";\n\n          return `\n            <tr>\n              <td>${escapeHtml(track.strTrack || \"\")}</td>\n              <td>${formatDuration(Number(track.intDuration))}</td>\n              <td>${playButton}</td>\n            </tr>\n          `;\n        }).join(\"\");\n\n        const tableHTML = `\n          <li>\n            <table>\n              <caption>${escapeHtml(album.strAlbum || \"Album\")}${album.intYearReleased ? ` (${album.intYearReleased})` : \"\"}</caption>\n              <thead>\n                <tr class=\"album_columns\">\n                  <th>Track</th>\n                  <th>Time</th>\n                  <th>Link</th>\n                </tr>\n              </thead>\n              <tbody>${rows}</tbody>\n            </table>\n          </li>\n        `;\n        albumsContainer.insertAdjacentHTML(\"beforeend\", tableHTML);\n      });\n    } else {\n      albumsContainer.innerHTML = \"<li>No albums found</li>\";\n    }\n\n  } catch (err) {\n    console.error(\"Помилка при завантаженні артиста:\", err);\n  }\n}\n\n// ===== Виклик функції це просто приклад для наочності =====\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  renderArtistModal(\"65ada227af9f6d155db46908\"); // замінити на потрібний ID артиста\n});\n\n/*\nкнопка.addEventListener('click', () => {\n  renderArtistModal(\"треба сюди передати айді\"); \n*/"],"names":["formatDuration","ms","minutes","seconds","escapeHtml","str","renderArtistModal","artistId","closeModal","e","modalWindow","modalClose","res","data","nameEl","imgEl","infoPs","bioEl","genresList","albumsContainer","g","album","rows","track","playButton","tableHTML","err"],"mappings":"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"}