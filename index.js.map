{"version":3,"file":"index.js","sources":["../src/js/artist-modal.js","../src/js/artists.js"],"sourcesContent":["function formatDuration(ms) {\n  if (!ms || isNaN(ms)) return \"—\";\n  const minutes = Math.floor(ms / 60000);\n  const seconds = Math.floor((ms % 60000) / 1000)\n    .toString()\n    .padStart(2, \"0\");\n  return `${minutes}:${seconds}`;\n}\n\nconst loaderOverlay = document.getElementById(\"loader-overlay\");\n\nasync function renderArtistModal(artistId) {\n  const modalWindow = document.querySelector(\".modal_window\");\n  const modalContent = modalWindow.querySelector(\".modal\");\n  const modalClose = modalWindow.querySelector(\".modal_close\");\n\n  try {\n    modalWindow.classList.remove(\"is_open\");\n    loaderOverlay.style.display = \"flex\";\n\n    const res = await fetch(`https://sound-wave.b.goit.study/api/artists/${artistId}/albums`);\n    if (!res.ok) throw new Error(`Request failed: ${res.status}`);\n    const data = await res.json();\n\n    const nameEl = modalWindow.querySelector(\".modal_artist\");\n    const imgEl = modalWindow.querySelector(\".modal_content img\");\n    const infoPs = modalWindow.querySelectorAll(\".modal_basic_info li p\");\n    const bioEl = modalWindow.querySelector(\".modal_text_biography\");\n    const genresList = modalWindow.querySelector(\".genres\");\n    const albumsContainer = modalWindow.querySelector(\".albums_info ul\");\n\n    nameEl.textContent = data.strArtist ?? \"Unknown artist\";\n    imgEl.src = data.strArtistThumb || \"https://via.placeholder.com/300x300?text=No+Image\";\n    imgEl.alt = data.strArtist ?? \"Artist\";\n\n    if (data.intFormedYear && data.intDiedYear) {\n      infoPs[0].textContent = `${data.intFormedYear} - ${data.intDiedYear}`;\n    } else if (data.intFormedYear) {\n      infoPs[0].textContent = `${data.intFormedYear} - present`;\n    } else {\n      infoPs[0].textContent = \"information missing\";\n    }\n\n    infoPs[1].textContent = data.strGender || \"Undefined\";\n    infoPs[2].textContent = data.intMembers || \"?\";\n    infoPs[3].textContent = data.strCountry || \"Undefined\";\n\n    bioEl.textContent = data.strBiographyEN || \"No biography available.\";\n\n    genresList.innerHTML = Array.isArray(data.genres) && data.genres.length\n      ? data.genres.map(g => `<li>${g}</li>`).join(\"\")\n      : \"<li>Unknown</li>\";\n\n    albumsContainer.innerHTML = \"\";\n    if (Array.isArray(data.albumsList) && data.albumsList.length) {\n      data.albumsList.forEach(album => {\n        const tracks = Array.isArray(album.tracks) ? album.tracks : [];\n        const rows = tracks.map(track => {\n          const playButton = track.movie\n            ? `<a href=\"${track.movie}\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"play-svg-link\">\n                 <svg width=\"21\" height=\"15\">\n                   <use href=\"../img/modal/modal-icons.svg#icon-play\"></use>\n                 </svg>\n               </a>`\n            : \"\";\n          return `\n            <tr>\n              <td>${track.strTrack || \"\"}</td>\n              <td>${formatDuration(Number(track.intDuration))}</td>\n              <td>${playButton}</td>\n            </tr>`;\n        }).join(\"\");\n\n        const tableHTML = `\n          <li>\n            <table>\n              <caption>${album.strAlbum || \"Album\"}${album.intYearReleased ? ` (${album.intYearReleased})` : \"\"}</caption>\n              <thead>\n                <tr class=\"album_columns\">\n                  <th>Track</th>\n                  <th>Time</th>\n                  <th>Link</th>\n                </tr>\n              </thead>\n              <tbody>${rows}</tbody>\n            </table>\n          </li>`;\n        albumsContainer.insertAdjacentHTML(\"beforeend\", tableHTML);\n      });\n    } else {\n      albumsContainer.innerHTML = \"<li>No albums found</li>\";\n    }\n\n    modalWindow.classList.add(\"is_open\");\n    document.body.style.overflow = \"hidden\";\n\n    function closeModal() {\n      modalWindow.classList.remove(\"is_open\");\n      document.removeEventListener(\"keydown\", onEscPress);\n      modalWindow.removeEventListener(\"click\", onBackdropClick);\n      modalClose.removeEventListener(\"click\", closeModal);\n      document.body.style.overflow = \"\";\n    }\n\n    modalClose.addEventListener(\"click\", closeModal);\n\n    function onBackdropClick(e) {\n      if (!modalContent.contains(e.target)) closeModal();\n    }\n    modalWindow.addEventListener(\"click\", onBackdropClick);\n\n    function onEscPress(e) {\n      if (e.key === \"Escape\") closeModal();\n    }\n    document.addEventListener(\"keydown\", onEscPress);\n\n  } catch (err) {\n    console.error(\"Помилка при завантаженні артиста:\", err);\n  } finally {\n    loaderOverlay.style.display = \"none\";\n  }\n}\n\n/* Приклад виклику\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  renderArtistModal(\"65ada227af9f6d155db46908\");\n});\n\n/*\nкнопка.addEventListener('click', () => {\n  renderArtistModal(\"треба сюди передати айді\"); \n});\n*/","const API_URL = 'https://sound-wave.b.goit.study/api/artists';\n\nlet currentPage = 1;\nconst limit = 8;\n\nconst artistsList = document.getElementById('artists-list');\nconst loadMoreBtn = document.getElementById('load-more');\n\nasync function fetchArtists(page = 1, limit = 8) {\n  try {\n    loadMoreBtn.textContent = 'Loading...';\n\n    const res = await fetch(`${API_URL}?page=${page}&limit=${limit}`);\n    if (!res.ok) throw new Error('Failed to fetch artists');\n\n    const data = await res.json();\n    console.log('API response:', data);\n\n    if (Array.isArray(data.artists)) {\n      renderArtists(data.artists);\n\n      if (data.artists.length < limit || page * limit >= data.totalArtists) {\n        loadMoreBtn.style.display = 'none';\n      } else {\n        loadMoreBtn.textContent = 'Load More';\n      }\n    } else {\n      console.error('Unexpected API structure:', data);\n    }\n  } catch (err) {\n    console.error(err);\n    alert('❌ Помилка завантаження артистів');\n  }\n}\n\nfunction renderArtists(artists) {\n  artists.forEach(artist => {\n    const card = document.createElement('div');\n    card.classList.add('artist-card');\n\n    card.innerHTML = `\n      <img src=\"${artist.photo}\" alt=\"${artist.name}\" class=\"artist-photo\" />\n      <div class=\"artist-content\">\n        <h3 class=\"artist-name\">${artist.name}</h3>\n        <p class=\"artist-genres\">${artist.genres.join(', ')}</p>\n        <p class=\"artist-description\">${\n          artist.description || 'No description available'\n        }</p>\n      </div>\n    `;\n\n    artistsList.appendChild(card);\n  });\n}\n\nloadMoreBtn.addEventListener('click', () => {\n  currentPage++;\n  fetchArtists(currentPage, limit);\n});\n\n// Стартове завантаження\nfetchArtists(currentPage, limit);\n"],"names":["API_URL","currentPage","limit","artistsList","loadMoreBtn","fetchArtists","page","res","data","renderArtists","err","artists","artist","card"],"mappings":"ssBASsB,SAAS,eAAe,gBAAgB,ECT9D,MAAMA,EAAU,8CAEhB,IAAIC,EAAc,EAClB,MAAMC,EAAQ,EAERC,EAAc,SAAS,eAAe,cAAc,EACpDC,EAAc,SAAS,eAAe,WAAW,EAEvD,eAAeC,EAAaC,EAAO,EAAGJ,EAAQ,EAAG,CAC/C,GAAI,CACFE,EAAY,YAAc,aAE1B,MAAMG,EAAM,MAAM,MAAM,GAAGP,CAAO,SAASM,CAAI,UAAUJ,CAAK,EAAE,EAChE,GAAI,CAACK,EAAI,GAAI,MAAM,IAAI,MAAM,yBAAyB,EAEtD,MAAMC,EAAO,MAAMD,EAAI,KAAI,EAC3B,QAAQ,IAAI,gBAAiBC,CAAI,EAE7B,MAAM,QAAQA,EAAK,OAAO,GAC5BC,EAAcD,EAAK,OAAO,EAEtBA,EAAK,QAAQ,OAASN,GAASI,EAAOJ,GAASM,EAAK,aACtDJ,EAAY,MAAM,QAAU,OAE5BA,EAAY,YAAc,aAG5B,QAAQ,MAAM,4BAA6BI,CAAI,CAEnD,OAASE,EAAK,CACZ,QAAQ,MAAMA,CAAG,EACjB,MAAM,iCAAiC,CACzC,CACF,CAEA,SAASD,EAAcE,EAAS,CAC9BA,EAAQ,QAAQC,GAAU,CACxB,MAAMC,EAAO,SAAS,cAAc,KAAK,EACzCA,EAAK,UAAU,IAAI,aAAa,EAEhCA,EAAK,UAAY;AAAA,kBACHD,EAAO,KAAK,UAAUA,EAAO,IAAI;AAAA;AAAA,kCAEjBA,EAAO,IAAI;AAAA,mCACVA,EAAO,OAAO,KAAK,IAAI,CAAC;AAAA,wCAEjDA,EAAO,aAAe,0BAChC;AAAA;AAAA,MAIIT,EAAY,YAAYU,CAAI,CAC9B,CAAC,CACH,CAEAT,EAAY,iBAAiB,QAAS,IAAM,CAC1CH,IACAI,EAAaJ,EAAaC,CAAK,CACjC,CAAC,EAGDG,EAAaJ,EAAaC,CAAK"}