{"version":3,"file":"index.js","sources":["../src/js/api.js","../src/js/artists/lib/sound.js","../src/js/artists/features/api.js","../src/js/artists/features/state.js","../src/js/artists/lib/scroll-lock.js","../src/js/artists/features/player.js","../src/js/artists/features/zoom.js","../src/js/artists/features/prefetch.js","../src/img/sprite.svg?raw","../src/js/artists/features/modal.js","../src/js/artists/features/grid.js","../src/js/artists/features/router.js","../src/js/artists/features/init.js","../src/js/artists/features/player-patch.js","../src/js/artists/features/mixradio-menu.js","../src/js/artists/index.js","../src/js/header.js","../src/js/comments.js","../src/js/global-sfx.js"],"sourcesContent":["// CRC/JS/api.js\n// –ï–¥–∏–Ω–∞—è –æ–±—ë—Ä—Ç–∫–∞ –Ω–∞–¥ REST API –ø—Ä–æ–µ–∫—Ç–∞.\n// –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã, –Ω–µ –±—Ä–æ—Å–∞–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–π –Ω–∞—Ä—É–∂—É.\n// –°–æ–≤–º–µ—Å—Ç–∏–º–æ —Å artists/features/api.js\n\nimport axios from \"axios\";\n\n/* =========================\n   ENV / –õ–û–ì–ò–†–û–í–ê–ù–ò–ï\n   ========================= */\nconst IS_DEV =\n  /localhost|127\\.0\\.0\\.1/.test(location.hostname) ||\n  (document.documentElement.getAttribute(\"data-env\") || \"\").toLowerCase() === \"dev\";\n\nconst logWarn = (...args) => { if (IS_DEV) console.warn(...args); };\n\n/* =========================\n   BASE URL (—Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å)\n   ========================= */\n// –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: <html data-api=\"...\"> ‚Üí VITE_API_BASE ‚Üí –¥–µ—Ñ–æ–ª—Ç (dev/prod)\n// –í DEV —Ö–æ–¥–∏–º –Ω–∞ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π `/api`, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç—Å—è Vite ‚Üí –±—ç–∫–µ–Ω–¥—É,\n// —á—Ç–æ–±—ã –æ–±–æ–π—Ç–∏ CORS –∏ –ø—Ä–æ–±–ª–µ–º–Ω—ã–π SSL‚Äë—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç.\nconst DEFAULT_API_DEV = \"/api\";\nconst DEFAULT_API_PROD = \"https://sound-wave.b.goit.study/api\";\n\nconst API_BASE =\n  document.documentElement.getAttribute(\"data-api\") ||\n  (typeof import.meta !== \"undefined\" && import.meta.env && import.meta.env.VITE_API_BASE) ||\n  (IS_DEV ? DEFAULT_API_DEV : DEFAULT_API_PROD);\n\n/* =========================\n   AXIOS –ò–ù–°–¢–ê–ù–°\n   ========================= */\nconst api = axios.create({\n  baseURL: API_BASE,\n  timeout: 15000,\n  headers: { \"Accept\": \"application/json\" },\n});\n\n// –ø–µ—Ä–µ—Ö–≤–∞—Ç—á–∏–∫ –æ—Ç–≤–µ—Ç–æ–≤ ‚Äî –Ω–∏—á–µ–≥–æ ¬´–º–∞–≥–∏—á–µ—Å–∫–æ–≥–æ¬ª –Ω–µ –¥–µ–ª–∞–µ–º, —Ç–æ–ª—å–∫–æ –µ–¥–∏–Ω—ã–π warn –≤ DEV\napi.interceptors.response.use(\n  (res) => res,\n  (err) => {\n    logWarn(\"[api] HTTP error:\", err?.message || err);\n    return Promise.reject(err);\n  }\n);\n\n/* =========================\n   –•–ï–õ–ü–ï–†–´\n   ========================= */\nfunction toastError(msg) {\n  try { window.__toast?.error(msg); } catch {}\n}\n\n// –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –ª—é–±–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –≤ —á–∏—Å–ª–æ (—Å –º–∏–Ω–∏–º—É–º–æ–º)\nfunction clampNumber(v, min, fallback) {\n  const n = Number(v);\n  return Number.isFinite(n) ? Math.max(min, n) : fallback;\n}\n\n/* =========================\n   API –§–£–ù–ö–¶–ò–ò\n   ========================= */\n\n/**\n * –°–ø–∏—Å–æ–∫ –∞—Ä—Ç–∏—Å—Ç–æ–≤\n * @param {{page?:number,limit?:number,genre?:string,sort?:'asc'|'desc'|'',name?:string}} params\n * @returns {Promise<{artists:Array,totalArtists:number,page:number,limit:number}>}\n */\nexport async function fetchArtists(\n  { page = 1, limit = 8, genre = \"\", sort = \"\", name = \"\" } = {}\n) {\n  try {\n    const params = {\n      page: clampNumber(page, 1, 1),\n      limit: clampNumber(limit, 1, 8),\n    };\n\n    const s = String(sort || \"\").toLowerCase();\n    if (s === \"asc\" || s === \"desc\") params.sortName = s;\n\n    const g = String(genre || \"\").trim();\n    if (g && g !== \"All Genres\") params.genre = g;\n\n    const n = String(name || \"\").trim();\n    if (n.length >= 1) params.name = n;\n\n    const { data } = await api.get(\"/artists\", { params });\n\n    // –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞ (–Ω–∞ —Å–ª—É—á–∞–π –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã—Ö —Ñ–æ—Ä–º)\n    const artists = Array.isArray(data?.artists) ? data.artists\n                   : Array.isArray(data)          ? data\n                   : [];\n    const totalArtists = clampNumber(data?.totalArtists, 0, artists.length);\n    const pageOut  = clampNumber(data?.page, 1, params.page);\n    const limitOut = clampNumber(data?.limit, 1, params.limit);\n\n    return { artists, totalArtists, page: pageOut, limit: limitOut };\n  } catch (err) {\n    logWarn(\"[api] fetchArtists failed:\", err?.message || err);\n    toastError(\"–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∞—Ä—Ç–∏—Å—Ç–æ–≤. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.\");\n    return { artists: [], totalArtists: 0, page: 1, limit: clampNumber(limit, 1, 8) };\n  }\n}\n\n/* ----- –∫—ç—à –∂–∞–Ω—Ä–æ–≤ (in-memory) –Ω–∞ –∫–æ—Ä–æ—Ç–∫–æ–µ –≤—Ä–µ–º—è ----- */\nlet _genresCache = { ts: 0, list: [] };\nconst GENRES_TTL = 5 * 60 * 1000; // 5 –º–∏–Ω—É—Ç\n\n/**\n * –°–ø–∏—Å–æ–∫ –∂–∞–Ω—Ä–æ–≤\n * @returns {Promise<string[]>} ‚Äî –º–∞—Å—Å–∏–≤ –∏–º—ë–Ω –∂–∞–Ω—Ä–æ–≤ (–≤–∫–ª—é—á–∞—è \"All Genres\" –ø–µ—Ä–≤—ã–º)\n */\nexport async function fetchGenres() {\n  try {\n    const now = Date.now();\n    if (_genresCache.list.length && now - _genresCache.ts < GENRES_TTL) {\n      return _genresCache.list.slice(); // –æ—Ç–¥–∞—ë–º –∫–æ–ø–∏—é\n    }\n\n    const { data } = await api.get(\"/genres\");\n    const raw = Array.isArray(data) ? data : (data?.genres || []);\n    const names = raw\n      .map((g) =>\n        typeof g === \"string\"\n          ? g\n          : g?.name || g?.title || g?.genre || g?.label || \"\"\n      )\n      .filter(Boolean);\n    const uniq = [...new Set(names)];\n    const out = [\"All Genres\", ...uniq];\n\n    _genresCache = { ts: now, list: out };\n    return out;\n  } catch (err) {\n    logWarn(\"[api] fetchGenres failed:\", err?.message || err);\n    toastError(\"–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∂–∞–Ω—Ä—ã.\");\n    return [\"All Genres\"];\n  }\n}\n\n/**\n * –û–¥–∏–Ω –∞—Ä—Ç–∏—Å—Ç\n * @param {string|number} id\n * @returns {Promise<Object|null>}\n */\nexport async function fetchArtist(id) {\n  if (!id && id !== 0) return null;\n  try {\n    const { data } = await api.get(`/artists/${id}`);\n    // –í–æ–∑–º–æ–∂–Ω—ã–µ —Ñ–æ—Ä–º—ã: –æ–±—ä–µ–∫—Ç, –º–∞—Å—Å–∏–≤, { artists: [...] }\n    if (data && !Array.isArray(data)) return data;\n    if (Array.isArray(data) && data.length) return data[0];\n    if (Array.isArray(data?.artists) && data.artists.length) return data.artists[0];\n    return null;\n  } catch (err) {\n    logWarn(\"[api] fetchArtist failed:\", err?.message || err);\n    toastError(\"–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∞—Ä—Ç–∏—Å—Ç–∞.\");\n    return null;\n  }\n}\n\n/**\n * –ê–ª—å–±–æ–º—ã –∞—Ä—Ç–∏—Å—Ç–∞ (–∫–∞–∂–¥—ã–π –∞–ª—å–±–æ–º –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∞—Å—Å–∏–≤ —Ç—Ä–µ–∫–æ–≤)\n * @param {string|number} id\n * @returns {Promise<Array>}\n */\nexport async function fetchArtistAlbums(id) {\n  if (!id && id !== 0) return [];\n  try {\n    const { data } = await api.get(`/artists/${id}/albums`);\n\n    // –í–æ–∑–º–æ–∂–Ω—ã–µ —Ñ–æ—Ä–º—ã –æ—Ç API:\n    // - Array\n    // - { albumsList: [...] } / { albums: [...] } / { album: [...] }\n    if (Array.isArray(data)) return data;\n    if (Array.isArray(data?.albumsList)) return data.albumsList;\n    if (Array.isArray(data?.albums)) return data.albums;\n    if (Array.isArray(data?.album)) return data.album;\n\n    return [];\n  } catch (err) {\n    logWarn(\"[api] fetchArtistAlbums failed:\", err?.message || err);\n    toastError(\"–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∞–ª—å–±–æ–º—ã.\");\n    return [];\n  }\n}\n\n/* =========================\n   –î–æ–ø. —ç–∫—Å–ø–æ—Ä—Ç –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏\n   ========================= */\nexport { api, API_BASE, IS_DEV };\n","\n// –ú—è–≥–∫–∏–π ¬´–∫–ª–∞—Ü¬ª (tap) –∏ —á—É—Ç—å –∏–Ω–æ–π –∑–≤—É–∫ –¥–ª—è –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ (page)\nlet ctx, master, comp, postLP;\nlet inited = false;\n\nfunction init() {\n  if (inited) return;\n  const AC = window.AudioContext || window.webkitAudioContext;\n  if (!AC) return;\n  ctx = new AC();\n\n  comp = ctx.createDynamicsCompressor();\n  comp.threshold.value = -26;\n  comp.knee.value = 22;\n  comp.ratio.value = 6;\n  comp.attack.value = 0.004;\n  comp.release.value = 0.08;\n\n  postLP = ctx.createBiquadFilter();\n  postLP.type = \"lowpass\";\n  postLP.frequency.value = 2300;\n  postLP.Q.value = 0.6;\n\n  master = ctx.createGain();\n  master.gain.value = 0.11;\n\n  master.connect(postLP);\n  postLP.connect(comp);\n  comp.connect(ctx.destination);\n\n  // –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –Ω–∞ –ø–µ—Ä–≤–æ–º –∂–µ—Å—Ç–µ\n  const unlock = () => {\n    try { ctx.resume(); } catch {}\n    window.removeEventListener(\"pointerdown\", unlock);\n    window.removeEventListener(\"keydown\", unlock);\n    window.removeEventListener(\"touchstart\", unlock);\n  };\n  window.addEventListener(\"pointerdown\", unlock, { once: true, passive: true });\n  window.addEventListener(\"keydown\", unlock, { once: true });\n  window.addEventListener(\"touchstart\", unlock, { once: true, passive: true });\n\n  inited = true;\n}\n\nfunction resume() { if (ctx && ctx.state === \"suspended\") ctx.resume(); }\n\nfunction tap() {\n  if (!inited) init();\n  if (!ctx) return;\n  resume();\n  const now = ctx.currentTime + 0.004;\n\n  // —à—É–º–æ–≤–æ–π —â–µ–ª—á–æ–∫\n  const durNoise = 0.055;\n  const nsrc = ctx.createBufferSource();\n  const nbuf = ctx.createBuffer(1, Math.max(32, (ctx.sampleRate * durNoise) | 0), ctx.sampleRate);\n  const ch = nbuf.getChannelData(0);\n  for (let i = 0; i < ch.length; i++) {\n    const t = i / ch.length;\n    ch[i] = (Math.random() * 2 - 1) * Math.pow(1 - t, 2);\n  }\n  nsrc.buffer = nbuf;\n\n  const bp = ctx.createBiquadFilter();\n  bp.type = \"bandpass\"; bp.frequency.value = 2050; bp.Q.value = 0.9;\n  const hp = ctx.createBiquadFilter();\n  hp.type = \"highpass\"; hp.frequency.value = 360; hp.Q.value = 0.7;\n\n  const ng = ctx.createGain();\n  ng.gain.setValueAtTime(0.0001, now);\n  ng.gain.linearRampToValueAtTime(0.45, now + 0.004);\n  ng.gain.exponentialRampToValueAtTime(0.0001, now + 0.055);\n\n  nsrc.connect(bp); bp.connect(hp); hp.connect(ng); ng.connect(master);\n  nsrc.start(now); nsrc.stop(now + 0.06);\n\n  // –ª—ë–≥–∫–∏–π –≤–µ—Ä—Ö–Ω–∏–π –æ–±–µ—Ä—Ç–æ–Ω\n  const osc = ctx.createOscillator();\n  osc.type = \"triangle\"; osc.frequency.setValueAtTime(2100, now);\n  const og = ctx.createGain();\n  og.gain.setValueAtTime(0.0001, now);\n  og.gain.linearRampToValueAtTime(0.20, now + 0.003);\n  og.gain.exponentialRampToValueAtTime(0.0001, now + 0.05);\n  osc.connect(og); og.connect(master);\n  osc.start(now); osc.stop(now + 0.055);\n\n  // —á—É—Ç—å ¬´—Ç–µ–ª–∞¬ª\n  const low = ctx.createOscillator();\n  low.type = \"sine\"; low.frequency.setValueAtTime(165, now);\n  const lg = ctx.createGain();\n  lg.gain.setValueAtTime(0.0001, now);\n  lg.gain.linearRampToValueAtTime(0.05, now + 0.003);\n  lg.gain.exponentialRampToValueAtTime(0.0001, now + 0.042);\n  low.connect(lg); lg.connect(master);\n  low.start(now); low.stop(now + 0.045);\n}\n\nfunction page() {\n  if (!inited) init();\n  if (!ctx) return;\n  resume();\n  const now = ctx.currentTime + 0.003;\n  const osc = ctx.createOscillator();\n  osc.type = \"triangle\"; osc.frequency.setValueAtTime(1750, now);\n  const g = ctx.createGain();\n  g.gain.setValueAtTime(0.0001, now);\n  g.gain.linearRampToValueAtTime(0.17, now + 0.003);\n  g.gain.exponentialRampToValueAtTime(0.0001, now + 0.06);\n  osc.connect(g); g.connect(master);\n  osc.start(now); osc.stop(now + 0.065);\n}\n\nexport const UISound = { tap, page };\nexport default UISound;\n","\nimport {\n  fetchArtists as _fetchArtists,\n  fetchGenres  as _fetchGenres,\n  fetchArtist  as _fetchArtist,\n  fetchArtistAlbums as _fetchArtistAlbums,\n} from \"../../api.js\";\n\n// ---------- helpers ----------\nconst normId = (o) => o?.idArtist || o?.id || o?._id || o?.artistId || \"\";\n\nconst normGenres = (o) => {\n  if (Array.isArray(o?.genres)) return o.genres;\n  if (typeof o?.strGenre === \"string\" && o.strGenre.trim())\n    return o.strGenre.split(/,\\s*/).filter(Boolean);\n  if (o?.genre) return [o.genre];\n  return [];\n};\n\nconst NOPHOTO = \"https://via.placeholder.com/960x540?text=No+Image\";\n\nconst normArtist = (o = {}) => ({\n  id: normId(o),\n  name: o.strArtist || o.name || \"Unknown artist\",\n  image: o.strArtistThumb || o.thumb || o.photo || o.image || NOPHOTO,\n  country: o.strCountry || o.country || \"N/A\",\n  members: o.intMembers || o.members || \"N/A\",\n  gender:  o.strGender || o.sex || \"N/A\",\n  biography: o.strBiographyEN || o.biography || o.about || \"\",\n  genres: normGenres(o),\n  formedYear: o.intFormedYear || o.formedYear || o.yearStart || null,\n  endedYear:  o.intDisbandedYear || o.intDiedYear || o.disbandedYear || o.yearEnd || null,\n});\n\nconst normTrack = (t = {}) => ({\n  title: t.strTrack || t.title || t.name || \"‚Äî\",\n  duration: Number(t.intDuration ?? t.duration ?? t.time ?? 0),\n  // –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –≤—ã—Ç—è–≥–∏–≤–∞–µ–º —Å—Å—ã–ª–∫—É –∏–º–µ–Ω–Ω–æ –∏–∑ –±—ç–∫–µ–Ω–¥–∞\n  youtube:\n    t.strMusicVid ||\n    t.youtube ||\n    t.youtube_url ||\n    t.url ||\n    t.movie ||\n    t.link ||\n    t.href ||\n    \"\",\n});\n\nconst normAlbum = (a = {}) => {\n  const rawTracks =\n    Array.isArray(a.tracks) ? a.tracks :\n    Array.isArray(a.songs)  ? a.songs  :\n    Array.isArray(a.track)  ? a.track  : [];\n  return {\n    title: a.strAlbum || a.title || a.name || \"Album\",\n    tracks: rawTracks.map(normTrack),\n  };\n};\n\n// ---------- exported API (normalized) ----------\nexport async function fetchArtists(params) {\n  const res = await _fetchArtists(params);\n  const list = Array.isArray(res?.artists) ? res.artists\n             : Array.isArray(res)          ? res\n             : [];\n  const artists = list.map(normArtist);\n  const totalArtists = Number(res?.totalArtists ?? res?.total ?? artists.length);\n  return { artists, totalArtists };\n}\n\nexport async function fetchGenres() {\n  const res = await _fetchGenres();\n  if (Array.isArray(res)) return res;\n  if (Array.isArray(res?.genres)) return res.genres;\n  return [];\n}\n\nexport async function fetchArtist(id) {\n  const res = await _fetchArtist(id);\n  const obj = Array.isArray(res) ? res[0]\n            : Array.isArray(res?.artists) ? res.artists[0]\n            : res;\n  return obj ? normArtist(obj) : null;\n}\n\nexport async function fetchArtistAlbums(id) {\n  const res = await _fetchArtistAlbums(id);\n  const list = Array.isArray(res) ? res\n             : Array.isArray(res?.albums) ? res.albums\n             : Array.isArray(res?.album)  ? res.album\n             : [];\n  return list.map(normAlbum);\n}\n\n\n\n","// src/js/artists/features/state.js\n\nconst STORAGE_KEY = \"artistsStateV2\";\n\nconst initial = {\n  page: 1,\n  limit: 8,            // –±–∞–∑–æ–≤—ã–π –ª–∏–º–∏—Ç –¥–ª—è Default\n  genre: \"\",\n  sort: \"\",\n  q: \"\",\n  isMobilePanelOpen: false,\n};\n\n// –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ\nlet state = { ...initial };\n\n// –§–ª–∞–≥ –∏ —Å–ª—É—à–∞—Ç–µ–ª–∏\nlet storageLoaded = false;\nconst listeners = new Set();\n\n/* ---------------- storage helpers ---------------- */\nfunction canUseStorage() {\n  try {\n    const k = \"__probe__\";\n    localStorage.setItem(k, \"1\");\n    localStorage.removeItem(k);\n    return true;\n  } catch {\n    return false;\n  }\n}\n\nfunction loadFromStorage() {\n  if (storageLoaded) return;\n  storageLoaded = true;\n  if (!canUseStorage()) return;\n\n  try {\n    const raw = localStorage.getItem(STORAGE_KEY);\n    if (!raw) return;\n    const obj = JSON.parse(raw);\n    state = {\n      page: Math.max(1, Number(obj?.page) || initial.page),\n      limit: Math.max(1, Number(obj?.limit) || initial.limit),\n      genre: String(obj?.genre ?? initial.genre),\n      sort: String(obj?.sort ?? initial.sort),\n      q: String(obj?.q ?? initial.q),\n      isMobilePanelOpen: !!obj?.isMobilePanelOpen,\n    };\n  } catch {\n    // –∏–≥–Ω–æ—Ä\n  }\n}\n\nfunction saveToStorage() {\n  if (!storageLoaded || !canUseStorage()) return;\n  try {\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(state));\n  } catch {\n    // –∫–≤–æ—Ç–∞/–ø—Ä–∏–≤–∞—Ç–Ω—ã–π —Ä–µ–∂–∏–º ‚Äî –º–æ–ª—á–∞\n  }\n}\n\n/* ---------------- pub/sub ---------------- */\nfunction notify() {\n  const snap = { ...state };\n  for (const fn of listeners) {\n    try { fn(snap); } catch {}\n  }\n}\n\n/** –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é –æ—Ç–ø–∏—Å–∫–∏. */\nexport function subscribe(fn) {\n  if (typeof fn !== \"function\") return () => {};\n  listeners.add(fn);\n  return () => listeners.delete(fn);\n}\n\n/** –Ø–≤–Ω–∞—è –æ—Ç–ø–∏—Å–∫–∞ (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ —Ñ—É–Ω–∫—Ü–∏–∏, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–π subscribe) */\nexport function unsubscribe(fn) {\n  listeners.delete(fn);\n}\n\n// –Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π –∞–ª–∏–∞—Å, –µ—Å–ª–∏ –≥–¥–µ-—Ç–æ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –¥—Ä—É–≥–æ–µ –∏–º—è\nexport const onChange = subscribe;\n\n/* ---------------- —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π API ---------------- */\nconst ArtistState = {\n  get() {\n    loadFromStorage();\n    return { ...state };\n  },\n  setPage(p) {\n    loadFromStorage();\n    state.page = Math.max(1, Number(p) || 1);\n    saveToStorage(); notify();\n  },\n  setLimit(n) {\n    loadFromStorage();\n    state.limit = Math.max(1, Number(n) || initial.limit);\n    saveToStorage(); notify();\n  },\n  setGenre(v) {\n    loadFromStorage();\n    state.genre = v || \"\";\n    saveToStorage(); notify();\n  },\n  setSort(v) {\n    loadFromStorage();\n    state.sort = v || \"\";\n    saveToStorage(); notify();\n  },\n  setQuery(v) {\n    loadFromStorage();\n    state.q = v || \"\";\n    saveToStorage(); notify();\n  },\n  setMobilePanel(on) {\n    loadFromStorage();\n    state.isMobilePanelOpen = !!on;\n    saveToStorage(); notify();\n  },\n  reset() {\n    loadFromStorage();\n    state = { ...initial };\n    saveToStorage(); notify();\n  },\n};\n\nexport { ArtistState };\nexport default ArtistState;\n\n/* ---------------- back-compat —ç–∫—Å–ø–æ—Ä—Ç ---------------- */\n// –°—Ç–∞—Ä—ã–µ –∏–º–ø–æ—Ä—Ç—ã –º–æ–≥–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–∏.\nexport const getState = () => ArtistState.get();\n\nexport const setState = (patch = {}) => {\n  loadFromStorage();\n  const next = { ...state };\n\n  if (\"page\" in patch)  next.page  = Math.max(1, Number(patch.page)  || 1);\n  if (\"limit\" in patch) next.limit = Math.max(1, Number(patch.limit) || initial.limit);\n  if (\"genre\" in patch) next.genre = String(patch.genre || \"\");\n  if (\"sort\" in patch)  next.sort  = String(patch.sort  || \"\");\n  if (\"q\" in patch)     next.q     = String(patch.q     || \"\");\n  if (\"isMobilePanelOpen\" in patch) next.isMobilePanelOpen = !!patch.isMobilePanelOpen;\n\n  state = next;\n  saveToStorage(); notify();\n  return ArtistState.get();\n};\n\nexport const resetState = () => { ArtistState.reset(); return ArtistState.get(); };\n\n// –ü—Ä–æ–±—Ä–∞—Å—ã–≤–∞–µ–º –ø–æ–∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ —Å–µ—Ç—Ç–µ—Ä—ã, –µ—Å–ª–∏ –≥–¥–µ-—Ç–æ –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é\nexport const setPage        = (p)  => ArtistState.setPage(p);\nexport const setLimit       = (n)  => ArtistState.setLimit(n);\nexport const setGenre       = (v)  => ArtistState.setGenre(v);\nexport const setSort        = (v)  => ArtistState.setSort(v);\nexport const setQuery       = (v)  => ArtistState.setQuery(v);\nexport const setMobilePanel = (on) => ArtistState.setMobilePanel(on);\n\n/* ---------------- –ø–µ—Ä–≤–∏—á–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ ---------------- */\nloadFromStorage(); // —á—Ç–æ–±—ã —Å–æ—Å—Ç–æ—è–Ω–∏–µ –±—ã–ª–æ –≥–æ—Ç–æ–≤–æ –¥–æ –ø–µ—Ä–≤—ã—Ö –ø–æ–¥–ø–∏—Å–æ–∫\n\n\n","// –†–µ—Ñ-—Å—á—ë—Ç—á–∏–∫ + ¬´–∞–≤–∞—Ä–∏–π–Ω–∞—è¬ª —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞\nlet depth = 0;\nlet savedY = 0;\n\nexport function lockScroll() {\n  if (depth++ === 0) {\n    savedY = window.scrollY || document.documentElement.scrollTop || 0;\n    const s = document.body.style;\n    s.position = \"fixed\";\n    s.top = `-${savedY}px`;\n    s.left = \"0\";\n    s.right = \"0\";\n    s.width = \"100%\";\n    document.body.classList.add(\"scroll-locked\");\n  }\n}\n\nexport function unlockScroll(force = false) {\n  if (force) depth = 1;                // –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ ¬´—Å–≤–µ—Å—Ç–∏¬ª –∫ –Ω—É–ª—é\n  if (depth > 0 && --depth === 0) {\n    const s = document.body.style;\n    s.position = s.top = s.left = s.right = s.width = \"\";\n    window.scrollTo(0, savedY);\n    document.body.classList.remove(\"scroll-locked\");\n  }\n}\n\n// –Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π ‚Äî –¥–æ—Å—Ç—É–ø–Ω–æ –∏–∑ –∫–æ–Ω—Å–æ–ª–∏: window.__unlockScroll()\nexport function emergencyUnlock() { unlockScroll(true); }\nif (typeof window !== \"undefined\") {\n  window.__unlockScroll = emergencyUnlock;\n  // –µ—Å–ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–µ—Ä–µ–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ ‚Äî —Å–Ω–∏–º–µ–º –±–ª–æ–∫–∏—Ä–æ–≤–∫—É\n  window.addEventListener(\"pageshow\", () => emergencyUnlock());\n}\n","// src/js/artists/features/player.js\nlet _instance = null;\n\n/* -------------------- YT API -------------------- */\nfunction loadYTAPI() {\n  if (window.YT && window.YT.Player) return Promise.resolve();\n  if (loadYTAPI._p) return loadYTAPI._p;\n  loadYTAPI._p = new Promise((res, rej) => {\n    const s = document.createElement(\"script\");\n    s.src = \"https://www.youtube.com/iframe_api\";\n    s.onerror = () => rej(new Error(\"YT API load failed\"));\n    document.head.appendChild(s);\n    const t = setTimeout(() => rej(new Error(\"YT API timeout\")), 15000);\n    window.onYouTubeIframeAPIReady = () => { clearTimeout(t); res(); };\n  });\n  return loadYTAPI._p;\n}\n\nconst isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);\nfunction getYouTubeId(urlOrId) {\n  if (!urlOrId) return \"\";\n  if (/^[\\w-]{11}$/.test(urlOrId)) return urlOrId;\n  try {\n    const u = new URL(urlOrId, location.href);\n    if (/youtu\\.be$/.test(u.hostname)) return u.pathname.slice(1);\n    if (u.searchParams.get(\"v\")) return u.searchParams.get(\"v\");\n    const m = u.pathname.match(/\\/(embed|shorts|v)\\/([^/?#]+)/);\n    return m ? m[2] : \"\";\n  } catch { return \"\"; }\n}\nconst clamp = (v, a, b) => Math.min(b, Math.max(a, v));\nconst shuffleArr = (arr) => {\n  const a = arr.slice();\n  for (let i = a.length - 1; i > 0; i--) {\n    const j = (Math.random() * (i + 1)) | 0;\n    [a[i], a[j]] = [a[j], a[i]];\n  }\n  return a;\n};\nfunction fmtTimeSec(sec) {\n  sec = Math.max(0, Math.round(Number(sec) || 0));\n  const m = Math.floor(sec / 60);\n  const s = String(sec % 60).padStart(2, \"0\");\n  return `${m}:${s}`;\n}\n\n/* -------------------- –≠–∫—Å–ø–æ—Ä—Ç: —Ñ–∞–±—Ä–∏–∫–∞ singleton -------------------- */\nexport function createMiniPlayer() {\n  if (_instance) return _instance;\n\n  /* ---------- DOM ---------- */\n  const dock = document.createElement(\"div\");\n  dock.className = \"am-player\";\n  dock.innerHTML = `\n    <div class=\"am-player__inner\">\n      <div class=\"am-player__dragzone\" aria-hidden=\"true\" title=\"Drag the player\"></div>\n      <button class=\"am-player__hide\" type=\"button\" aria-label=\"Hide\">Hide</button>\n      <button class=\"am-player__close\" type=\"button\" aria-label=\"Close\">√ó</button>\n\n      <div class=\"am-player__frame\">\n        <div class=\"am-player__host\" id=\"am-player-host\"></div>\n        <a class=\"am-player__ytlink\" href=\"#\" target=\"_blank\" rel=\"noopener noreferrer\" aria-label=\"Open on YouTube\">YouTube ‚Üó</a>\n      </div>\n\n      <div class=\"am-player__bar\">\n        <div class=\"am-player__left\">\n          <button class=\"am-player__skip am-player__prev\" type=\"button\" aria-label=\"Previous\">‚èÆ</button>\n          <button class=\"am-player__play\" type=\"button\" aria-label=\"Play/Pause\">‚ñ∂</button>\n          <button class=\"am-player__skip am-player__next\" type=\"button\" aria-label=\"Next\">‚è≠</button>\n          <span class=\"am-player__time\"><span class=\"am-player__cur\">0:00</span> / <span class=\"am-player__dur\">0:00</span></span>\n        </div>\n\n        <div class=\"am-player__progresswrap\">\n          <input class=\"am-player__progress\" type=\"range\" min=\"0\" max=\"1000\" value=\"0\" step=\"1\" aria-label=\"Seek\">\n        </div>\n\n        <div class=\"am-player__right\">\n          <button class=\"am-player__mute\" type=\"button\" aria-label=\"Mute/Unmute\">üîà</button>\n          <input class=\"am-player__slider\" type=\"range\" min=\"0\" max=\"100\" value=\"60\" step=\"1\" aria-label=\"Volume\">\n        </div>\n      </div>\n    </div>\n  `;\n  document.body.appendChild(dock);\n\n  let bubble = null;\n\n  // refs\n  const host     = dock.querySelector(\"#am-player-host\");\n  const btnClose = dock.querySelector(\".am-player__close\");\n  const btnHide  = dock.querySelector(\".am-player__hide\");\n  const btnPlay  = dock.querySelector(\".am-player__play\");\n  const btnPrev  = dock.querySelector(\".am-player__prev\");\n  const btnNext  = dock.querySelector(\".am-player__next\");\n  const btnMute  = dock.querySelector(\".am-player__mute\");\n  const vol      = dock.querySelector(\".am-player__slider\");\n  const prog     = dock.querySelector(\".am-player__progress\");\n  const tCur     = dock.querySelector(\".am-player__cur\");\n  const tDur     = dock.querySelector(\".am-player__dur\");\n  const dragzone = dock.querySelector(\".am-player__dragzone\");\n  const aYTlink  = dock.querySelector(\".am-player__ytlink\");\n\n  /* ---------- state ---------- */\n  let yt = null;\n  let ready = false;\n  let duration = 0;\n  let timer = null;\n  let muted = false;\n  let volVal = 60;\n  let userSeeking = false;\n\n  let queue = [];\n  let qi = -1;\n  let loop = false;\n\n  const DOCK_KEY = \"amPlayerPos\";\n  let dockDrag = null;\n\n  const BUBBLE_KEY = \"amBubblePos2\";\n  let bubbleDragging = false;\n  let bubbleStart = null;\n  let _bubblePos = null;\n\n  // NEW: –∏–≥–Ω–æ—Ä –∫–ª–∏–∫–∞ —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ drag\n  let recentBubbleDrag = false;\n\n  let watchdogId = null;\n\n  if (isIOS) {\n    vol.disabled = true;\n    vol.title = \"On iOS the volume is hardware-only\";\n  }\n\n  /* ---------- UI helpers ---------- */\n  function showBubble(useSaved = true) {\n    if (!bubble) {\n      bubble = document.createElement(\"button\");\n      bubble.className = \"am-player__bubble is-paused\";\n      bubble.type = \"button\";\n      bubble.setAttribute(\"aria-label\", \"Open player\");\n      bubble.style.display = \"none\";\n      bubble.innerHTML = `<span class=\"note\">‚ô™</span>`;\n      document.body.appendChild(bubble);\n\n      // ‚ñº‚ñº‚ñº –ü–ê–¢–ß: –æ—Ç–∫—Ä—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –ø–æ ¬´—á–∏—Å—Ç–æ–º—É¬ª –∫–ª–∏–∫—É\n      bubble.addEventListener(\"click\", (e) => {\n        if (recentBubbleDrag) {\n          recentBubbleDrag = false;\n          e.preventDefault();\n          e.stopPropagation();\n          return;\n        }\n        uiMin(false);\n      });\n\n      bubble.addEventListener(\"pointerdown\", (e) => {\n        bubbleDragging = false;\n        recentBubbleDrag = false;            // —Å–±—Ä–∞—Å—ã–≤–∞–µ–º –º–∞—Ä–∫–µ—Ä\n        try { bubble.setPointerCapture(e.pointerId); } catch {}\n        const r = bubble.getBoundingClientRect();\n        bubbleStart = { x: e.clientX, y: e.clientY, left: r.left, top: r.top };\n      });\n      bubble.addEventListener(\"pointermove\", (e) => {\n        if (!bubbleStart) return;\n        const dx = e.clientX - bubbleStart.x;\n        const dy = e.clientY - bubbleStart.y;\n        if (Math.abs(dx) + Math.abs(dy) > 3) bubbleDragging = true;\n        bubble.style.left = `${(bubbleStart.left + dx) | 0}px`;\n        bubble.style.top  = `${(bubbleStart.top  + dy) | 0}px`;\n      });\n      bubble.addEventListener(\"pointerup\", (e) => {\n        try { bubble.releasePointerCapture(e.pointerId); } catch {}\n        // –µ—Å–ª–∏ –±—ã–ª drag ‚Äî –ø–æ–º–µ—á–∞–µ–º, —á—Ç–æ–±—ã —Å–ª–µ–¥—É—é—â–∏–π click –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ç—å\n        recentBubbleDrag = !!bubbleDragging;\n        bubbleStart = null;\n        bubbleDragging = false;\n        clampBubbleToViewport(); persistBubblePos();\n      });\n      bubble.addEventListener(\"pointercancel\", () => {\n        recentBubbleDrag = !!bubbleDragging;\n        bubbleStart = null;\n        bubbleDragging = false;\n      });\n      window.addEventListener(\"resize\", () => { clampBubbleToViewport(); persistBubblePos(); });\n      window.visualViewport?.addEventListener(\"resize\", () => { clampBubbleToViewport(); persistBubblePos(); });\n      window.addEventListener(\"orientationchange\", () => { clampBubbleToViewport(); persistBubblePos(); });\n    }\n    bubble.style.display = \"grid\";\n    restoreBubblePos(useSaved);\n  }\n  function hideBubble() { if (bubble) bubble.style.display = \"none\"; }\n  function setBubblePulse(isPlaying) {\n    if (!bubble) return;\n    bubble.classList.toggle(\"is-paused\", !isPlaying);\n  }\n  function setBubbleAmp(v) {\n    if (!bubble) return;\n    const amp = 1.02 + (Math.max(0, Math.min(100, v)) / 100) * 0.08;\n    bubble.style.setProperty(\"--amp\", amp.toFixed(3));\n  }\n  function clampBubbleToViewport(margin = 8) {\n    if (!bubble || bubble.style.display === \"none\") return;\n    const w = window.innerWidth, h = window.innerHeight;\n    const r = bubble.getBoundingClientRect();\n    let left = clamp(r.left, margin, Math.max(margin, w - r.width - margin));\n    let top  = clamp(r.top,  margin, Math.max(margin, h - r.height - margin));\n    bubble.style.left = `${left}px`;\n    bubble.style.top  = `${top}px`;\n  }\n  function persistBubblePos() {\n    if (!bubble || bubble.style.display === \"none\") return;\n    const r = bubble.getBoundingClientRect();\n    const w = Math.max(1, window.innerWidth  - r.width);\n    const h = Math.max(1, window.innerHeight - r.height);\n    _bubblePos = { rx: clamp(r.left / w, 0, 1), ry: clamp(r.top / h, 0, 1) };\n    try { localStorage.setItem(BUBBLE_KEY, JSON.stringify(_bubblePos)); } catch {}\n  }\n  function restoreBubblePos(useSaved = true) {\n    if (!bubble) return;\n    const r0 = bubble.getBoundingClientRect();\n    let left, top;\n    if (useSaved) {\n      try {\n        const pos = JSON.parse(localStorage.getItem(BUBBLE_KEY) || \"null\");\n        if (pos && Number.isFinite(pos.rx) && Number.isFinite(pos.ry)) {\n          const w = Math.max(1, window.innerWidth  - r0.width);\n          const h = Math.max(1, window.innerHeight - r0.height);\n          left = clamp(Math.round(pos.rx * w), 8, w);\n          top  = clamp(Math.round(pos.ry * h), 8, h);\n        }\n      } catch {}\n    }\n    if (!Number.isFinite(left) || !Number.isFinite(top)) {\n      const w = window.innerWidth, h = window.innerHeight;\n      const size = r0.width || 64;\n      left = Math.max(8, Math.round((w - size) / 2));\n      top  = Math.max(8, Math.round(h - size - 24));\n    }\n    bubble.style.left = `${left}px`;\n    bubble.style.top  = `${top}px`;\n    clampBubbleToViewport();\n  }\n\n  function uiPlayIcon(isPlaying) { btnPlay.textContent = isPlaying ? \"‚è∏\" : \"‚ñ∂\"; }\n  function uiMuteIcon(isMuted)   { btnMute.textContent = isMuted ? \"üîá\" : \"üîà\"; }\n\n  function uiShow(on) {\n    dock.classList.toggle(\"am-player--active\", !!on);\n    // –í–ê–ñ–ù–û: –∫–æ–≥–¥–∞ –∞–∫—Ç–∏–≤–µ–Ω –º–∏–Ω–∏-—Ä–µ–∂–∏–º, –ø—É–∑—ã—Ä—å –¥–æ–ª–∂–µ–Ω –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –≤–∏–¥–∏–º—ã–º\n    const isMin = dock.classList.contains(\"am-player--min\");\n    if (on) {\n      if (!isMin) hideBubble();\n    } else {\n      hideBubble();\n    }\n  }\n  function uiMin(on) {\n    dock.classList.toggle(\"am-player--min\", !!on);\n    if (on) showBubble(true);\n    else hideBubble();\n  }\n\n  function uiSetTime(cur, dur) {\n    tCur.textContent = fmtTimeSec(cur);\n    tDur.textContent = fmtTimeSec(dur);\n    if (!userSeeking) {\n      const v = dur > 0 ? Math.round((cur / dur) * 1000) : 0;\n      prog.value = String(v);\n    }\n  }\n  function clearTimer() { if (timer) { clearInterval(timer); timer = null; } }\n  function startTimer() {\n    clearTimer();\n    timer = setInterval(() => {\n      if (!ready || !yt || typeof yt.getCurrentTime !== \"function\") return;\n      const cur = yt.getCurrentTime() || 0;\n      const dur = duration || yt.getDuration() || 0;\n      duration = dur;\n      uiSetTime(cur, dur);\n    }, 250);\n  }\n  function clearWatchdog() { if (watchdogId) { clearTimeout(watchdogId); watchdogId = null; } }\n\n  /* ---------- YT ---------- */\n  function skipWithDelay(ms = 2000) { setTimeout(autoNext, ms); }\n\n  function ensureYT(id) {\n    return loadYTAPI().then(() => {\n      if (yt) { try { yt.destroy(); } catch {} yt = null; }\n      host.innerHTML = `<div id=\"am-player-yt\"></div>`;\n      yt = new YT.Player(\"am-player-yt\", {\n        host: \"https://www.youtube-nocookie.com\",\n        videoId: id,\n        playerVars: { autoplay: 1, rel: 0, modestbranding: 1, controls: 1, enablejsapi: 1, origin: location.origin },\n        events: {\n          onReady: () => {\n            ready = true;\n            duration = yt.getDuration() || 0;\n            uiSetTime(0, duration);\n            if (!isIOS && typeof yt.setVolume === \"function\") yt.setVolume(volVal);\n            if (muted && yt.mute) yt.mute();\n            uiPlayIcon(true);\n            setBubblePulse(true);\n            setBubbleAmp(volVal);\n            startTimer();\n\n            clearWatchdog();\n            watchdogId = setTimeout(() => {\n              try {\n                if (yt && yt.getPlayerState && yt.getPlayerState() !== YT.PlayerState.PLAYING) {\n                  console.warn(\"Watchdog: video didn‚Äôt start ‚Äî skip.\");\n                  setBubblePulse(false);\n                  skipWithDelay(0);\n                }\n              } catch {}\n            }, 6000);\n          },\n          onStateChange: (e) => {\n            if (e.data === YT.PlayerState.PLAYING) {\n              clearWatchdog();\n              uiPlayIcon(true);\n              setBubblePulse(true);\n              startTimer();\n            } else if (e.data === YT.PlayerState.PAUSED) {\n              uiPlayIcon(false);\n              setBubblePulse(false);\n              clearTimer();\n            } else if (e.data === YT.PlayerState.ENDED) {\n              uiPlayIcon(false);\n              setBubblePulse(false);\n              clearTimer();\n              clearWatchdog();\n              autoNext();\n            }\n          },\n          onError: () => {\n            uiPlayIcon(false);\n            setBubblePulse(false);\n            clearTimer();\n            clearWatchdog();\n            skipWithDelay(1200);\n          }\n        }\n      });\n    });\n  }\n\n  /* ---------- –û—á–µ—Ä–µ–¥—å ---------- */\n  async function playByIndex(idx, opts = {}) {\n    if (!queue.length) return;\n    qi = clamp(idx, 0, queue.length - 1);\n    const id = queue[qi];\n    if (!id || !/^[\\w-]{11}$/.test(id)) {\n      console.warn(\"Bad YouTube ID, skip:\", id);\n      return skipWithDelay(0);\n    }\n    aYTlink.href = `https://www.youtube.com/watch?v=${id}`;\n\n    // NEW: —É–ø—Ä–∞–≤–ª—è–µ–º —Ä–∞—Å–∫—Ä—ã—Ç–∏–µ–º\n    const reveal = opts.reveal ?? true;\n    if (reveal) {\n      uiMin(false);\n      uiShow(true);\n      restoreDockPos();\n    } else {\n      // –æ—Å—Ç–∞—ë–º—Å—è –≤ —Ç–µ–∫—É—â–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏; –µ—Å–ª–∏ –ø–ª–µ–µ—Ä –Ω–µ –∞–∫—Ç–∏–≤–µ–Ω ‚Äî –∞–∫—Ç–∏–≤–∏—Ä—É–µ–º –±–µ–∑ —Ä–∞—Å–∫—Ä—ã—Ç–∏—è\n      if (!dock.classList.contains(\"am-player--active\")) uiShow(true);\n      // –µ—Å–ª–∏ —É–∂–µ —Å–≤—ë—Ä–Ω—É—Ç ‚Äî –ø—É–∑—ã—Ä—å –æ—Å—Ç–∞—ë—Ç—Å—è\n    }\n\n    ready = false; duration = 0; clearTimer(); clearWatchdog();\n    try { await ensureYT(id); } catch (err) { skipWithDelay(1200); }\n  }\n\n  function autoNext() {\n    if (!queue.length) return;\n    if (qi < queue.length - 1) playByIndex(qi + 1, { reveal: false });\n    else if (loop) playByIndex(0, { reveal: false });\n  }\n\n  /* ---------- –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ –î–û–ö–ê (–∫–∞–∫ –±—ã–ª–æ) ---------- */\n  function getVP() {\n    const w = window.visualViewport?.width || document.documentElement.clientWidth || window.innerWidth;\n    const h = window.visualViewport?.height || document.documentElement.clientHeight || window.innerHeight;\n    return { w, h };\n  }\n  function clampDock() {\n    if (!dock.classList.contains(\"am-player--free\")) return;\n    const rect = dock.getBoundingClientRect();\n    const { w, h } = getVP();\n    let left = clamp(rect.left, 8, Math.max(8, w - rect.width - 8));\n    let top  = clamp(rect.top,  8, Math.max(8, h - rect.height - 8));\n    dock.style.left = `${left}px`;\n    dock.style.top  = `${top}px`;\n    try { localStorage.setItem(DOCK_KEY, JSON.stringify({ left, top })); } catch {}\n  }\n  function restoreDockPos() {\n    let pos = null;\n    try { pos = JSON.parse(localStorage.getItem(DOCK_KEY) || \"null\"); } catch {}\n    if (pos && Number.isFinite(pos.left) && Number.isFinite(pos.top)) {\n      dock.classList.add(\"am-player--free\");\n      dock.style.transform = \"none\";\n      dock.style.left = `${pos.left}px`;\n      dock.style.top  = `${pos.top}px`;\n      dock.style.right = \"auto\";\n      dock.style.bottom = \"auto\";\n      clampDock();\n    } else {\n      dock.classList.remove(\"am-player--free\");\n      dock.style.left = dock.style.top = dock.style.right = dock.style.bottom = \"\";\n      dock.style.transform = \"\";\n    }\n  }\n  function beginDockDrag(e) {\n    if (!dock.classList.contains(\"am-player--free\")) {\n      const r = dock.getBoundingClientRect();\n      dock.classList.add(\"am-player--free\");\n      dock.style.transform = \"none\";\n      dock.style.left = `${r.left}px`;\n      dock.style.top  = `${r.top}px`;\n      dock.style.right = \"auto\";\n      dock.style.bottom = \"auto\";\n    }\n    dockDrag = {\n      startX: e.clientX,\n      startY: e.clientY,\n      baseLeft: parseFloat(dock.style.left || \"0\"),\n      baseTop:  parseFloat(dock.style.top || \"0\"),\n    };\n    dragzone.classList.add(\"dragging\");\n    try { dragzone.setPointerCapture?.(e.pointerId); } catch {}\n  }\n  function moveDockDrag(e) {\n    if (!dockDrag) return;\n    let left = dockDrag.baseLeft + (e.clientX - dockDrag.startX);\n    let top  = dockDrag.baseTop  + (e.clientY - dockDrag.startY);\n    const r = dock.getBoundingClientRect();\n    const { w, h } = getVP();\n    left = clamp(left, 8, Math.max(8, w - r.width - 8));\n    top  = clamp(top,  8, Math.max(8, h - r.height - 8));\n    dock.style.left = `${left}px`;\n    dock.style.top  = `${top}px`;\n  }\n  function endDockDrag(e) {\n    if (!dockDrag) return;\n    try { dragzone.releasePointerCapture?.(e.pointerId); } catch {}\n    dragzone.classList.remove(\"dragging\");\n    dockDrag = null;\n    clampDock();\n  }\n  dragzone.addEventListener(\"pointerdown\", beginDockDrag);\n  window.addEventListener(\"pointermove\", moveDockDrag);\n  window.addEventListener(\"pointerup\", endDockDrag);\n  window.addEventListener(\"resize\", clampDock);\n  window.visualViewport?.addEventListener(\"resize\", clampDock);\n  window.addEventListener(\"orientationchange\", clampDock);\n\n  /* ---------- –ö–Ω–æ–ø–∫–∏ UI ---------- */\n  btnClose.addEventListener(\"click\", () => {\n    try { yt?.stopVideo?.(); yt?.destroy?.(); } catch {}\n    yt = null; ready = false; duration = 0; clearTimer(); clearWatchdog();\n    uiShow(false); uiMin(false);\n    queue = []; qi = -1;\n    setBubblePulse(false);\n  });\n  btnHide.addEventListener(\"click\", () => { uiMin(true); });\n\n  aYTlink.addEventListener(\"click\", () => {\n    try { yt?.stopVideo?.(); yt?.destroy?.(); } catch {}\n    yt = null; ready = false; duration = 0; clearTimer(); clearWatchdog();\n    uiShow(false); uiMin(false);\n    queue = []; qi = -1;\n    setBubblePulse(false);\n  });\n\n  btnPlay.addEventListener(\"click\", () => {\n    if (!ready || !yt) return;\n    const s = yt.getPlayerState ? yt.getPlayerState() : -1;\n    if (s === YT.PlayerState.PLAYING) { yt.pauseVideo?.(); uiPlayIcon(false); setBubblePulse(false); }\n    else { yt.playVideo?.(); uiPlayIcon(true); setBubblePulse(true); }\n  });\n  btnPrev.addEventListener(\"click\", () => { if (!queue.length) return; playByIndex(qi > 0 ? qi - 1 : (loop ? queue.length - 1 : 0), { reveal: true }); });\n  btnNext.addEventListener(\"click\", () => { if (!queue.length) return; playByIndex(qi < queue.length - 1 ? qi + 1 : (loop ? 0 : qi), { reveal: true }); });\n\n  btnMute.addEventListener(\"click\", () => {\n    if (!yt) return;\n    muted = !muted;\n    if (muted) yt.mute?.(); else yt.unMute?.();\n    uiMuteIcon(muted);\n  });\n  vol.addEventListener(\"input\", () => {\n    const v = Number(vol.value) || 0;\n    volVal = v;\n    if (!isIOS) yt?.setVolume?.(v);\n    if (v === 0 && !muted) { muted = true; yt?.mute?.(); uiMuteIcon(true); }\n    else if (v > 0 && muted) { muted = false; yt?.unMute?.(); uiMuteIcon(false); }\n    setBubbleAmp(v);\n  });\n  prog.addEventListener(\"input\", () => {\n    userSeeking = true;\n    const v = Number(prog.value) || 0;\n    const sec = duration > 0 ? (v / 1000) * duration : 0;\n    tCur.textContent = fmtTimeSec(sec);\n  });\n  prog.addEventListener(\"change\", () => {\n    userSeeking = false;\n    if (!yt || !duration) return;\n    const v = Number(prog.value) || 0;\n    const sec = (v / 1000) * duration;\n    yt.seekTo?.(sec, true);\n  });\n\n  /* ---------- –ü—É–±–ª–∏—á–Ω–æ–µ API ---------- */\n  async function open(urlOrId) {\n    const id = getYouTubeId(urlOrId);\n    if (!id) return;\n    queue = [id]; qi = 0;\n    uiMin(false); uiShow(true); restoreDockPos();\n    await playByIndex(0, { reveal: true });\n  }\n\n  async function openQueue(list, opts = {}) {\n    const ids = (list || []).map(getYouTubeId).filter(Boolean);\n    if (!ids.length) return;\n    loop = !!opts.loop;\n    const arr = opts.shuffle ? shuffleArr(ids) : ids.slice();\n    queue = arr;\n    const start = clamp(Number(opts.startIndex ?? 0) || 0, 0, queue.length - 1);\n    uiMin(false); uiShow(true); restoreDockPos();\n    await playByIndex(start, { reveal: true });\n  }\n\n  // –í–ê–ñ–ù–û: next/prev –±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ ‚Äî –ù–ï –†–ê–°–ö–†–´–í–ê–Æ–¢ –ø–ª–µ–µ—Ä, –µ—Å–ª–∏ –æ–Ω —Å–≤—ë—Ä–Ω—É—Ç.\n  function next() {\n    if (!queue.length) return;\n    const reveal = !dock.classList.contains(\"am-player--min\");\n    playByIndex(qi < queue.length - 1 ? qi + 1 : (loop ? 0 : qi), { reveal });\n  }\n  function prev() {\n    if (!queue.length) return;\n    const reveal = !dock.classList.contains(\"am-player--min\");\n    playByIndex(qi > 0 ? qi - 1 : (loop ? queue.length - 1 : 0), { reveal });\n  }\n\n  function isActive()     { return dock.classList.contains(\"am-player--active\"); }\n  function isMinimized()  { return isActive() && dock.classList.contains(\"am-player--min\"); }\n  function hasQueue()     { return Array.isArray(queue) && queue.length > 0; }\n  function minimize()     { if (isActive()) uiMin(true); }\n  function close()        { btnClose.click(); }\n\n  _instance = { open, openQueue, next, prev, minimize, isActive, isMinimized, hasQueue, close };\n  return _instance;\n}\n\n","\n// –û–≤–µ—Ä–ª–µ–π –∑—É–º–∞: –±–µ–∑ –∏—Å–∫–∞–∂–µ–Ω–∏–π –Ω–∞ –º–æ–±/—Ç–∞–± + pinch/zoom/pan + –∫–æ–ª–µ—Å–æ/–¥–≤–æ–π–Ω–æ–π –∫–ª–∏–∫\n\nlet overlay, dialogEl, stageEl, imgEl, linkEl, closeBtn, backdropEl;\nlet isPanning = false, startX = 0, startY = 0, curX = 0, curY = 0, scale = 1;\nlet baseW = 0, baseH = 0, stageW = 0, stageH = 0;\nconst activePointers = new Map();\nlet pinchActive = false, pinchBaseDist = 0, pinchBaseScale = 1;\n\nconst clamp = (v, min, max) => Math.max(min, Math.min(max, v));\nconst dist = (a, b) => Math.hypot(a.x - b.x, a.y - b.y);\nconst midpoint = (a, b) => ({ x: (a.x + b.x) / 2, y: (a.y + b.y) / 2 });\n\n/* ---------- ensure ---------- */\nfunction ensureZoom() {\n  if (overlay) return;\n\n  overlay = document.createElement(\"div\");\n  overlay.className = \"am-zoom\";\n  overlay.innerHTML = `\n    <div class=\"am-zoom__backdrop\"></div>\n    <div class=\"am-zoom__dialog\" role=\"dialog\" aria-modal=\"true\" aria-label=\"Image preview\">\n      <div class=\"am-zoom__stage\">\n        <img class=\"am-zoom__img\" alt=\"\">\n      </div>\n      <div class=\"am-zoom__bar\">\n        <a class=\"am-zoom__open\" href=\"#\" target=\"_blank\" rel=\"noopener noreferrer\">Open original ‚Üó</a>\n        <button class=\"am-zoom__close\" type=\"button\" aria-label=\"Close\">√ó</button>\n      </div>\n    </div>`;\n  document.body.appendChild(overlay);\n\n  // –±–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–µ–≤—ã–µ —Ñ–æ–ª–±—ç–∫–∏ (–µ—Å–ª–∏ –≤–¥—Ä—É–≥ –ø—Ä–æ—Ñ–∏–ª—å–Ω—ã–π CSS –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω)\n  Object.assign(overlay.style, { position: \"fixed\", inset: \"0\", zIndex: \"6000\", display: \"none\" });\n  dialogEl = overlay.querySelector(\".am-zoom__dialog\");\n  Object.assign(dialogEl.style, {\n    position: \"absolute\", inset: \"0\", display: \"grid\",\n    gridTemplateRows: \"1fr auto\", gap: \"12px\", padding: \"16px\"\n  });\n\n  backdropEl = overlay.querySelector(\".am-zoom__backdrop\");\n  Object.assign(backdropEl.style, { position: \"absolute\", inset: \"0\", background: \"rgba(0,0,0,.7)\" });\n\n  stageEl = overlay.querySelector(\".am-zoom__stage\");\n  Object.assign(stageEl.style, {\n    position: \"relative\",\n    background: \"#000\",\n    borderRadius: \"12px\",\n    overflow: \"hidden\",\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    minHeight: \"240px\",\n    height: \"calc(100vh - 140px)\",\n    touchAction: \"none\" // –∂–µ—Å—Ç—ã ‚Äî –Ω–∞—à–∏–º–∏ —Ä—É–∫–∞–º–∏\n  });\n\n  imgEl = overlay.querySelector(\".am-zoom__img\");\n  // –≤–∞–∂–Ω—ã–µ –∞–Ω—Ç–∏-–∏—Å–∫–∞–∂–µ–Ω–∏—è + –ø–µ—Ä–µ—Ö–≤–∞—Ç global img{height:100%}\n  imgEl.style.maxWidth = \"100%\";\n  imgEl.style.maxHeight = \"100%\";\n  imgEl.style.width = \"auto\";\n  imgEl.style.setProperty(\"height\", \"auto\", \"important\");\n  imgEl.style.objectFit = \"contain\";\n  imgEl.style.transformOrigin = \"center center\";\n  imgEl.style.willChange = \"transform\";\n  imgEl.style.userSelect = \"none\";\n  imgEl.style.webkitUserDrag = \"none\";\n  imgEl.style.pointerEvents = \"auto\";\n\n  const bar = overlay.querySelector(\".am-zoom__bar\");\n  Object.assign(bar.style, {\n    display: \"flex\", justifyContent: \"space-between\",\n    alignItems: \"center\", gap: \"12px\"\n  });\n\n  linkEl = overlay.querySelector(\".am-zoom__open\");\n  linkEl.style.color = \"#fff\";\n  closeBtn = overlay.querySelector(\".am-zoom__close\");\n  Object.assign(closeBtn.style, {\n    width: \"40px\", height: \"40px\", borderRadius: \"10px\",\n    border: \"none\", background: \"var(--color-affair, #764191)\", color: \"#fff\", cursor: \"pointer\"\n  });\n\n  // —Å–æ–±—ã—Ç–∏—è\n  backdropEl.addEventListener(\"click\", closeZoom);\n  closeBtn.addEventListener(\"click\", closeZoom);\n\n  overlay.addEventListener(\"wheel\", onWheel, { passive: false });\n  imgEl.addEventListener(\"dblclick\", toggleZoom);\n\n  imgEl.addEventListener(\"pointerdown\", onPointerDown);\n  imgEl.addEventListener(\"pointermove\", onPointerMove);\n  imgEl.addEventListener(\"pointerup\", onPointerUpCancel);\n  imgEl.addEventListener(\"pointercancel\", onPointerUpCancel);\n\n  document.addEventListener(\"keydown\", (e) => { if (e.key === \"Escape\" && isZoomOpen()) closeZoom(); });\n  window.addEventListener(\"resize\", () => { if (isZoomOpen()) { measureStage(); applyTransform(); } });\n}\n\n/* ---------- measurements ---------- */\nfunction measureBase() {\n  const prev = imgEl.style.transform;\n  imgEl.style.transform = \"translate3d(0,0,0) scale(1)\";\n  const r = imgEl.getBoundingClientRect();\n  imgEl.style.transform = prev;\n  baseW = r.width; baseH = r.height;\n}\nfunction measureStage() {\n  const s = stageEl.getBoundingClientRect();\n  stageW = s.width; stageH = s.height;\n}\nfunction clampPan() {\n  if (!baseW || !baseH || !stageW || !stageH) return;\n  const contentW = baseW * scale, contentH = baseH * scale;\n  if (contentW <= stageW) curX = 0;\n  else { const maxX = (contentW - stageW) / 2; curX = clamp(curX, -maxX, maxX); }\n  if (contentH <= stageH) curY = 0;\n  else { const maxY = (contentH - stageH) / 2; curY = clamp(curY, -maxY, maxY); }\n}\nfunction applyTransform() {\n  clampPan();\n  imgEl.style.transform = `translate3d(${curX}px, ${curY}px, 0) scale(${scale})`;\n  imgEl.style.cursor = scale > 1 ? (isPanning ? \"grabbing\" : \"grab\") : \"zoom-in\";\n}\n\n/* ---------- API ---------- */\nexport function openZoom(src, alt = \"\") {\n  if (!src) return;\n  ensureZoom();\n\n  // —Å–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è\n  activePointers.clear();\n  pinchActive = false; pinchBaseDist = 0; pinchBaseScale = 1;\n  isPanning = false; startX = startY = 0; curX = curY = 0; scale = 1;\n\n  imgEl.src = src;\n  imgEl.alt = alt || \"\";\n  linkEl.href = src;\n\n  overlay.style.display = \"block\";\n\n  const doMeasure = () => { measureStage(); measureBase(); clampPan(); applyTransform(); };\n  if (imgEl.complete && imgEl.naturalWidth > 0) requestAnimationFrame(doMeasure);\n  else imgEl.onload = () => requestAnimationFrame(doMeasure);\n}\n\nexport function closeZoom() {\n  if (!overlay) return;\n  overlay.style.display = \"none\";\n  imgEl.src = \"\";\n  activePointers.clear();\n  pinchActive = false;\n}\n\nexport function isZoomOpen() {\n  return !!(overlay && overlay.style.display !== \"none\");\n}\n\n/* ---------- gestures ---------- */\nfunction toggleZoom() {\n  const prev = scale;\n  scale = prev > 1 ? 1 : 2;\n  if (scale === 1) { curX = 0; curY = 0; }\n  applyTransform();\n}\nfunction onWheel(e) {\n  if (!isZoomOpen()) return;\n  e.preventDefault();\n  const newScale = clamp(scale + (e.deltaY > 0 ? -0.15 : 0.15), 1, 3);\n\n  const rect = imgEl.getBoundingClientRect();\n  const pivot = { x: e.clientX, y: e.clientY };\n  const center = { x: rect.left + rect.width / 2, y: rect.top + rect.height / 2 };\n  const factor = newScale / scale;\n  curX += (center.x - pivot.x) * (1 - factor);\n  curY += (center.y - pivot.y) * (1 - factor);\n\n  scale = newScale;\n  if (scale === 1) { curX = 0; curY = 0; }\n  applyTransform();\n}\nfunction onPointerDown(e) {\n  activePointers.set(e.pointerId, { x: e.clientX, y: e.clientY });\n  imgEl.setPointerCapture(e.pointerId);\n\n  if (activePointers.size === 2) {\n    const [p1, p2] = Array.from(activePointers.values());\n    pinchActive = true;\n    pinchBaseDist = dist(p1, p2) || 1;\n    pinchBaseScale = scale;\n    isPanning = false;\n    return;\n  }\n  if (activePointers.size === 1 && scale > 1) {\n    isPanning = true;\n    startX = e.clientX - curX;\n    startY = e.clientY - curY;\n    applyTransform();\n  }\n}\nfunction onPointerMove(e) {\n  if (!activePointers.has(e.pointerId)) return;\n  activePointers.set(e.pointerId, { x: e.clientX, y: e.clientY });\n\n  if (pinchActive && activePointers.size >= 2) {\n    const [p1, p2] = Array.from(activePointers.values());\n    const d = dist(p1, p2) || 1;\n    let newScale = clamp(pinchBaseScale * (d / pinchBaseDist), 1, 3);\n\n    const mid = midpoint(p1, p2);\n    const rect = imgEl.getBoundingClientRect();\n    const center = { x: rect.left + rect.width / 2, y: rect.top + rect.height / 2 };\n    const factor = newScale / scale;\n    curX += (center.x - mid.x) * (1 - factor);\n    curY += (center.y - mid.y) * (1 - factor);\n\n    scale = newScale;\n    if (scale === 1) { curX = 0; curY = 0; }\n    applyTransform();\n    return;\n  }\n\n  if (isPanning && activePointers.size === 1 && scale > 1) {\n    curX = e.clientX - startX;\n    curY = e.clientY - startY;\n    applyTransform();\n  }\n}\nfunction onPointerUpCancel(e) {\n  if (activePointers.has(e.pointerId)) activePointers.delete(e.pointerId);\n  try { imgEl.releasePointerCapture(e.pointerId); } catch {}\n  if (activePointers.size < 2) { pinchActive = false; pinchBaseDist = 0; }\n  if (activePointers.size === 0) { isPanning = false; applyTransform(); }\n}\n","// –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∞—Ä—Ç–∏—Å—Ç–∞ –ø—Ä–∏ hover –Ω–∞ ‚ÄúLearn more‚Äù >150–º—Å.\n\nimport { fetchArtist, fetchArtistAlbums } from \"./api.js\";\n\nconst cache = new Map(); // id -> { artist, albums, ts }\n\nexport function getPrefetched(id) {\n  return cache.get(String(id));\n}\n\nexport function initPrefetch(root) {\n  const grid = root.querySelector(\"#artists-grid\");\n  if (!grid) return;\n\n  let hoverTimer = null;\n  let hoverId = null;\n\n  function schedulePrefetch(id) {\n    clearTimeout(hoverTimer);\n    hoverTimer = setTimeout(async () => {\n      try {\n        if (cache.has(id)) return;\n        const [artist, albums] = await Promise.all([\n          fetchArtist(id),\n          fetchArtistAlbums(id),\n        ]);\n        cache.set(id, { artist, albums, ts: Date.now() });\n      } catch { /* —Ç–∏—Ö–æ –∏–≥–Ω–æ—Ä–∏–º */ }\n    }, 150);\n  }\n\n  grid.addEventListener(\"mouseenter\", (e) => {\n    const btn = e.target.closest('[data-action=\"more\"]');\n    if (!btn) return;\n    const id = btn.closest(\".card\")?.dataset?.id;\n    if (!id) return;\n    hoverId = String(id);\n    schedulePrefetch(hoverId);\n  }, true);\n\n  grid.addEventListener(\"mouseleave\", (e) => {\n    if (e.target.closest('[data-action=\"more\"]')) {\n      clearTimeout(hoverTimer);\n      hoverTimer = null;\n      hoverId = null;\n    }\n  }, true);\n}\n","export default \"<svg\\n  aria-hidden=\\\"true\\\"\\n  style=\\\"position: absolute; width: 0; height: 0; overflow: hidden;\\\"\\n  version=\\\"1.1\\\"\\n  xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n  xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\"\\n>\\n  <defs>\\n\\n    <symbol id=\\\"icon-search\\\" viewBox=\\\"0 0 31 32\\\">\\n      <path fill=\\\"#fff\\\"\\n            d=\\\"M12.8 23.68c2.272 0 4.478-.761 6.268-2.161l5.627 5.627 1.81-1.81-5.627-5.627a10.184 10.184 0 0 0 2.162-6.269c0-5.646-4.594-10.24-10.24-10.24S2.56 7.794 2.56 13.44 7.154 23.68 12.8 23.68zm0-17.92c4.236 0 7.68 3.444 7.68 7.68s-3.444 7.68-7.68 7.68-7.68-3.444-7.68-7.68 3.444-7.68 7.68-7.68z\\\"\\n            style=\\\"fill:var(--color1, #fff)\\\"/>\\n    </symbol>\\n\\n    <symbol id=\\\"icon-arrow-up\\\" viewBox=\\\"0 0 32 32\\\">\\n      <path fill=\\\"#fff\\\" d=\\\"m8.391 19.057 1.885 1.885L16 15.218l5.724 5.724 1.885-1.885L16 11.448l-7.609 7.609z\\\" style=\\\"fill:var(--color1, #fff)\\\"/>\\n    </symbol>\\n\\n    <symbol id=\\\"icon-icon_close\\\" viewBox=\\\"0 0 32 32\\\">\\n      <path d=\\\"M29.671 28.728l-0.943 0.943c-0.521 0.521-1.365 0.521-1.886 0l-10.842-10.842-10.842 10.842c-0.521 0.521-1.365 0.521-1.886 0l-0.943-0.943c-0.521-0.521-0.521-1.365 0-1.886l10.842-10.842-10.842-10.842c-0.521-0.521-0.521-1.365 0-1.886l0.943-0.943c0.521-0.521 1.365-0.521 1.886 0l10.842 10.842 10.842-10.842c0.521-0.521 1.365-0.521 1.886 0l0.943 0.943c0.521 0.521 0.521 1.365 0 1.886l-10.842 10.842 10.842 10.842c0.521 0.521 0.521 1.365 0 1.886z\\\"></path>\\n    </symbol>\\n\\n    <symbol id=\\\"icon-icon_download_load_more_art_sec\\\" viewBox=\\\"0 0 32 32\\\">\\n      <path d=\\\"M31.33 15.949l-3.232-3.232-9.813 9.813v-21.911h-4.571v21.911l-9.813-9.813-3.232 3.232 15.33 15.33 15.33-15.33z\\\"></path>\\n    </symbol>\\n\\n    <symbol id=\\\"icon-icon_facebook_footer\\\" viewBox=\\\"0 0 31 32\\\">\\n      <path d=\\\"M28.16 16.51c0-7.112-5.731-12.878-12.8-12.878s-12.8 5.766-12.8 12.878c0 6.428 4.681 11.756 10.8 12.722v-8.999h-3.25v-3.723h3.25v-2.837c0-3.228 1.911-5.010 4.835-5.010 1.401 0 2.865 0.252 2.865 0.252v3.169h-1.614c-1.59 0-2.086 0.993-2.086 2.011v2.416h3.55l-0.567 3.723h-2.983v8.999c6.119-0.966 10.8-6.294 10.8-12.722z\\\"></path>\\n    </symbol>\\n\\n    <symbol id=\\\"icon-icon_inst_footer\\\" viewBox=\\\"0 0 31 32\\\">\\n      <path d=\\\"M15.358 6.676c3.078 0 3.442 0.014 4.652 0.068 1.125 0.050 1.732 0.238 2.137 0.396 0.536 0.207 0.922 0.459 1.323 0.86 0.405 0.405 0.652 0.788 0.864 1.323 0.158 0.405 0.346 1.017 0.396 2.137 0.054 1.215 0.068 1.579 0.068 4.653s-0.014 3.442-0.068 4.653c-0.050 1.125-0.238 1.732-0.396 2.137-0.207 0.536-0.459 0.922-0.86 1.323-0.405 0.405-0.788 0.652-1.323 0.864-0.405 0.158-1.017 0.346-2.137 0.396-1.215 0.054-1.58 0.068-4.653 0.068s-3.442-0.014-4.653-0.068c-1.125-0.050-1.732-0.238-2.137-0.396-0.536-0.207-0.922-0.459-1.323-0.86-0.405-0.405-0.652-0.788-0.864-1.322-0.158-0.405-0.346-1.017-0.396-2.137-0.054-1.215-0.068-1.579-0.068-4.653s0.014-3.442 0.068-4.653c0.050-1.125 0.238-1.732 0.396-2.137 0.207-0.536 0.459-0.922 0.86-1.323 0.405-0.405 0.788-0.652 1.323-0.864 0.405-0.158 1.017-0.346 2.137-0.396 1.21-0.054 1.575-0.068 4.653-0.068h0.001zM15.358 4.602c-3.127 0-3.518 0.014-4.747 0.068-1.224 0.054-2.065 0.252-2.794 0.536-0.76 0.297-1.404 0.688-2.042 1.332-0.644 0.639-1.035 1.282-1.332 2.038-0.284 0.734-0.482 1.57-0.536 2.794-0.054 1.233-0.068 1.624-0.068 4.751s0.014 3.518 0.068 4.747c0.054 1.224 0.252 2.065 0.536 2.794 0.297 0.76 0.688 1.404 1.332 2.042 0.639 0.639 1.282 1.035 2.038 1.328 0.734 0.284 1.57 0.482 2.794 0.536 1.228 0.054 1.62 0.068 4.747 0.068s3.519-0.014 4.747-0.068c1.224-0.054 2.065-0.252 2.794-0.536 0.756-0.292 1.4-0.688 2.038-1.328s1.035-1.282 1.328-2.038c0.284-0.734 0.482-1.57 0.536-2.794 0.054-1.228 0.068-1.62 0.068-4.747s-0.014-3.518-0.068-4.747c-0.054-1.224-0.252-2.065-0.536-2.794-0.284-0.765-0.675-1.408-1.318-2.047-0.639-0.639-1.282-1.035-2.038-1.327-0.734-0.284-1.57-0.482-2.794-0.536-1.233-0.058-1.624-0.072-4.751-0.072l-0.001 0.001z\\\"></path>\\n      <path d=\\\"M15.358 10.204c-3.266 0-5.917 2.65-5.917 5.917s2.65 5.917 5.917 5.917c3.267 0 5.917-2.65 5.917-5.917s-2.65-5.917-5.917-5.917zM15.358 19.958c-2.119 0-3.838-1.718-3.838-3.838s1.718-3.838 3.838-3.838c2.119 0 3.838 1.718 3.838 3.838s-1.718 3.838-3.838 3.838z\\\"></path>\\n      <path d=\\\"M22.889 9.97c0 0.763-0.618 1.381-1.381 1.381s-1.381-0.618-1.381-1.381 0.619-1.381 1.381-1.381c0.763 0 1.381 0.618 1.381 1.381z\\\"></path>\\n    </symbol>\\n\\n    <symbol id=\\\"icon-icon_left_button_feedback_sec\\\" viewBox=\\\"0 0 30 32\\\">\\n      <path d=\\\"M18.575 27.020l-9.158-9.158h20.45v-4.267h-20.45l9.158-9.158-3.017-3.017-14.308 14.308 14.308 14.308 3.017-3.017z\\\"></path>\\n    </symbol>\\n\\n    <symbol id=\\\"icon-icon_menu_mobile_navbar\\\" viewBox=\\\"0 0 32 32\\\">\\n      <path d=\\\"M5.333 8h21.333v2.667h-21.333v-2.667zM10.667 14.667h16v2.667h-16v-2.667zM17.333 21.333h9.333v2.667h-9.333v-2.667z\\\"></path>\\n    </symbol>\\n\\n    <symbol id=\\\"icon-icon_play_artists_sections\\\" viewBox=\\\"0 0 17 32\\\">\\n      <path d=\\\"M0 31.878l17.067-14.933-17.067-14.933v29.867z\\\"></path>\\n    </symbol>\\n\\n    <symbol id=\\\"icon-icon_play_hero_section\\\" viewBox=\\\"0 0 24 32\\\">\\n      <path d=\\\"M0.858 31.818c0.259 0.135 0.549 0.196 0.841 0.178s0.572-0.115 0.812-0.281l20.8-14.4c0.212-0.147 0.386-0.344 0.506-0.573s0.183-0.484 0.183-0.742c0-0.259-0.063-0.513-0.183-0.742s-0.294-0.426-0.506-0.573l-20.8-14.4c-0.24-0.167-0.521-0.266-0.813-0.284s-0.583 0.043-0.842 0.179c-0.259 0.136-0.476 0.34-0.627 0.59s-0.23 0.537-0.229 0.83v28.8c-0 0.292 0.080 0.579 0.231 0.828s0.368 0.454 0.627 0.589zM3.2 4.654l16.389 11.346-16.389 11.346v-22.691z\\\"></path>\\n    </symbol>\\n\\n    <symbol id=\\\"icon-icon_right_button_feedback_sec\\\" viewBox=\\\"0 0 31 32\\\">\\n      <path d=\\\"M14.455 22.612l1.81 1.81 8.585-8.585-8.585-8.585-1.81 1.81 5.495 5.495h-12.27v2.56h12.27l-5.495 5.495z\\\"></path>\\n    </symbol>\\n\\n    <symbol id=\\\"icon-icon_youtube_footer\\\" viewBox=\\\"0 0 31 32\\\">\\n      <path d=\\\"M27.639 9.981c-0.146-0.541-0.431-1.034-0.826-1.431s-0.888-0.683-1.429-0.83c-2.004-0.55-10.024-0.559-10.024-0.559s-8.018-0.009-10.024 0.517c-0.54 0.154-1.032 0.444-1.428 0.842s-0.683 0.892-0.833 1.433c-0.529 2.004-0.534 6.162-0.534 6.162s-0.005 4.178 0.52 6.162c0.294 1.097 1.158 1.964 2.257 2.259 2.025 0.55 10.022 0.559 10.022 0.559s8.019 0.009 10.024-0.516c0.541-0.147 1.034-0.432 1.431-0.828s0.683-0.888 0.831-1.429c0.53-2.003 0.534-6.159 0.534-6.159s0.026-4.179-0.521-6.184zM12.795 19.968l0.006-7.68 6.665 3.846-6.671 3.834z\\\"></path>\\n    </symbol>\\n\\n    <symbol id=\\\"icon-logo\\\" viewBox=\\\"0 0 110 32\\\">\\n      <path d=\\\"M16.403 0.142c0.434-0.050 0.936 0.047 1.354 0.174 0.945 0.288 1.714 0.905 2.169 1.785 0.474 0.902 0.564 1.957 0.252 2.927-0.397 1.196-1.247 1.797-2.309 2.35l0.012 3.489c0.759 0.231 1.498 0.495 2.187 0.894 1.584 0.919 2.669 2.467 3.123 4.23 0.48 1.848 0.207 3.812-0.76 5.459-0.887 1.493-2.3 2.597-3.993 3.019-2.211 0.552-4.086-0.047-5.986-1.176-0.84 0.898-1.67 1.807-2.489 2.725 0.366 0.864 0.487 1.77 0.244 2.687-0.237 0.897-0.866 1.666-1.67 2.121-0.901 0.51-1.928 0.603-2.916 0.321-0.981-0.281-1.805-0.889-2.284-1.801-0.472-0.897-0.511-1.949-0.206-2.907 0.348-1.089 1.057-1.759 2.053-2.257 1.072-0.419 1.958-0.281 3.005 0.096 0.872-0.917 1.693-1.88 2.574-2.789-0.968-1.898-1.281-3.515-0.778-5.606-1.096-0.511-2.153-1.108-3.249-1.62-0.586 0.61-1.301 1.028-2.142 1.169-1.003 0.169-2.061-0.105-2.885-0.694-0.817-0.592-1.354-1.493-1.486-2.493-0.135-0.97 0.12-2.038 0.741-2.803 0.64-0.789 1.634-1.265 2.637-1.37 0.986-0.096 1.97 0.205 2.734 0.836 0.976 0.818 1.258 1.834 1.376 3.045 1.039 0.637 2.229 1.129 3.312 1.698 1.409-1.665 2.439-2.191 4.492-2.824l0.002-3.463c-0.368-0.147-0.735-0.326-1.055-0.561-0.81-0.599-1.341-1.502-1.473-2.501-0.121-0.994 0.159-1.996 0.779-2.782 0.678-0.851 1.585-1.238 2.636-1.377zM20.931 17.367c-0.209-2.382-2.302-4.148-4.686-3.955-2.404 0.196-4.189 2.311-3.979 4.714 0.211 2.404 2.337 4.176 4.739 3.951 2.381-0.224 4.134-2.328 3.925-4.71z\\\"></path>\\n      <path d=\\\"M102.107 11.958c0.708 0.001 1.415 0.011 2.124 0.029l-0.004 3.742c0.546-0.424 1.14-0.739 1.831-0.843 0.933-0.141 1.884 0.1 2.637 0.669 0.908 0.687 1.384 1.844 1.523 2.949 0.175 1.401-0.154 2.749-1.019 3.866-0.574 0.554-1.263 0.941-2.057 1.072-1.165 0.191-2.088-0.216-2.998-0.894l-0.004 0.817-2.032-0.003-0.001-11.404zM105.747 16.862c-0.632 0.21-1.070 0.51-1.378 1.118-0.342 0.675-0.365 1.508-0.099 2.211 0.204 0.538 0.585 1.004 1.118 1.244 0.385 0.175 0.749 0.18 1.164 0.155 0.66-0.249 1.103-0.569 1.402-1.229 0.311-0.689 0.307-1.52 0.011-2.214-0.228-0.533-0.632-0.963-1.177-1.174-0.341-0.131-0.682-0.149-1.042-0.111z\\\"></path>\\n      <path d=\\\"M41.272 11.936c1.246 3.84 2.84 7.575 4.055 11.425l-2.296 0.003c-0.269-0.822-0.529-1.752-0.939-2.512-0.268-0.115-0.586-0.076-0.873-0.073-1.108 0.011-2.215 0.007-3.323-0.012-0.348 0.849-0.628 1.722-0.903 2.596l-2.339-0.002c1.221-3.833 2.677-7.617 3.996-11.42 0.872 0.019 1.749-0.001 2.622-0.005zM39.964 14.775c-0.483 1.374-0.934 2.768-1.464 4.125l1.681-0.001 1.306-0.015c-0.184-0.518-1.25-3.88-1.524-4.109z\\\"></path>\\n      <path d=\\\"M89.685 11.961l2.196 0.013c-0.030 2.647-0.007 5.298-0.007 7.945-0.001 1.093 0.11 2.287-0.013 3.365l-0.121 0.083h-2.058l-0.004-4.889c-1.645-0.046-3.303-0.005-4.949-0.003l0.001 4.894-2.209-0.004 0.009-11.401 2.2 0.005 0.002 4.662h4.957l-0.003-4.67z\\\"></path>\\n      <path d=\\\"M93.202 15.121c0.729 0.021 1.46 0.013 2.188 0.017-0.009 1.165-0.193 4.384 0.089 5.347 0.111 0.38 0.333 0.728 0.693 0.913 0.541 0.278 1.090 0.117 1.628-0.072 0.238-0.266 0.443-0.515 0.561-0.859 0.386-1.123 0.18-4.006 0.174-5.343 0.694 0.019 1.391 0.004 2.085 0-0.016 0.8-0.003 1.603-0.004 2.404l0.011 5.834c-0.683 0.010-1.365 0.005-2.047-0.015l-0.063-0.074c0.010-0.173 0.013-0.314-0.018-0.487-0.639 0.277-1.209 0.697-1.936 0.712-0.843 0.017-1.758-0.245-2.363-0.852-0.459-0.459-0.739-1.076-0.883-1.703-0.31-1.348-0.127-4.332-0.113-5.824z\\\"></path>\\n      <path d=\\\"M63.686 14.891c1.089-0.085 2.224-0.008 3.104 0.725 0.617 0.514 0.816 1.13 0.883 1.897l-1.968-0.002c-0.113-0.21-0.226-0.454-0.404-0.619-0.284-0.262-0.694-0.398-1.078-0.377-0.298 0.016-0.679 0.135-0.865 0.387-0.113 0.154-0.175 0.311-0.132 0.503 0.224 1.009 2.79 0.884 3.607 1.419 0.52 0.341 0.919 0.951 1.034 1.56 0.115 0.623-0.033 1.266-0.409 1.775-0.627 0.865-1.593 1.175-2.599 1.329-0.931 0.056-2.011-0.194-2.756-0.761-0.699-0.532-0.95-1.185-1.045-2.025 0.663 0.001 1.326-0.005 1.989-0.018 0.039 0.125 0.082 0.245 0.145 0.361 0.289 0.533 0.865 0.651 1.4 0.808 0.353-0.081 0.831-0.172 1.082-0.457 0.151-0.172 0.204-0.471 0.14-0.691-0.245-0.843-2.703-0.943-3.556-1.468-0.505-0.311-0.876-0.764-1.011-1.349-0.121-0.53-0.075-1.125 0.223-1.59 0.538-0.84 1.28-1.185 2.216-1.408z\\\"></path>\\n      <path d=\\\"M76.93 14.889c0.62-0.050 1.227-0.047 1.831 0.117 0.697 0.189 1.438 0.578 1.79 1.239 0.169 0.317 0.3 0.886 0.186 1.237-0.565 0.122-1.255 0.040-1.835 0.033-0.085-0.287-0.158-0.509-0.391-0.707-0.295-0.247-0.679-0.364-1.062-0.322-0.3 0.031-0.685 0.178-0.852 0.447-0.1 0.16-0.141 0.325-0.078 0.509 0.362 1.068 2.535 0.814 3.38 1.297 0.538 0.308 0.988 0.848 1.141 1.454 0.164 0.65 0.056 1.372-0.319 1.931-0.56 0.835-1.449 1.149-2.388 1.331-0.922 0.114-1.989-0.082-2.759-0.613-0.791-0.545-1.028-1.229-1.206-2.123l1.973-0.015c0.12 0.302 0.229 0.537 0.485 0.746 0.341 0.279 0.745 0.406 1.184 0.347 0.341-0.045 0.676-0.202 0.88-0.487 0.133-0.187 0.2-0.414 0.136-0.642-0.247-0.878-2.426-0.823-3.29-1.288-0.584-0.315-1.046-0.838-1.231-1.481-0.157-0.544-0.091-1.11 0.196-1.599 0.477-0.81 1.353-1.206 2.231-1.409z\\\"></path>\\n      <path d=\\\"M52.641 12.857c0.655 0.023 1.315 0.009 1.97 0.011-0.007 0.74 0.004 1.48 0.032 2.219l1.944 0.001-0.004 1.694-1.851-0.001c0.001 1.066-0.243 3.817 0.246 4.641 0.382 0.301 1.145 0.189 1.609 0.183l-0.007 1.404c0.004 0.145 0.004 0.218-0.070 0.344-0.259 0.124-0.524 0.152-0.81 0.154-0.752 0.007-1.791-0.129-2.331-0.693-1.086-1.131-0.739-4.457-0.734-6.035l-1.254 0.002 0.004-1.698 1.249 0.008 0.007-2.236z\\\"></path>\\n      <path d=\\\"M69.54 12.848l1.934 0.011c-0.015 0.741 0.016 1.485 0.030 2.226l1.976-0.004-0.003 1.702-1.859-0.001c0.023 1.015-0.226 3.85 0.234 4.617 0.494 0.295 1.113 0.216 1.669 0.215-0.007 0.489 0.003 0.979 0.005 1.469l-0.023 0.186c-0.191 0.202-0.486 0.194-0.747 0.2-0.794 0.019-1.891-0.107-2.467-0.71-1.075-1.126-0.74-4.405-0.731-5.978l-1.323 0.001c-0.017-0.564-0.010-1.129-0.015-1.692l1.318 0.007 0.004-2.249z\\\"></path>\\n      <path d=\\\"M27.821 11.582c0.102-0.005 0.2-0.007 0.302 0.008 0.316 0.046 0.628 0.198 0.802 0.476 0.185 0.294 0.21 0.687 0.235 1.028 0.125 1.688 0.032 3.444 0.032 5.138-0 1.384 0.153 3.26-0.104 4.592-0.081 0.419-0.359 0.619-0.691 0.846-0.127 0.015-0.259 0.033-0.387 0.026-0.285-0.016-0.556-0.143-0.74-0.361-0.183-0.216-0.177-0.648-0.193-0.919-0.116-1.942-0.018-3.946-0.016-5.893 0.001-1.107-0.151-3.225 0.082-4.213 0.083-0.353 0.402-0.539 0.68-0.727z\\\"></path>\\n      <path d=\\\"M50.243 15.058l0.278-0.003c0.329 0.368 0.166 1.535 0.155 2.018-0.696-0.007-1.354-0.035-1.899 0.471-1.023 0.949-0.678 4.425-0.688 5.82-0.548-0.005-1.617 0.195-2.035-0.154l-0.022-0.346c0.010-2.586-0.055-5.169-0.038-7.754 0.664 0.021 1.33 0.007 1.994 0.003l-0.023 1.142c0.123-0.177 0.246-0.366 0.389-0.527 0.503-0.568 1.186-0.619 1.891-0.669z\\\"></path>\\n      <path d=\\\"M57.795 15.092l2.086 0.001 0.005 8.275-2.11-0.003 0.019-8.273z\\\"></path>\\n      <path d=\\\"M24.906 14.293c0.343 0.063 0.645 0.192 0.845 0.489 0.308 0.459 0.316 4.955 0.162 5.596-0.084 0.351-0.388 0.522-0.675 0.691-0.33-0.020-0.763-0.049-0.983-0.335-0.327-0.425-0.3-5.203-0.114-5.802 0.108-0.348 0.466-0.495 0.765-0.639z\\\"></path>\\n      <path d=\\\"M58.701 11.683c0.62-0.073 1.185 0.36 1.276 0.978s-0.325 1.195-0.939 1.304c-0.414 0.073-0.835-0.084-1.099-0.411s-0.33-0.771-0.171-1.161c0.159-0.389 0.516-0.661 0.933-0.71z\\\"></path>\\n    </symbol>\\n\\n    <symbol id=\\\"icon-logo_footer\\\" viewBox=\\\"0 0 110 32\\\">\\n      <path d=\\\"M16.403 0.241c0.434-0.050 0.936 0.047 1.354 0.174 0.945 0.288 1.714 0.904 2.169 1.784 0.474 0.902 0.564 1.958 0.252 2.927-0.397 1.196-1.248 1.798-2.311 2.351l0.012 3.489c0.759 0.231 1.498 0.494 2.187 0.893 1.585 0.918 2.668 2.467 3.123 4.23 0.48 1.848 0.208 3.812-0.759 5.46-0.887 1.493-2.3 2.596-3.993 3.018-2.211 0.553-4.087-0.046-5.987-1.175-0.84 0.898-1.67 1.806-2.489 2.724 0.366 0.864 0.488 1.771 0.245 2.689-0.237 0.897-0.866 1.666-1.67 2.121-0.901 0.51-1.928 0.602-2.916 0.32-0.981-0.281-1.805-0.888-2.284-1.8-0.472-0.897-0.511-1.949-0.206-2.907 0.348-1.089 1.056-1.759 2.052-2.257 1.072-0.419 1.959-0.281 3.006 0.096 0.872-0.917 1.692-1.881 2.573-2.79-0.968-1.898-1.281-3.515-0.778-5.606-1.095-0.511-2.152-1.107-3.248-1.619-0.586 0.61-1.302 1.028-2.143 1.169-1.003 0.169-2.060-0.105-2.884-0.694-0.817-0.592-1.354-1.494-1.486-2.494-0.135-0.969 0.12-2.037 0.741-2.802 0.64-0.789 1.634-1.266 2.637-1.371 0.986-0.096 1.969 0.205 2.733 0.836 0.976 0.818 1.259 1.835 1.377 3.046 1.039 0.637 2.229 1.128 3.312 1.697 1.409-1.665 2.439-2.191 4.492-2.824l0.001-3.463c-0.367-0.147-0.734-0.326-1.054-0.561-0.81-0.599-1.343-1.502-1.474-2.501-0.121-0.994 0.16-1.995 0.78-2.781 0.678-0.851 1.585-1.238 2.636-1.377zM20.931 17.465c-0.209-2.382-2.302-4.149-4.685-3.955-2.404 0.196-4.19 2.311-3.979 4.714s2.337 4.176 4.739 3.951c2.38-0.224 4.134-2.328 3.925-4.71z\\\"></path>\\n      <path d=\\\"M102.108 12.055c0.708 0.001 1.416 0.010 2.124 0.028l-0.004 3.743c0.545-0.424 1.14-0.74 1.83-0.844 0.933-0.141 1.885 0.101 2.637 0.67 0.908 0.687 1.385 1.843 1.523 2.947 0.175 1.402-0.154 2.75-1.019 3.867-0.574 0.554-1.262 0.941-2.056 1.072-1.165 0.191-2.089-0.216-2.998-0.894l-0.004 0.818-2.033-0.004-0.001-11.403zM105.748 16.96c-0.631 0.21-1.070 0.509-1.378 1.117-0.342 0.675-0.365 1.509-0.098 2.212 0.203 0.538 0.585 1.004 1.117 1.244 0.386 0.175 0.749 0.18 1.165 0.155 0.659-0.249 1.102-0.569 1.401-1.229 0.312-0.689 0.307-1.52 0.011-2.214-0.227-0.533-0.632-0.963-1.177-1.174-0.341-0.131-0.682-0.149-1.042-0.111z\\\"></path>\\n      <path d=\\\"M41.271 12.034c1.246 3.84 2.84 7.576 4.056 11.426l-2.296 0.002c-0.269-0.822-0.529-1.752-0.939-2.512-0.268-0.115-0.586-0.076-0.873-0.073-1.108 0.011-2.215 0.008-3.323-0.011-0.348 0.848-0.628 1.721-0.903 2.595l-2.339-0.002c1.221-3.833 2.677-7.617 3.996-11.42 0.872 0.019 1.749-0.002 2.622-0.005zM39.962 14.872c-0.483 1.374-0.934 2.768-1.464 4.125l1.681-0.001 1.307-0.014c-0.184-0.517-1.25-3.881-1.524-4.11z\\\"></path>\\n      <path d=\\\"M89.685 12.058l2.196 0.013c-0.030 2.647-0.007 5.298-0.007 7.945-0.001 1.093 0.11 2.287-0.012 3.365l-0.121 0.083h-2.058l-0.004-4.889c-1.645-0.046-3.303-0.005-4.949-0.003l0.001 4.894-2.209-0.004 0.009-11.401 2.201 0.005 0.001 4.661h4.957l-0.003-4.67z\\\"></path>\\n      <path d=\\\"M93.202 15.219c0.729 0.021 1.459 0.013 2.188 0.017-0.009 1.165-0.193 4.384 0.089 5.347 0.111 0.38 0.333 0.728 0.693 0.913 0.541 0.278 1.090 0.117 1.628-0.072 0.238-0.266 0.443-0.515 0.561-0.859 0.386-1.123 0.18-4.006 0.174-5.343 0.694 0.019 1.391 0.004 2.085 0.001-0.016 0.8-0.003 1.603-0.004 2.404l0.011 5.834c-0.683 0.010-1.365 0.005-2.047-0.015l-0.063-0.074c0.010-0.173 0.012-0.314-0.018-0.487-0.639 0.277-1.209 0.697-1.936 0.712-0.843 0.017-1.758-0.245-2.364-0.851-0.459-0.459-0.739-1.077-0.883-1.703-0.31-1.348-0.127-4.332-0.113-5.824z\\\"></path>\\n      <path d=\\\"M63.686 14.989c1.089-0.085 2.224-0.008 3.104 0.725 0.617 0.514 0.816 1.13 0.883 1.897l-1.968-0.002c-0.113-0.21-0.227-0.455-0.404-0.619-0.284-0.262-0.694-0.398-1.078-0.377-0.298 0.016-0.679 0.135-0.865 0.387-0.113 0.154-0.175 0.311-0.132 0.503 0.224 1.009 2.79 0.884 3.607 1.419 0.52 0.341 0.919 0.951 1.034 1.56 0.115 0.623-0.033 1.266-0.408 1.775-0.627 0.865-1.593 1.175-2.599 1.329-0.931 0.056-2.010-0.194-2.756-0.761-0.699-0.532-0.95-1.185-1.045-2.025 0.663 0.001 1.326-0.005 1.989-0.018 0.039 0.125 0.082 0.246 0.145 0.361 0.289 0.533 0.865 0.651 1.4 0.808 0.353-0.081 0.831-0.172 1.082-0.457 0.151-0.172 0.204-0.471 0.14-0.691-0.245-0.843-2.703-0.943-3.556-1.467-0.505-0.311-0.876-0.764-1.011-1.349-0.121-0.53-0.075-1.125 0.223-1.59 0.538-0.84 1.28-1.185 2.216-1.408z\\\"></path>\\n      <path d=\\\"M76.929 14.987c0.62-0.050 1.227-0.047 1.831 0.117 0.697 0.189 1.438 0.578 1.79 1.238 0.17 0.317 0.3 0.886 0.186 1.237-0.565 0.122-1.255 0.039-1.835 0.033-0.086-0.287-0.158-0.509-0.391-0.707-0.295-0.247-0.679-0.364-1.062-0.322-0.3 0.031-0.685 0.178-0.852 0.447-0.1 0.16-0.141 0.324-0.078 0.509 0.363 1.068 2.535 0.814 3.38 1.297 0.538 0.308 0.988 0.849 1.141 1.454 0.164 0.65 0.056 1.372-0.319 1.931-0.56 0.835-1.449 1.149-2.388 1.331-0.921 0.114-1.989-0.082-2.759-0.613-0.791-0.545-1.028-1.229-1.206-2.123l1.973-0.015c0.12 0.302 0.229 0.537 0.485 0.746 0.341 0.279 0.745 0.406 1.184 0.347 0.341-0.045 0.676-0.202 0.88-0.487 0.133-0.187 0.2-0.414 0.136-0.642-0.247-0.878-2.426-0.823-3.29-1.288-0.584-0.315-1.046-0.838-1.231-1.481-0.157-0.544-0.091-1.11 0.196-1.599 0.477-0.81 1.353-1.206 2.231-1.408z\\\"></path>\\n      <path d=\\\"M52.64 12.955c0.655 0.023 1.315 0.009 1.97 0.011-0.007 0.74 0.004 1.48 0.032 2.219l1.944 0.001-0.004 1.694-1.851-0.001c0.001 1.066-0.243 3.817 0.246 4.641 0.382 0.301 1.145 0.189 1.609 0.183l-0.007 1.404c0.004 0.145 0.004 0.218-0.070 0.344-0.259 0.124-0.524 0.152-0.81 0.154-0.752 0.007-1.791-0.129-2.331-0.693-1.086-1.131-0.739-4.457-0.734-6.035l-1.254 0.002 0.004-1.698 1.249 0.008 0.007-2.236z\\\"></path>\\n      <path d=\\\"M69.539 12.946l1.934 0.011c-0.015 0.741 0.016 1.485 0.030 2.226l1.975-0.004-0.003 1.702-1.859-0.001c0.023 1.015-0.226 3.85 0.234 4.617 0.494 0.295 1.113 0.216 1.668 0.215-0.007 0.489 0.003 0.979 0.005 1.469l-0.023 0.186c-0.191 0.202-0.486 0.194-0.747 0.2-0.794 0.019-1.891-0.107-2.467-0.71-1.075-1.125-0.74-4.405-0.731-5.978l-1.323 0.001c-0.017-0.563-0.010-1.129-0.015-1.692l1.318 0.007 0.004-2.249z\\\"></path>\\n      <path d=\\\"M27.82 11.679c0.102-0.005 0.2-0.007 0.302 0.008 0.316 0.046 0.628 0.198 0.802 0.476 0.185 0.294 0.21 0.687 0.235 1.028 0.125 1.688 0.032 3.444 0.032 5.138-0 1.384 0.153 3.26-0.104 4.592-0.081 0.419-0.358 0.619-0.691 0.846-0.127 0.015-0.259 0.033-0.387 0.026-0.285-0.016-0.556-0.143-0.74-0.361-0.183-0.216-0.177-0.648-0.193-0.919-0.116-1.942-0.018-3.946-0.016-5.893 0.001-1.107-0.151-3.225 0.082-4.213 0.083-0.353 0.402-0.539 0.68-0.727z\\\"></path>\\n      <path d=\\\"M50.244 15.156l0.278-0.003c0.329 0.368 0.166 1.535 0.155 2.018-0.696-0.007-1.354-0.035-1.899 0.471-1.023 0.949-0.678 4.425-0.688 5.82-0.548-0.005-1.617 0.195-2.035-0.154l-0.022-0.346c0.010-2.586-0.055-5.169-0.038-7.754 0.664 0.021 1.33 0.007 1.994 0.003l-0.023 1.142c0.123-0.177 0.245-0.366 0.388-0.527 0.503-0.568 1.186-0.619 1.891-0.669z\\\"></path>\\n      <path d=\\\"M57.795 15.19l2.086 0.001 0.005 8.275-2.11-0.003 0.019-8.273z\\\"></path>\\n      <path d=\\\"M24.906 14.391c0.343 0.063 0.645 0.192 0.845 0.489 0.308 0.459 0.316 4.955 0.162 5.596-0.084 0.351-0.388 0.522-0.675 0.691-0.33-0.020-0.763-0.049-0.983-0.335-0.327-0.425-0.3-5.203-0.114-5.802 0.108-0.348 0.466-0.495 0.765-0.64z\\\"></path>\\n      <path d=\\\"M58.7 11.781c0.62-0.073 1.185 0.36 1.276 0.978s-0.325 1.195-0.939 1.304c-0.414 0.073-0.835-0.084-1.099-0.411s-0.33-0.771-0.171-1.161c0.159-0.389 0.516-0.661 0.933-0.71z\\\"></path>\\n    </symbol>\\n\\n    <symbol id=\\\"icon-logo_icon_about_us\\\" viewBox=\\\"0 0 32 32\\\">\\n      <path d=\\\"M17.285 3.195c0.38-0.041 0.82 0.039 1.185 0.142 0.827 0.235 1.499 0.738 1.898 1.456 0.415 0.736 0.494 1.596 0.221 2.387-0.347 0.976-1.092 1.466-2.022 1.917l0.010 2.845c0.665 0.189 1.311 0.403 1.915 0.729 1.387 0.749 2.336 2.012 2.733 3.449 0.42 1.507 0.181 3.109-0.665 4.452-0.776 1.218-2.014 2.117-3.495 2.461-1.935 0.451-3.576-0.037-5.24-0.959-0.735 0.732-1.462 1.473-2.179 2.222 0.32 0.704 0.427 1.444 0.214 2.192-0.208 0.732-0.758 1.359-1.462 1.73-0.789 0.416-1.688 0.492-2.553 0.261-0.858-0.229-1.58-0.724-1.999-1.469-0.413-0.732-0.448-1.589-0.18-2.371 0.305-0.888 0.925-1.435 1.797-1.841 0.939-0.342 1.715-0.23 2.631 0.078 0.763-0.748 1.481-1.534 2.252-2.275-0.847-1.548-1.121-2.866-0.681-4.572-0.959-0.417-1.884-0.903-2.843-1.321-0.513 0.497-1.139 0.838-1.875 0.954-0.878 0.138-1.803-0.085-2.525-0.566-0.715-0.483-1.185-1.218-1.301-2.033-0.119-0.791 0.105-1.662 0.648-2.286 0.56-0.644 1.43-1.032 2.309-1.117 0.863-0.078 1.724 0.167 2.392 0.681 0.855 0.667 1.101 1.496 1.205 2.484 0.91 0.52 1.951 0.92 2.899 1.384 1.233-1.358 2.134-1.787 3.931-2.303l0.002-2.824c-0.322-0.12-0.643-0.266-0.923-0.458-0.709-0.489-1.174-1.225-1.289-2.040-0.106-0.811 0.139-1.628 0.682-2.269 0.594-0.694 1.387-1.010 2.307-1.123zM21.246 17.242c-0.183-1.943-2.014-3.383-4.1-3.225-2.105 0.159-3.668 1.885-3.483 3.844s2.046 3.406 4.149 3.221c2.083-0.183 3.618-1.898 3.435-3.841z\\\"></path>\\n      <path d=\\\"M27.276 12.524c0.089-0.004 0.175-0.005 0.264 0.007 0.277 0.037 0.549 0.162 0.702 0.388 0.162 0.24 0.184 0.56 0.206 0.838 0.11 1.377 0.028 2.809 0.028 4.19-0 1.128 0.134 2.658-0.091 3.745-0.071 0.341-0.314 0.505-0.605 0.69-0.111 0.013-0.227 0.027-0.339 0.021-0.25-0.013-0.486-0.117-0.648-0.294-0.16-0.176-0.155-0.529-0.169-0.749-0.102-1.584-0.016-3.218-0.014-4.806 0.001-0.903-0.132-2.63 0.071-3.436 0.073-0.288 0.352-0.439 0.595-0.593z\\\"></path>\\n      <path d=\\\"M24.726 14.736c0.3 0.051 0.565 0.156 0.74 0.399 0.269 0.374 0.277 4.041 0.142 4.564-0.074 0.286-0.339 0.426-0.591 0.563-0.288-0.016-0.668-0.040-0.86-0.273-0.287-0.346-0.263-4.243-0.1-4.732 0.095-0.284 0.408-0.404 0.67-0.522z\\\"></path>\\n    </symbol>\\n  </defs>\\n</svg>\\n\"","// src/js/artists/features/modal.js\nimport { lockScroll, unlockScroll } from \"../lib/scroll-lock.js\";\nimport { UISound } from \"../lib/sound.js\";\nimport { fetchArtist, fetchArtistAlbums } from \"./api.js\";\nimport { createMiniPlayer } from \"./player.js\";\nimport { openZoom } from \"./zoom.js\";\nimport { getPrefetched } from \"./prefetch.js\";\n\n// === SPRITE: –∏–Ω–ª–∞–π–Ω, –∫–∞–∫ –≤ grid.js (id-only, –±–µ–∑ –ø—É—Ç–µ–π) ===\nimport SPRITE_RAW from \"../../../img/sprite.svg?raw\";\nconst SPRITE_CONTAINER_ID = \"GLOBAL_SVG_SPRITE\";\nfunction ensureSpriteMounted(doc = document) {\n  if (doc.getElementById(SPRITE_CONTAINER_ID)) return;\n  const wrap = doc.createElement(\"div\");\n  wrap.id = SPRITE_CONTAINER_ID;\n  wrap.setAttribute(\"aria-hidden\", \"true\");\n  wrap.style.position = \"absolute\";\n  wrap.style.width = \"0\";\n  wrap.style.height = \"0\";\n  wrap.style.overflow = \"hidden\";\n  wrap.innerHTML = SPRITE_RAW;\n  doc.body.prepend(wrap);\n}\nconst icon = (id, cls = \"ico\") =>\n  `<svg class=\"${cls}\" aria-hidden=\"true\"><use href=\"#${id}\" xlink:href=\"#${id}\"></use></svg>`;\n\n// –ü–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä —Ñ–æ—Ç–æ –±–µ–∑ —Å–µ—Ç–µ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ ‚Üí –Ω–∏–∫–∞–∫–∏—Ö 404 –≤ –∫–æ–Ω—Å–æ–ª–∏\nconst FALLBACK_IMG =\n  \"data:image/svg+xml;utf8,\" +\n  encodeURIComponent(\n    `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"960\" height=\"540\">\n      <rect width=\"100%\" height=\"100%\" fill=\"#0b0b0b\"/>\n      <text x=\"50%\" y=\"50%\" fill=\"#888\" font-family=\"IBM Plex Sans,Arial,sans-serif\"\n            font-size=\"28\" text-anchor=\"middle\" dominant-baseline=\"middle\">No image</text>\n    </svg>`\n  );\n\n/* ---------- ensure modal shell (–µ—Å–ª–∏ partial –Ω–µ –≤—Å—Ç–∞–≤–ª–µ–Ω) ---------- */\nfunction ensureModalShell(doc = document) {\n  let modal = doc.querySelector(\"#artist-modal\");\n  if (modal) return modal;\n\n  modal = doc.createElement(\"div\");\n  modal.id = \"artist-modal\";\n  modal.className = \"amodal\";\n  modal.setAttribute(\"hidden\", \"\");\n  modal.innerHTML = `\n    <div class=\"amodal__backdrop\"></div>\n    <div class=\"amodal__dialog\" role=\"dialog\" aria-modal=\"true\" aria-label=\"Artist details\">\n      <button id=\"am-close\" class=\"amodal__close\" type=\"button\" aria-label=\"Close\">√ó</button>\n      <div id=\"am-body\" class=\"amodal__body\">\n        <div class=\"amodal__loader loader\"></div>\n      </div>\n    </div>`;\n  doc.body.appendChild(modal);\n  return modal;\n}\n\n/* ----------------- helpers ----------------- */\nfunction fmtTime(msLike) {\n  const ms = Number(msLike);\n  if (!Number.isFinite(ms)) return \"‚Äî\";\n  const total = Math.round(ms / 1000);\n  const m = Math.floor(total / 60);\n  const s = String(total % 60).padStart(2, \"0\");\n  return `${m}:${s}`;\n}\nfunction years(d = {}) {\n  const s = d.formedYear || d.intFormedYear || d.yearStart;\n  const e = d.endedYear || d.intDisbandedYear || d.intDiedYear || d.yearEnd;\n  if (s && e) return `${s}‚Äì${e}`;\n  if (s) return `${s}‚Äìpresent`;\n  return \"information missing\";\n}\nfunction isDirectYouTubeVideo(href = \"\") {\n  if (!href) return false;\n  try {\n    const u = new URL(href, location.href);\n    if (/youtu\\.be$/.test(u.hostname)) return !!u.pathname.slice(1);\n    if (/[?&]v=/.test(u.search)) return true;\n    return /\\/(embed|shorts|v)\\//.test(u.pathname);\n  } catch {\n    return false;\n  }\n}\nfunction buildTrackLink(t = {}, artistName = \"\") {\n  const direct =\n    t.youtube ||\n    t.youtube_url ||\n    t.url ||\n    t.movie ||\n    t.strMusicVid ||\n    \"\";\n  if (direct) return direct;\n\n  // –§–æ–ª–±–µ–∫: –µ—Å–ª–∏ —É —Ç—Ä–µ–∫–∞ –Ω–µ—Ç –ø—Ä—è–º–æ–π —Å—Å—ã–ª–∫–∏, —Ñ–æ—Ä–º–∏—Ä—É–µ–º YouTube‚Äë–ø–æ–∏—Å–∫\n  const title = t.title || t.strTrack || t.name || \"\";\n  const q = [artistName, title].map((x) => String(x || \"\").trim()).filter(Boolean).join(\" \");\n  if (!q) return \"\";\n  return `https://www.youtube.com/results?search_query=${encodeURIComponent(q)}`;\n}\n\nfunction trackRow(t = {}, artistName = \"\") {\n  const title = t.title || t.strTrack || t.name || \"‚Äî\";\n  const dur   = fmtTime(t.duration ?? t.intDuration ?? t.time);\n  const link  = buildTrackLink(t, artistName);\n  return `\n    <li class=\"tr\">\n      <span>${title}</span>\n      <span>${dur}</span>\n      <span>${\n        link\n          ? `<a class=\"yt\" href=\"${link}\" target=\"_blank\" rel=\"noopener noreferrer\" aria-label=\"Play\">\n               ${icon(\"icon-icon_youtube_footer\", \"ico am-yt\")}\n             </a>`\n          : `<span class=\"yt-ph\"></span>`\n      }</span>\n    </li>`;\n}\nfunction dedupe(arr){const s=new Set(),r=[];for(const x of arr){if(x&&!s.has(x)){s.add(x);r.push(x)}}return r;}\nfunction isMixRadioOn(){\n  // –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä MixRadio ‚Äî –ø–æ–¥—Å—Ç—Ä–æ–π –ø–æ–¥ —Å–≤–æ–π markup –ø—Ä–∏ –∂–µ–ª–∞–Ω–∏–∏\n  return !!document.querySelector('#random-radio[aria-pressed=\"true\"], .toolbar__mixradio.is-active, body.mixradio-on');\n}\n\n/* ----------------- main ----------------- */\nexport function createArtistModal(rootEl = document) {\n  // —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–ø—Ä–∞–π—Ç (–∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ)\n  ensureSpriteMounted(document);\n\n  const modal =\n    (rootEl && rootEl.querySelector ? rootEl.querySelector(\"#artist-modal\") : null) ||\n    document.querySelector(\"#artist-modal\") ||\n    ensureModalShell(document);\n\n  const modalBody  = modal.querySelector(\"#am-body\");\n  const modalClose = modal.querySelector(\"#am-close\");\n  const dialog     = modal.querySelector(\".amodal__dialog\");\n\n  // –µ–¥–∏–Ω—ã–π –º–∏–Ω–∏-–ø–ª–µ–µ—Ä –¥–ª—è —Å–∞–π—Ç–∞\n  const player = createMiniPlayer();\n\n  // Scroll-to-top –≤ –¥–∏–∞–ª–æ–≥–µ\n  let scrollTopBtn = null;\n  let onDialogScroll = null;\n  let onWinResize    = null;\n\n  function placeScrollTop() {\n    try {\n      const pad = 24;\n      const r = dialog.getBoundingClientRect();\n      const right = Math.max(pad, window.innerWidth - (r.left + r.width) + pad);\n      scrollTopBtn.style.right  = `${right}px`;\n      scrollTopBtn.style.bottom = `58px`;\n    } catch {}\n  }\n  function ensureScrollTop() {\n    if (!scrollTopBtn) {\n      scrollTopBtn = document.createElement(\"button\");\n      scrollTopBtn.type = \"button\";\n      scrollTopBtn.className = \"amodal__scrolltop\";\n      scrollTopBtn.setAttribute(\"aria-label\", \"Scroll to top\");\n      scrollTopBtn.textContent = \"‚Üë\";\n      dialog.appendChild(scrollTopBtn);\n      scrollTopBtn.addEventListener(\"click\", () => {\n        try { UISound?.tap?.(); } catch {}\n        dialog.scrollTo({ top: 0, behavior: \"smooth\" });\n      });\n    }\n    if (onDialogScroll) dialog.removeEventListener(\"scroll\", onDialogScroll);\n    if (onWinResize) {\n      window.removeEventListener(\"resize\", onWinResize);\n      window.visualViewport?.removeEventListener(\"resize\", onWinResize);\n      window.removeEventListener(\"orientationchange\", onWinResize);\n    }\n    onDialogScroll = () => {\n      try {\n        scrollTopBtn.style.display = (dialog.scrollTop || 0) > 220 ? \"flex\" : \"none\";\n        placeScrollTop();\n      } catch {}\n    };\n    dialog.addEventListener(\"scroll\", onDialogScroll);\n\n    onWinResize = () => { placeScrollTop(); };\n    window.addEventListener(\"resize\", onWinResize);\n    window.visualViewport?.addEventListener(\"resize\", onWinResize);\n    window.addEventListener(\"orientationchange\", onWinResize);\n\n    placeScrollTop();\n  }\n\n  // -------- open/close --------\n  const onEsc = (e) => { if (e.key === \"Escape\") { try { UISound?.tap?.(); } catch {} close(); } };\n\n  function open() {\n    modal.removeAttribute(\"hidden\");\n    lockScroll();\n    ensureScrollTop();\n    if (scrollTopBtn) scrollTopBtn.style.display = \"none\";\n    modalBody.innerHTML = `<div class=\"amodal__loader loader\"></div>`;\n    document.addEventListener(\"keydown\", onEsc);\n  }\n\n  function close() {\n    modal.setAttribute(\"hidden\", \"\");\n    unlockScroll();\n    modalBody.innerHTML = \"\";\n    document.removeEventListener(\"keydown\", onEsc);\n\n    if (onDialogScroll) { dialog.removeEventListener(\"scroll\", onDialogScroll); onDialogScroll = null; }\n    if (onWinResize) {\n      window.removeEventListener(\"resize\", onWinResize);\n      window.visualViewport?.removeEventListener(\"resize\", onWinResize);\n      window.removeEventListener(\"orientationchange\", onWinResize);\n      onWinResize = null;\n    }\n    if (scrollTopBtn) scrollTopBtn.style.display = \"none\";\n  }\n\n  modalClose.addEventListener(\"click\", () => { try { UISound?.tap?.(); } catch {} close(); });\n  modal.addEventListener(\"click\", (e) => {\n    if (e.target.classList.contains(\"amodal__backdrop\")) {\n      try { UISound?.tap?.(); } catch {}\n      close();\n    }\n  });\n\n  // –î–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ: YouTube (–æ—á–µ—Ä–µ–¥—å) –∏ Zoom –ø–æ –∫–∞—Ä—Ç–∏–Ω–∫–µ\n  modal.addEventListener(\"click\", (e) => {\n    const a = e.target.closest(\"a.yt\");\n    if (a) {\n      const href = a.href || a.getAttribute(\"href\") || \"\";\n      // –ï—Å–ª–∏ —ç—Ç–æ –Ω–µ –ø—Ä—è–º–æ–µ YouTube‚Äë–≤–∏–¥–µ–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–∏—Å–∫–∞) ‚Äî\n      // –¥–∞—ë–º –±—Ä–∞—É–∑–µ—Ä—É –æ—Ç–∫—Ä—ã—Ç—å —Å—Å—ã–ª–∫—É –∫–∞–∫ –æ–±—ã—á–Ω–æ –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ.\n      if (!isDirectYouTubeVideo(href)) {\n        return;\n      }\n      e.preventDefault();\n      try { UISound?.tap?.(); } catch {}\n\n      // —Å–æ–±–∏—Ä–∞–µ–º –í–°–ï —Ç—Ä–µ–∫–∏ –≤ –º–æ–¥–∞–ª–∫–µ, –¥–µ–ª–∞–µ–º –æ—á–µ—Ä–µ–¥—å\n      const links = Array.from(modal.querySelectorAll(\"a.yt\"));\n      const hrefs = dedupe(\n        links\n          .map((x) => x.href)\n          .filter((url) => url && isDirectYouTubeVideo(url))\n      );\n      let start = hrefs.indexOf(a.href);\n      if (start < 0) start = 0;\n\n      if (!hrefs.length) { player.open(a.href); return; }\n\n      const mix = isMixRadioOn();\n      player.openQueue(hrefs, { startIndex: start, shuffle: mix, loop: mix });\n      return;\n    }\n    const zoomImg = e.target.closest(\".amodal__img\");\n    if (zoomImg) {\n      try { UISound?.tap?.(); } catch {}\n      const src =\n        zoomImg.currentSrc ||\n        zoomImg.getAttribute(\"src\") ||\n        zoomImg.getAttribute(\"data-src\") ||\n        \"\";\n      openZoom(src, zoomImg.getAttribute(\"alt\") || \"\");\n    }\n  });\n\n  // -------- render --------\n  async function render(artistId) {\n    // –ø—Ä–µ—Ñ–µ—Ç—á-–∫—ç—à (–µ—Å–ª–∏ –Ω–∞–≤–µ–ª–∏ –∫—É—Ä—Å–æ—Ä –∑–∞—Ä–∞–Ω–µ–µ)\n    const cached = getPrefetched?.(String(artistId));\n\n    const [artist, albums] = await Promise.all([\n      cached?.artist ?? fetchArtist(artistId).catch(() => null),\n      cached?.albums ?? fetchArtistAlbums(artistId).catch(() => []),\n    ]);\n\n    const d = artist || {};\n    const name    = d.name || d.strArtist || \"Unknown artist\";\n    const img     = d.image || d.strArtistThumb || FALLBACK_IMG;\n    const country = d.country || d.strCountry || \"N/A\";\n    const members = d.members || d.intMembers || \"N/A\";\n    const sex     = d.gender  || d.strGender  || \"N/A\";\n    const bio     = d.biography || d.strBiographyEN || \"\";\n    const genres  = Array.isArray(d.genres) ? d.genres :\n                    (d.genre ? [d.genre] : []);\n\n    const albumsArr = Array.isArray(albums) ? albums : [];\n    const albumsMarkup = albumsArr.map(alb => {\n      const title  = alb?.title || alb?.strAlbum || alb?.name || \"Album\";\n      const tracks = Array.isArray(alb?.tracks) ? alb.tracks :\n                     (Array.isArray(alb?.songs) ? alb.songs : []);\n      return `\n        <div class=\"am-album\">\n          <div class=\"am-album__title\">${title}</div>\n          <ul class=\"tbl\">\n            <li class=\"th\"><span>Track</span><span>Time</span><span>Link</span></li>\n            ${tracks.map(tr => trackRow(tr, name)).join(\"\")}\n          </ul>\n        </div>`;\n    }).join(\"\");\n\n    modalBody.innerHTML = `\n      <h3 class=\"amodal__title\">${name}</h3>\n\n      <div class=\"amodal__content\">\n        <img class=\"amodal__img\" src=\"${img}\" alt=\"${name}\" loading=\"lazy\"\n             onerror=\"this.onerror=null;this.src='${FALLBACK_IMG}'\">\n        <div class=\"amodal__info\">\n          <div class=\"am-meta\">\n            <div class=\"am-meta__col\">\n              <div class=\"am-meta__item\"><span class=\"lbl\">Years active</span><span class=\"val\">${years(d)}</span></div>\n              <div class=\"am-meta__item\"><span class=\"lbl\">Sex</span><span class=\"val\">${sex}</span></div>\n            </div>\n            <div class=\"am-meta__col\">\n              <div class=\"am-meta__item\"><span class=\"lbl\">Members</span><span class=\"val\">${members}</span></div>\n              <div class=\"am-meta__item\"><span class=\"lbl\">Country</span><span class=\"val\">${country}</span></div>\n            </div>\n          </div>\n\n          <div class=\"am-bio\">\n            <div class=\"lbl\">Biography</div>\n            <p>${bio || \"‚Äî\"}</p>\n          </div>\n\n          ${genres.length ? `<div class=\"am-tags\">${genres.map(g => `<span class=\"tag\">${g}</span>`).join(\"\")}</div>` : \"\"}\n        </div>\n      </div>\n\n      <h4 class=\"amodal__albums-title\">Albums</h4>\n      <div class=\"amodal__albums\">\n        ${albumsMarkup || \"<p class='muted'>No albums found for this artist.</p>\"}\n      </div>`;\n  }\n\n  // -------- public API --------\n  async function openFor(id) {\n    try { UISound?.tap?.(); } catch {}\n    open();\n    await render(id);\n  }\n\n  return { openFor, close };\n}\n","// src/js/artists/features/grid.js\n// –ì—Ä–∏–¥ –∞—Ä—Ç–∏—Å—Ç–æ–≤: —Å–∫–µ–ª–µ—Ç–æ–Ω—ã, –ø–∞–≥–∏–Ω–∞—Ü–∏—è, –ø–æ–∏—Å–∫/—Å–æ—Ä—Ç/–∂–∞–Ω—Ä—ã, –º–æ–¥–∞–ª–∫–∞, zoom, List/Grid view.\n// –ü–ª—é—Å: \"—É–º–Ω–∞—è\" –±–∏–æ–≥—Ä–∞—Ñ–∏—è (–º–∏–Ω–∏–º—É–º 3‚Äì5 —Å—Ç—Ä–æ–∫), –µ–¥–∏–Ω–∞—è –≤—ã—Å–æ—Ç–∞ –±–ª–æ–∫–æ–≤, data:-–ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä.\n\nimport { UISound } from \"../lib/sound.js\";\nimport { fetchArtists, fetchGenres } from \"./api.js\";\nimport { ArtistState } from \"./state.js\";\nimport { createArtistModal } from \"./modal.js\";\nimport { openZoom } from \"./zoom.js\";\n\n// === SVG SPRITE (–ª–µ–∂–∏—Ç –≤ CRC/img/sprite.svg) ===\nimport SPRITE_RAW from \"../../../img/sprite.svg?raw\";\n\nconst SPRITE_CONTAINER_ID = \"GLOBAL_SVG_SPRITE\";\nfunction ensureSpriteMounted(doc = document) {\n  if (doc.getElementById(SPRITE_CONTAINER_ID)) return;\n  const wrap = doc.createElement(\"div\");\n  wrap.id = SPRITE_CONTAINER_ID;\n  wrap.setAttribute(\"aria-hidden\", \"true\");\n  wrap.style.position = \"absolute\";\n  wrap.style.width = \"0\";\n  wrap.style.height = \"0\";\n  wrap.style.overflow = \"hidden\";\n  wrap.innerHTML = SPRITE_RAW;\n  doc.body.prepend(wrap);\n}\nconst icon = (id, cls = \"ico\") =>\n  `<svg class=\"${cls}\" aria-hidden=\"true\"><use href=\"#${id}\" xlink:href=\"#${id}\"></use></svg>`;\n\n// === –†–∞–Ω—Ç–∞–π–º-CSS (—Ä–æ–≤–Ω–∞—è —Å–µ—Ç–∫–∞: 5 —Å—Ç—Ä–æ–∫ –±–∏–æ–≥—Ä–∞—Ñ–∏–∏ + —Ñ–∏–∫—Å –≤—ã—Å–æ—Ç–∞ —Ç–µ–≥–æ–≤) ===\nconst RUNTIME_STYLE_ID = \"artists-grid-runtime\";\nfunction ensureRuntimeStyles() {\n  if (document.getElementById(RUNTIME_STYLE_ID)) return;\n  const css = `\n  #artists-section .card__tags{min-height:28px;display:flex;flex-wrap:wrap;gap:8px}\n  #artists-section .card__text{\n    display:-webkit-box;\n    -webkit-line-clamp:5;          /* 5 —Å—Ç—Ä–æ–∫ –ø–æ –¢–ó */\n    -webkit-box-orient:vertical;\n    overflow:hidden;\n  }`;\n  const style = document.createElement(\"style\");\n  style.id = RUNTIME_STYLE_ID;\n  style.textContent = css;\n  document.head.appendChild(style);\n}\n\n// ‚Äî‚Äî‚Äî –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ ‚Äî‚Äî‚Äî\nconst DEFAULT_LIMIT = 8;\n\n// –ë–µ–∑ —Å–µ—Ç–µ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ ‚Üí –Ω–µ –±—É–¥–µ—Ç –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏\nconst FALLBACK_IMG =\n  \"data:image/svg+xml;utf8,\" +\n  encodeURIComponent(\n    `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"960\" height=\"540\">\n      <rect width=\"100%\" height=\"100%\" fill=\"#0b0b0b\"/>\n      <text x=\"50%\" y=\"50%\" fill=\"#888\" font-family=\"IBM Plex Sans,Arial,sans-serif\"\n            font-size=\"28\" text-anchor=\"middle\" dominant-baseline=\"middle\">No image</text>\n    </svg>`\n  );\n\n// –∞–∫–∫—É—Ä–∞—Ç–Ω–æ –æ—Ç—Å–µ–∫–∞–µ–º ¬´—Å—Ç—Ä–∞–Ω–Ω—ã–µ¬ª URL, —á—Ç–æ–±—ã –Ω–µ –≥–æ–Ω—è—Ç—å –ª–∏—à–Ω–∏–µ –∑–∞–ø—Ä–æ—Å—ã\nfunction looksLikeImageUrl(u) {\n  if (!u || typeof u !== \"string\") return false;\n  if (!/^https?:\\/\\//i.test(u)) return false;\n  if (/null|undefined$/i.test(u)) return false;\n  if (!/\\.(jpg|jpeg|png|webp|gif|avif|svg)(\\?|#|$)/i.test(u)) return false;\n  return true;\n}\n\n// –ª–∏–º–∏—Ç –¥–ª—è List View\nfunction computeListLimit() {\n  const w = window.innerWidth || document.documentElement.clientWidth || 0;\n  if (w >= 1440) return 16;\n  if (w >= 768) return 12;\n  return 10;\n}\n\n// –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ–º –Ω–∞–ª–∏—á–∏–µ –∫–Ω–æ–ø–∫–∏ List view (–æ—Å–æ–±–µ–Ω–Ω–æ –Ω–∞ –º–æ–±–∏–ª–∫–µ)\nfunction ensureViewToggle(root) {\n  let btn = root.querySelector(\"#view-toggle\");\n  if (!btn) {\n    btn = document.createElement(\"button\");\n    btn.id = \"view-toggle\";\n    btn.type = \"button\";\n    btn.className = \"filters__view\";\n    btn.setAttribute(\"aria-pressed\", \"false\");\n    btn.textContent = \"List view\";\n    const mount =\n      root.querySelector(\".filters__bar\") ||\n      root.querySelector(\".filters\") ||\n      root;\n    mount.appendChild(btn);\n  }\n  return btn;\n}\n\n/* ---------- ¬´—É–º–Ω–∞—è¬ª –±–∏–æ–≥—Ä–∞—Ñ–∏—è: –¥–æ–±–∏–≤–∫–∞ —Ñ–∞–∫—Ç–∞–º–∏, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å 3‚Äì5 —Å—Ç—Ä–æ–∫ ---------- */\nfunction cleanText(s = \"\") {\n  return String(s)\n    .replace(/\\s+/g, \" \")\n    .replace(/\\s*([,.!?;:])\\s*/g, \"$1 \")\n    .trim();\n}\nfunction yearsLabel(a = {}) {\n  const start = a.intFormedYear || a.formedYear || a.yearStart || \"\";\n  const end   = a.intDisbandedYear || a.intDiedYear || a.disbandedYear || a.yearEnd || \"\";\n  if (start && end) return `${start}‚Äì${end}`;\n  if (start) return `since ${start}`;\n  return \"\";\n}\nfunction topGenres(a) {\n  const arr = Array.isArray(a?.genres) ? a.genres : (a?.genre ? [a.genre] : []);\n  return arr.map(String).filter(Boolean).slice(0, 2);\n}\nfunction composeBio(a) {\n  const raw = cleanText(a?.strBiographyEN || a?.biography || a?.about || \"\");\n  const hasJazz = topGenres(a).some(g => /jazz/i.test(g));\n  const fallback = hasJazz\n    ? \"A look at the influential figures who shaped jazz music history.\"\n    : \"A look at the influential figures who shaped music history.\";\n\n  const facts = [];\n  const gs = topGenres(a); if (gs.length) facts.push(`Genres: ${gs.join(\", \")}`);\n  const country = a.strCountry || a.country; if (country) facts.push(`Country: ${country}`);\n  const yrs = yearsLabel(a); if (yrs) facts.push(`Active: ${yrs}`);\n\n  let bio = raw || fallback;\n  if (facts.length) bio += \" \" + facts.join(\". \") + \".\";\n\n  // –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ ¬´—Ä–∞—Å—Ç—è–Ω–µ–º¬ª, —á—Ç–æ–±—ã —á–∞—â–µ –±—ã–ª–æ 3‚Äì5 —Å—Ç—Ä–æ–∫ (–ø—Ä–∏ —Ç–µ–∫—É—â–µ–π —à–∏—Ä–∏–Ω–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –∏ 16px)\n  const MIN_CHARS = 230;\n  if (bio.length < MIN_CHARS && raw) {\n    bio += \" Explore discography, style, and milestones.\";\n  }\n  return bio;\n}\n\n/* ====================================================================== */\n\nexport function initGrid(root = document.querySelector(\"#artists-section\")) {\n  if (!root) return;\n\n  ensureSpriteMounted(document);\n  ensureRuntimeStyles();\n\n  // ---------- refs ----------\n  const panel      = root.querySelector(\"#filters-panel\");\n  const toggleBtn  = root.querySelector(\"#filters-toggle\");\n  const resetBtn   = root.querySelector(\"#filters-reset\");\n  const resetBtnSm = root.querySelector(\"#filters-reset-sm\");\n  const viewToggle = ensureViewToggle(root);\n\n  const searchInput = root.querySelector(\"#flt-q\");\n  const searchBtn   = root.querySelector(\"#flt-q-btn\");\n\n  const ddSort      = root.querySelector('.dd[data-dd=\"sort\"]');\n  const ddSortBtn   = root.querySelector(\"#dd-sort-btn\")  || ddSort?.querySelector(\".dd__btn\");\n  const ddSortList  = root.querySelector(\"#dd-sort-list\") || ddSort?.querySelector(\".dd__list\");\n\n  const ddGenre     = root.querySelector('.dd[data-dd=\"genre\"]');\n  const ddGenreBtn  = root.querySelector(\"#dd-genre-btn\") || ddGenre?.querySelector(\".dd__btn\");\n  const ddGenreList = root.querySelector(\"#dd-genre-list\")|| ddGenre?.querySelector(\".dd__list\");\n\n  const grid  = root.querySelector(\"#artists-grid\");\n  const pager = root.querySelector(\"#artists-pager\");\n  const empty = root.querySelector(\"#artists-empty\");\n\n  if (!grid) {\n    console.warn(\"[artists] #artists-grid not found; abort initGrid\");\n    return;\n  }\n\n  const sectionRoot = root.closest(\".artists1\") || root;\n\n  // –º–æ–¥–∞–ª–∫–∞ (–µ–¥–∏–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä)\n  const modalApi = createArtistModal(document);\n\n  // –∑–∞—â–∏—Ç–∞ –æ—Ç –≥–æ–Ω–æ–∫ API\n  let reqId = 0;\n\n  // –¥–ª—è —Å–ª–µ–∂–µ–Ω–∏—è –∑–∞ –∞–≤—Ç–æ-–ª–∏–º–∏—Ç–æ–º –ø—Ä–∏ —Ä–µ—Å–∞–π–∑–µ\n  let lastAppliedLimit = null;\n\n  // ---------- utils ----------\n  const show = (el) => el && el.removeAttribute(\"hidden\");\n  const hide = (el) => el && el.setAttribute(\"hidden\", \"\");\n  const isDesktop = () => matchMedia(\"(min-width:1440px)\").matches;\n  const byName = (a) => (a?.strArtist || a?.name || \"\").toLowerCase();\n  const isListMode = () => sectionRoot.classList.contains(\"view-list\");\n\n  function updateViewButtonUI(listOn) {\n    viewToggle?.setAttribute(\"aria-pressed\", String(listOn));\n    if (viewToggle) viewToggle.textContent = listOn ? \"Default view\" : \"List view\";\n  }\n\n  function applyAutoLimitForCurrentMode({ resetPage = false } = {}) {\n    const want = isListMode() ? computeListLimit() : DEFAULT_LIMIT;\n    if (lastAppliedLimit === want) return;\n    lastAppliedLimit = want;\n    ArtistState.setLimit(want);\n    if (resetPage) ArtistState.setPage(1);\n    loadArtists();\n  }\n\n  function syncPanelMode() {\n    const st = ArtistState.get();\n    if (isDesktop()) {\n      panel?.setAttribute(\"aria-hidden\", \"false\");\n      toggleBtn?.setAttribute(\"aria-expanded\", \"false\");\n      ArtistState.setMobilePanel(false);\n    } else {\n      panel?.setAttribute(\"aria-hidden\", st.isMobilePanelOpen ? \"false\" : \"true\");\n      toggleBtn?.setAttribute(\"aria-expanded\", st.isMobilePanelOpen ? \"true\" : \"false\");\n    }\n  }\n\n  function scrollToGridTop() {\n    const top = root.getBoundingClientRect().top + window.scrollY - 16;\n    window.scrollTo({ top, behavior: \"smooth\" });\n  }\n\n  function applyEmpty(on) {\n    if (on) {\n      show(empty); hide(grid); hide(pager); resetGridInlineStyles();\n    } else {\n      hide(empty); show(grid);\n    }\n  }\n  function resetGridInlineStyles() {\n    grid.style.height = \"\";\n    grid.style.overflow = \"\";\n    grid.style.transition = \"\";\n    grid.style.willChange = \"\";\n  }\n\n  // ---------- skeleton + fade-in ----------\n  function buildSkeletonCard() {\n    return `\n      <li class=\"card card--skel\">\n        <div class=\"card__media skel skel--media\"></div>\n        <div class=\"card__tags\">\n          <span class=\"tag skel skel--tag\"></span>\n          <span class=\"tag skel skel--tag\"></span>\n        </div>\n        <div class=\"skel skel--title\"></div>\n        <div class=\"skel skel--text\"></div>\n      </li>`;\n  }\n  function renderSkeleton(count) {\n    const n = Math.max(1, Number(count) || DEFAULT_LIMIT);\n    grid.innerHTML = new Array(n).fill(0).map(buildSkeletonCard).join(\"\");\n    show(grid); hide(empty); hide(pager);\n  }\n  function afterImagesFadeIn() {\n    const imgs = grid.querySelectorAll(\"img.img-fade\");\n    imgs.forEach((img) => {\n      const done = () => img.classList.add(\"is-loaded\");\n      if (img.complete && img.naturalWidth > 0) done();\n      else img.addEventListener(\"load\", done, { once: true });\n    });\n  }\n  function attachImgFallbacks() {\n    grid.querySelectorAll(\"img\").forEach(img => {\n      img.onerror = () => { img.onerror = null; img.src = FALLBACK_IMG; };\n    });\n  }\n\n  // —É–¥–µ—Ä–∂–∞–Ω–∏–µ –≤—ã—Å–æ—Ç—ã –Ω–∞ –≤—Ä–µ–º—è –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∞\n  let gridCleanupTimer = null;\n  function lockGridHeight(h) {\n    const hh = h ?? grid.getBoundingClientRect().height;\n    grid.style.willChange = \"height\";\n    grid.style.overflow = \"hidden\";\n    grid.style.transition = \"none\";\n    grid.style.height = `${Math.max(1, Math.round(hh || 0))}px`;\n  }\n  function unlockGridHeight() { resetGridInlineStyles(); }\n  function swapGridContent(renderFn) {\n    renderFn();\n    void grid.offsetHeight;\n    const newH = grid.scrollHeight;\n    grid.style.transition = \"height 200ms ease\";\n    grid.style.height = `${newH}px`;\n    const onEnd = (e) => {\n      if (e.target !== grid || e.propertyName !== \"height\") return;\n      grid.removeEventListener(\"transitionend\", onEnd);\n      unlockGridHeight();\n    };\n    grid.addEventListener(\"transitionend\", onEnd);\n    clearTimeout(gridCleanupTimer);\n    gridCleanupTimer = setTimeout(unlockGridHeight, 400);\n  }\n\n  // ---------- rendering ----------\n  function buildCard(a) {\n    const id    = a?.id || a?._id || a?.artistId || \"\";\n    const name  = a?.strArtist || a?.name || \"Unknown\";\n    const rawImg= a?.strArtistThumb || a?.photo || a?.image || \"\";\n    const img   = looksLikeImageUrl(rawImg) ? rawImg : FALLBACK_IMG;\n\n    const bio   = composeBio(a);\n    const tags  = Array.isArray(a?.genres) ? a.genres : (a?.genre ? [a.genre] : []);\n\n    return `\n      <li class=\"card\" data-id=\"${id}\">\n        <div class=\"card__media\">\n          <img\n            class=\"img-fade\"\n            src=\"${img}\"\n            alt=\"${name}\"\n            loading=\"lazy\"\n            onerror=\"this.onerror=null;this.src='${FALLBACK_IMG}'\"\n          >\n        </div>\n        <div class=\"card__tags\">${tags.map(t => `<span class=\"tag\">${t}</span>`).join(\"\")}</div>\n        <h3 class=\"card__title\">${name}</h3>\n        <p class=\"card__text\">${bio}</p>\n        <button class=\"card__link\" data-action=\"more\">\n          Learn More\n          ${icon(\"icon-icon_play_artists_sections\")}\n        </button>\n      </li>`;\n  }\n  function renderGrid(arr) {\n    grid.innerHTML = arr.map(buildCard).join(\"\");\n    attachImgFallbacks();\n    afterImagesFadeIn();\n  }\n\n  function renderPager(page, totalPages) {\n    if (totalPages <= 0) { pager.innerHTML = \"\"; hide(pager); return; }\n    if (totalPages === 1) {\n      pager.innerHTML = `<button class=\"active\" data-page=\"1\" disabled>1</button>`;\n      show(pager); return;\n    }\n    const btn = (label, p, dis = false, act = false) =>\n      `<button ${dis ? \"disabled\" : \"\"} data-page=\"${p}\" class=\"${act ? \"active\" : \"\"}\">${label}</button>`;\n\n    const win = 2;\n    const from = Math.max(1, page - win);\n    const to = Math.min(totalPages, page + win);\n    const out = [];\n\n    out.push(btn(\"‚Äπ\", Math.max(1, page - 1), page === 1, false));\n    if (from > 1) {\n      out.push(btn(\"1\", 1, false, page === 1));\n      if (from > 2) out.push(`<button class=\"dots\" disabled>‚Ä¶</button>`);\n    }\n    for (let p = from; p <= to; p++) out.push(btn(String(p), p, false, p === page));\n    if (to < totalPages) {\n      if (to < totalPages - 1) out.push(`<button class=\"dots\" disabled>‚Ä¶</button>`);\n      out.push(btn(String(totalPages), totalPages, false, page === totalPages));\n    }\n    out.push(btn(\"‚Ä∫\", Math.min(totalPages, page + 1), page === totalPages, false));\n\n    pager.innerHTML = out.join(\"\");\n    show(pager);\n  }\n\n  // ---------- data ----------\n  async function loadGenres() {\n    try {\n      ddGenre?.classList.add(\"loading\");\n      ddGenreBtn?.setAttribute(\"aria-busy\", \"true\");\n      if (ddGenreBtn) ddGenreBtn.disabled = true;\n      if (ddGenreList) {\n        ddGenreList.innerHTML = `\n          <li class=\"dd__loading\">\n            <span class=\"dd__spinner\" aria-hidden=\"true\"></span>\n            <span>Loading‚Ä¶</span>\n          </li>`;\n      }\n      const list = await fetchGenres();\n      if (ddGenreList) ddGenreList.innerHTML = list.map((g) => `<li data-val=\"${g}\">${g}</li>`).join(\"\");\n    } catch {\n      if (ddGenreList) ddGenreList.innerHTML = `<li data-val=\"\">All Genres</li>`;\n    } finally {\n      ddGenre?.classList.remove(\"loading\");\n      ddGenreBtn?.removeAttribute(\"aria-busy\");\n      if (ddGenreBtn) ddGenreBtn.disabled = false;\n    }\n  }\n\n  async function loadArtists(allowRetry = true) {\n    const myId = ++reqId;\n\n    const { page, limit, genre, sort, q } = ArtistState.get();\n\n    lockGridHeight(grid.getBoundingClientRect().height);\n    renderSkeleton(limit);\n    hide(pager);\n\n    let list = [];\n    let total = 0;\n\n    try {\n      const server = await fetchArtists({\n        page, limit,\n        genre: genre || \"\",\n        sort:  sort  || \"\",\n        name:  q?.trim?.() || \"\",\n      });\n      if (myId !== reqId) return;\n      list  = Array.isArray(server.artists) ? server.artists : (Array.isArray(server) ? server : []);\n      total = Number(server.totalArtists ?? server.total ?? list.length ?? 0);\n    } catch {\n      if (myId !== reqId) return;\n      list = []; total = 0;\n    }\n\n    let totalPages = Math.max(1, Math.ceil(total / Math.max(1, Number(limit) || DEFAULT_LIMIT)));\n    if (page > totalPages && allowRetry) { ArtistState.setPage(totalPages); return loadArtists(false); }\n    if (page < 1 && allowRetry)          { ArtistState.setPage(1);         return loadArtists(false); }\n\n    if (sort === \"asc\")  list = list.slice().sort((a, b) => byName(a).localeCompare(byName(b)));\n    if (sort === \"desc\") list = list.slice().sort((a, b) => byName(b).localeCompare(byName(a)));\n\n    if (myId !== reqId) return;\n\n    if (!list.length) {\n      grid.innerHTML = \"\";\n      applyEmpty(true);\n      unlockGridHeight();\n      return;\n    }\n\n    applyEmpty(false);\n    swapGridContent(() => renderGrid(list));\n    renderPager(ArtistState.get().page, totalPages);\n  }\n\n  // ---------- dropdowns ----------\n  function closeDropdowns(except) {\n    [ddSort, ddGenre].forEach((dd) => {\n      if (dd && dd !== except) {\n        dd.classList.remove(\"open\");\n        const ul = dd.querySelector(\".dd__list\");\n        if (ul) ul.style.display = \"none\";\n      }\n    });\n  }\n  function toggleDropdown(dd) {\n    if (!dd) return;\n    const open = !dd.classList.contains(\"open\");\n    closeDropdowns(dd);\n    dd.classList.toggle(\"open\", open);\n    const ul = dd.querySelector(\".dd__list\");\n    if (ul) ul.style.display = open ? \"block\" : \"none\";\n  }\n\n  // ---------- UI events ----------\n  toggleBtn?.addEventListener(\"click\", () => {\n    try { UISound?.tap?.(); } catch {}\n    const st = ArtistState.get();\n    ArtistState.setMobilePanel(!st.isMobilePanelOpen);\n    syncPanelMode();\n  });\n  addEventListener(\"resize\", () => {\n    syncPanelMode();\n    if (isListMode()) applyAutoLimitForCurrentMode({ resetPage: true });\n  });\n\n  ddSortBtn?.addEventListener(\"click\", () => { try { UISound?.tap?.(); } catch {} toggleDropdown(ddSort); });\n  ddGenreBtn?.addEventListener(\"click\", () => { try { UISound?.tap?.(); } catch {} toggleDropdown(ddGenre); });\n  document.addEventListener(\"click\", (e) => { if (!e.target.closest(\".dd\")) closeDropdowns(); });\n\n  ddSortList?.addEventListener(\"click\", (e) => {\n    const li = e.target.closest(\"li\"); if (!li) return;\n    try { UISound?.tap?.(); } catch {}\n    ArtistState.setSort(li.dataset.val || \"\");\n    toggleDropdown(ddSort);\n    loadArtists();\n  });\n\n  ddGenreList?.addEventListener(\"click\", (e) => {\n    const li = e.target.closest(\"li\"); if (!li) return;\n    try { UISound?.tap?.(); } catch {}\n    const v = li.dataset.val || \"\";\n    ArtistState.setGenre(v === \"All Genres\" ? \"\" : v);\n    toggleDropdown(ddGenre);\n    loadArtists();\n    ddSortBtn?.focus();\n  });\n\n  function doSearch() {\n    try { UISound?.tap?.(); } catch {}\n    ArtistState.setQuery(searchInput?.value.trim() || \"\");\n    ArtistState.setPage(1);\n    loadArtists();\n  }\n  searchBtn?.addEventListener(\"click\", doSearch);\n  searchInput?.addEventListener(\"keydown\", (e) => { if (e.key === \"Enter\") doSearch(); });\n\n  function resetAll() {\n    ArtistState.reset();\n    if (searchInput) searchInput.value = \"\";\n    closeDropdowns();\n    lastAppliedLimit = null;\n    applyAutoLimitForCurrentMode({ resetPage: true });\n  }\n  resetBtn?.addEventListener(\"click\", () => { try { UISound?.tap?.(); } catch {} resetAll(); });\n  resetBtnSm?.addEventListener(\"click\", () => {\n    try { UISound?.tap?.(); } catch {}\n    resetAll();\n    ArtistState.setMobilePanel(false);\n    syncPanelMode();\n  });\n  root.querySelector(\"#empty-reset\")?.addEventListener(\"click\", () => { try { UISound?.tap?.(); } catch {} resetAll(); });\n\n  pager?.addEventListener(\"click\", (e) => {\n    const b = e.target.closest(\"button[data-page]\");\n    if (!b || b.disabled) return;\n    const p = Number(b.dataset.page) || 1;\n    if (p === ArtistState.get().page) return;\n    try { UISound?.page?.(); } catch {}\n    scrollToGridTop();\n    ArtistState.setPage(p);\n    loadArtists();\n  });\n\n  // Learn More + Zoom\n  grid?.addEventListener(\"click\", (e) => {\n    const btn = e.target.closest(\".card__link, [data-action='more']\");\n    if (btn) {\n      const id = btn.closest(\".card\")?.dataset?.id;\n      if (!id) return;\n      try { UISound?.tap?.(); } catch {}\n      modalApi.openFor(id);\n      return;\n    }\n    const img = e.target.closest(\".card__media img\");\n    if (img) {\n      try { UISound?.tap?.(); } catch {}\n      const src = img.currentSrc || img.src || img.getAttribute(\"src\") || \"\";\n      openZoom(src, img.getAttribute(\"alt\") || \"\");\n    }\n  });\n\n  // List/Grid view\n  viewToggle?.addEventListener(\"click\", () => {\n    try { UISound?.tap?.(); } catch {}\n    const listOn = !isListMode();\n    sectionRoot.classList.toggle(\"view-list\", listOn);\n    sectionRoot.classList.toggle(\"view-grid\", !listOn);\n    updateViewButtonUI(listOn);\n    lastAppliedLimit = null;\n    applyAutoLimitForCurrentMode({ resetPage: true });\n  });\n\n  // init\n  updateViewButtonUI(isListMode());\n  syncPanelMode();\n  lastAppliedLimit = null;\n  applyAutoLimitForCurrentMode({ resetPage: false });\n  loadGenres();\n  loadArtists();\n}\n","// URL-sync –¥–ª—è —Å–µ–∫—Ü–∏–∏ Artists: —á–∏—Ç–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–∑ query –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ,\n// –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–π query –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ state (replaceState).\n\nimport { getState, setState, subscribe } from \"./state.js\";\n\nfunction parseQuery() {\n  const p = new URLSearchParams(location.search);\n  const q = (p.get(\"q\") || \"\").trim();\n  const genre = p.get(\"genre\") || \"\";\n  const sort = p.get(\"sort\") || \"\";\n  const page = Math.max(1, Number(p.get(\"page\") || 1));\n  return { q, genre, sort, page };\n}\n\nfunction buildQuery(s) {\n  const p = new URLSearchParams();\n  if (s.q) p.set(\"q\", s.q);\n  if (s.genre) p.set(\"genre\", s.genre);\n  if (s.sort) p.set(\"sort\", s.sort);\n  if (s.page && s.page !== 1) p.set(\"page\", String(s.page));\n  return p.toString();\n}\n\nexport function initRouter() {\n  \n  const urlState = parseQuery();\n  const cur = getState();\n  const patch = {};\n  let changed = false;\n  for (const k of [\"q\",\"genre\",\"sort\",\"page\"]) {\n    if (urlState[k] !== undefined && urlState[k] !== cur[k]) {\n      patch[k] = urlState[k];\n      changed = true;\n    }\n  }\n  if (changed) setState(patch);\n\n  \n  let lastQS = null;\n  subscribe((s) => {\n    const qs = buildQuery(s);\n    if (qs === lastQS) return;\n    lastQS = qs;\n    const url = qs ? `?${qs}` : location.pathname;\n    history.replaceState(null, \"\", url);\n  });\n}\n","import { initGrid } from \"./grid.js\";\nimport { createArtistModal } from \"./modal.js\";\nimport { initRouter } from \"./router.js\";\nimport { initPrefetch } from \"./prefetch.js\";\n\nexport function initArtists(root = document.querySelector(\"#artists-section\")) {\n  if (!root) return;\n\n  // URL-sync —Å–Ω–∞—á–∞–ª–∞ (–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–æ –Ω–∞—á–∞–ª—å–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏)\n  initRouter(root);\n\n  // –ú–æ–¥–∞–ª–∫–∞ (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç open/close)\n  const modal = createArtistModal(root);\n\n  // Prefetch \"Learn more\" (—É—Å–∫–æ—Ä—è–µ—Ç –æ—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª–∫–∏)\n  initPrefetch(root);\n\n  // –ì—Ä–∏–¥ (–ø–µ—Ä–µ–¥–∞—ë–º –º–æ–¥–∞–ª–∫—É –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è)\n  initGrid(root, { openModal: modal.open });\n}\n","// src/js/artists/features/player-patch.js\n// –§–∏–∫—Å—ã: –Ω–∏ –æ–¥–Ω–æ–≥–æ passive-listener —Ç–∞–º, –≥–¥–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è preventDefault,\n// + –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ –ø—É–∑—ã—Ä—è –±–µ–∑ \"–∑–∞–ª–∏–ø–∞–Ω–∏—è\".\n\nexport default function mountPlayerPatch(player) {\n  // –ë–∞–∑–æ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã\n  const dock = document.querySelector(\".am-player\");\n  if (!dock) return;\n\n  const bubble = document.querySelector(\".am-player__bubble\");\n  const dragzone = document.querySelector(\".am-player__dragzone\");\n\n  // –†–∞–∑—Ä–µ—à–∞–µ–º –∫–∞—Å—Ç–æ–º–Ω—ã–µ –∂–µ—Å—Ç—ã –±–µ–∑ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã\n  [bubble, dragzone].forEach((el) => {\n    if (el) el.style.touchAction = \"none\";\n  });\n\n  // –ò—Å–ø–æ–ª—å–∑—É–µ–º –Ω–µ-passive —Å–ª—É—à–∞—Ç–µ–ª–∏ —Ç–∞–º, –≥–¥–µ –º–æ–∂–µ–º –≤—ã–∑–≤–∞—Ç—å preventDefault\n  const NP = { passive: false };\n\n  // –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ç–æ—á–∫–∞ —Å—Ç–∞—Ä—Ç–∞ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è: –ª–∏–±–æ —Å–∞–º bubble, –ª–∏–±–æ dragzone\n  const handle = bubble || dragzone;\n  if (!handle) return;\n\n  let dragging = false;\n  let startX = 0, startY = 0;\n  let baseLeft = 0, baseTop = 0;\n\n  // –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–æ: –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∏–∑ pointer/touch/mouse —Å–æ–±—ã—Ç–∏—è\n  const point = (ev) => {\n    if (ev.touches && ev.touches[0]) {\n      return { x: ev.touches[0].clientX, y: ev.touches[0].clientY };\n    }\n    if (ev.changedTouches && ev.changedTouches[0]) {\n      return { x: ev.changedTouches[0].clientX, y: ev.changedTouches[0].clientY };\n    }\n    return { x: ev.clientX, y: ev.clientY };\n  };\n\n  const onDown = (ev) => {\n    const p = point(ev);\n    startX = p.x;\n    startY = p.y;\n\n    // –ë—É–¥–µ–º —Ç–∞—Å–∫–∞—Ç—å –∏–º–µ–Ω–Ω–æ –ø—É–∑—ã—Ä—å, –∞ –Ω–µ –≤–µ—Å—å –¥–æ–∫\n    const target = bubble || dock;\n    const rect = target.getBoundingClientRect();\n    baseLeft = rect.left;\n    baseTop  = rect.top;\n\n    dragging = true;\n\n    // –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –ø—Ä–æ–∫—Ä—É—Ç–∫—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤–æ –≤—Ä–µ–º—è drag\n    if (ev.cancelable) ev.preventDefault();\n\n    window.addEventListener(\"touchmove\", onMove, NP);\n    window.addEventListener(\"mousemove\", onMove, NP);\n    window.addEventListener(\"touchend\", onUp, NP);\n    window.addEventListener(\"mouseup\", onUp, NP);\n  };\n\n  const onMove = (ev) => {\n    if (!dragging) return;\n\n    const p = point(ev);\n    const dx = p.x - startX;\n    const dy = p.y - startY;\n\n    const target = bubble || dock;\n    const w = target.offsetWidth || 0;\n    const h = target.offsetHeight || 0;\n\n    // –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä—É–µ–º –∫–∞–∫ fixed-—ç–ª–µ–º–µ–Ω—Ç (—Ü–µ–Ω—Ç—Ä–∏—Ä—É–µ–º –ø–æ —Ç–æ—á–∫–µ)\n    target.style.position = \"fixed\";\n    target.style.left = `${Math.round(baseLeft + dx)}px`;\n    target.style.top  = `${Math.round(baseTop  + dy)}px`;\n    target.style.right = \"auto\";\n    target.style.bottom = \"auto\";\n\n    if (ev.cancelable) ev.preventDefault();\n  };\n\n  const onUp = (ev) => {\n    dragging = false;\n    window.removeEventListener(\"touchmove\", onMove, NP);\n    window.removeEventListener(\"mousemove\", onMove, NP);\n    window.removeEventListener(\"touchend\", onUp, NP);\n    window.removeEventListener(\"mouseup\", onUp, NP);\n    if (ev.cancelable) ev.preventDefault();\n  };\n\n  // –°—Ç–∞–≤–∏–º —Å–ª—É—à–∞—Ç–µ–ª–∏ —Å –ù–ï-passive –æ–ø—Ü–∏–µ–π\n  handle.addEventListener(\"touchstart\", onDown, NP);\n  handle.addEventListener(\"mousedown\", onDown, NP);\n\n  // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ: –µ—Å–ª–∏ –ø–ª–µ–µ—Ä —Å–≤—ë—Ä–Ω—É—Ç, –∫–ª–∏–∫–∏/—Å–∫—Ä–æ–ª–ª –¥–æ–ª–∂–Ω—ã –ø—Ä–æ—Ö–æ–¥–∏—Ç—å \"—Å–∫–≤–æ–∑—å\"\n  // —Å–∞–º –¥–æ–∫, –Ω–æ –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –Ω–∞ –ø—É–∑—ã—Ä–µ.\n  dock.classList.add(\"am-player--patch-applied\");\n}\n","// –ö–Ω–æ–ø–∫–∞ \"Radio Menu\": –∫–ª–∏–∫–æ–º –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø–æ–ø–æ–≤–µ—Ä –ø–æ–¥ –∫–Ω–æ–ø–∫–æ–π, —à–∏—Ä–∏–Ω–æ–π = —à–∏—Ä–∏–Ω–µ –∫–Ω–æ–ø–∫–∏.\n// –≠–∫—Å–ø–æ—Ä—Ç: installMixRadioMenu(selector, player)\n\nexport function installMixRadioMenu(buttonSelector = \"#mixradio-menu-btn\", player) {\n  const btn = document.querySelector(buttonSelector);\n  if (!btn || btn.dataset.mrxInited) return;\n  btn.dataset.mrxInited = \"1\";\n\n  // ---- Inline CSS (–æ–¥–∏–Ω —Ä–∞–∑) ----\n  const STYLE_ID = \"mixradio-menu-style\";\n  if (!document.getElementById(STYLE_ID)) {\n    const st = document.createElement(\"style\");\n    st.id = STYLE_ID;\n    st.textContent = `\n      .am-mrx-pop{\n        position:fixed; z-index:3000; background:#0f0f10;\n        border:1px solid rgba(255,255,255,.12); border-radius:12px;\n        box-shadow:0 12px 32px rgba(0,0,0,.4); padding:8px; color:#e8e8ec;\n        font:500 14px/1.4 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif\n      }\n      .am-mrx-pop__grp{padding:6px 6px 4px 6px}\n      .am-mrx-pop__hdr{font-weight:700;color:#fff;margin:4px 6px 6px}\n      .am-mrx-pop__btn{display:flex;align-items:center;gap:8px;width:100%;\n        padding:8px 10px;border:0;background:transparent;color:#e8e8ec;border-radius:8px;cursor:pointer}\n      .am-mrx-pop__btn:hover,.am-mrx-pop__btn:focus-visible{background:rgba(255,255,255,.08);outline:none}\n      .am-mrx-pop__sep{height:1px;background:rgba(255,255,255,.12);margin:6px 0}\n      .am-mrx-pop__row{display:flex;gap:6px;flex-wrap:wrap}\n      .am-mrx-pop__chip{padding:6px 10px;border-radius:999px;border:1px solid rgba(255,255,255,.18);\n        background:transparent;color:#fff;cursor:pointer}\n      .am-mrx-pop__chip:hover,.am-mrx-pop__chip:focus-visible{background:rgba(255,255,255,.08);outline:none}\n      .am-mrx-pop__muted{opacity:.8}\n    `;\n    document.head.appendChild(st);\n  }\n\n  let pop = null;\n  let sleepTimer = null;\n\n  function closePop() {\n    if (pop && pop.parentNode) pop.parentNode.removeChild(pop);\n    pop = null;\n    document.removeEventListener(\"click\", onDocClick, true);\n    window.removeEventListener(\"scroll\", placeUnderButton);\n    window.removeEventListener(\"resize\", placeUnderButton);\n    document.removeEventListener(\"keydown\", onEsc);\n  }\n  function onEsc(e){ if(e.key===\"Escape\") closePop(); }\n  function onDocClick(e){\n    if (!pop) return;\n    if (e.target === btn) return;          // –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –∫–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ ‚Äî –ø—É—Å—Ç—å –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –µ—ë —Ö—ç–Ω–¥–ª–µ—Ä–æ–º\n    if (!pop.contains(e.target)) closePop();\n  }\n\n  function placeUnderButton() {\n    if (!pop) return;\n    const r = btn.getBoundingClientRect();\n    const w = Math.max(160, Math.round(r.width));\n    pop.style.width = w + \"px\";\n    pop.style.minWidth = w + \"px\";\n\n    const vw = window.innerWidth;\n    const px8 = 8;\n    const left = Math.min(Math.max(px8, r.left), vw - w - px8);\n    const top  = r.bottom + 6;\n\n    // –í–ê–ñ–ù–û: –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ fixed ‚Äî –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –ø–æ –≤—å—é–ø–æ—Ä—Ç—É, –ë–ï–ó —Å–∫—Ä–æ–ª–ª-–æ—Ñ—Å–µ—Ç–æ–≤\n    pop.style.left = left + \"px\";\n    pop.style.top  = top + \"px\";\n  }\n\n  function setSleep(minutes) {\n    if (sleepTimer) { clearTimeout(sleepTimer); sleepTimer = null; }\n    if (!minutes) { closePop(); return; }\n    sleepTimer = setTimeout(() => {\n      try {\n        if (player?.pause) player.pause();\n        else if (player?.stop) player.stop();\n        else if (player?.close) player.close();\n      } catch {}\n      sleepTimer = null;\n    }, minutes * 60 * 1000);\n    closePop();\n  }\n\n  function clickGenre(name) {\n    const li =\n      document.querySelector(`#dd-genre-list li[data-val=\"${name}\"]`) ||\n      Array.from(document.querySelectorAll(\"#dd-genre-list li\"))\n        .find(x => (x.textContent||\"\").trim().toLowerCase() === String(name).toLowerCase());\n    if (li) li.click();\n    closePop();\n  }\n\n  function buildPop() {\n    closePop();\n    pop = document.createElement(\"div\");\n    pop.className = \"am-mrx-pop\";\n    pop.innerHTML = `\n      <div class=\"am-mrx-pop__grp\">\n        <div class=\"am-mrx-pop__hdr\">Popular styles</div>\n        <div class=\"am-mrx-pop__row\">\n          ${[\"Pop\",\"Rock\",\"Jazz\",\"Hip-Hop\",\"Electronic\",\"Classical\"].map(g =>\n            `<button type=\"button\" class=\"am-mrx-pop__chip\" data-genre=\"${g}\">${g}</button>`\n          ).join(\"\")}\n        </div>\n      </div>\n      <div class=\"am-mrx-pop__sep\"></div>\n      <div class=\"am-mrx-pop__grp\">\n        <div class=\"am-mrx-pop__hdr\">Sleep timer</div>\n        <button type=\"button\" class=\"am-mrx-pop__btn\" data-sleep=\"20\">Stop after 20 min</button>\n        <button type=\"button\" class=\"am-mrx-pop__btn\" data-sleep=\"40\">Stop after 40 min</button>\n        <button type=\"button\" class=\"am-mrx-pop__btn\" data-sleep=\"60\">Stop after 60 min</button>\n        <button type=\"button\" class=\"am-mrx-pop__btn am-mrx-pop__muted\" data-sleep=\"0\">Cancel timer</button>\n      </div>\n    `;\n    document.body.appendChild(pop);\n\n    pop.addEventListener(\"click\", (e) => {\n      const chip = e.target.closest(\".am-mrx-pop__chip\");\n      if (chip) { clickGenre(chip.dataset.genre); return; }\n      const b = e.target.closest(\"[data-sleep]\");\n      if (b) { setSleep(Number(b.dataset.sleep) || 0); return; }\n    });\n\n    // –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä—É–µ–º –∏ –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ–º—Å—è –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è\n    requestAnimationFrame(placeUnderButton);\n    window.addEventListener(\"scroll\", placeUnderButton, { passive: true });\n    window.addEventListener(\"resize\", placeUnderButton);\n    document.addEventListener(\"click\", onDocClick, true);\n    document.addEventListener(\"keydown\", onEsc);\n  }\n\n  // –ö–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ ‚Äî –æ—Ç–∫—Ä—ã—Ç—å/–∑–∞–∫—Ä—ã—Ç—å\n  btn.addEventListener(\"click\", (e) => {\n    e.preventDefault();\n    if (pop) { closePop(); return; }\n    buildPop();\n  });\n}\n","// --------------------------------------------------\n// –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ —Å–µ–∫—Ü–∏–∏ Artists.\n// –ù–∏—á–µ–≥–æ –≤ —Ç–≤–æ—ë–º player.js –Ω–µ –ª–æ–º–∞–µ–º.\n// –ü–æ–¥–∫–ª—é—á–∞–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø–∞—Ç—á (features/player-patch.js) –ü–û–°–õ–ï —Å–æ–∑–¥–∞–Ω–∏—è –ø–ª–µ–µ—Ä–∞,\n// –∏ –¥–æ–±–∞–≤–ª—è–µ–º Mix Radio + –ø–æ–ø–æ–≤–µ—Ä-–º–µ–Ω—é (features/mixradio-menu.js).\n// --------------------------------------------------\n\nimport { initArtists } from \"./features/init.js\";\nimport { createMiniPlayer } from \"./features/player.js\";\nimport mountPlayerPatch from \"./features/player-patch.js\";\nimport { installMixRadioMenu } from \"./features/mixradio-menu.js\";\n\n/* =========================\n   –£—Ç–∏–ª–∏—Ç—ã\n   ========================= */\n\n/** –î–æ—Å—Ç–∞—ë—Ç YouTube ID –∏–∑ ID –∏–ª–∏ URL (youtu.be, /embed, /shorts, ?v=) */\nfunction getYouTubeId(urlOrId) {\n  if (!urlOrId) return \"\";\n  if (/^[\\w-]{11}$/.test(urlOrId)) return urlOrId; // —É–∂–µ ID\n\n  try {\n    const u = new URL(urlOrId, location.href);\n    if (/youtu\\.be$/i.test(u.hostname)) return u.pathname.slice(1);\n    const v = u.searchParams.get(\"v\");\n    if (v && /^[\\w-]{11}$/.test(v)) return v;\n    const m = u.pathname.match(/\\/(?:embed|v|shorts)\\/([^/?#]+)/i);\n    if (m && m[1] && /^[\\w-]{11}$/.test(m[1])) return m[1];\n  } catch {/* ignore */}\n  return \"\";\n}\n\nconst uniq = (arr) => Array.from(new Set((arr || []).filter(Boolean)));\nfunction shuffle(a) {\n  const arr = a.slice();\n  for (let i = arr.length - 1; i > 0; i--) {\n    const j = (Math.random() * (i + 1)) | 0;\n    [arr[i], arr[j]] = [arr[j], arr[i]];\n  }\n  return arr;\n}\n\n/* =========================\n   Seed-–ø—É–ª –≤–∏–¥–µ–æ (–º–æ–∂–Ω–æ –¥–æ–ø–æ–ª–Ω—è—Ç—å)\n   ========================= */\n\nconst SEED_IDS = uniq([\n  // –±–∞–∑–æ–≤—ã–π –Ω–∞–±–æ—Ä\n  \"Zi_XLOBDo_Y\",\"3JZ_D3ELwOQ\",\"fRh_vgS2dFE\",\"OPf0YbXqDm0\",\"60ItHLz5WEA\",\n  \"2Vv-BfVoq4g\",\"kXYiU_JCYtU\",\"UceaB4D0jpo\",\"RubBzkZzpUA\",\"kJQP7kiw5Fk\",\n  \"CevxZvSJLk8\",\"pRpeEdMmmQ0\",\"IcrbM1l_BoI\",\"YVkUvmDQ3HY\",\"hT_nvWreIhg\",\n  \"09R8_2nJtjg\",\"uelHwf8o7_U\",\"JGwWNGJdvx8\",\"YQHsXMglC9A\",\"NmugSMBh_iI\",\n  \"LrUvu1mlWco\",\"hLQl3WQQ–æQ0\",\"RgKAFK5djSk\",\"SlPhMPnQ58k\",\"oRdxUFDoQe0\",\n  \"Pkh8UtuejGw\",\"tt2k8PGm-TI\",\"lY2yjAdbvdQ\",\"pXRviuL6vMY\",\"nfs8NYg7yQM\",\n  \"nCkpzqqog4k\",\"M7lc1UVf-VE\",\n  // —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ\n  \"fLexgOxsZu0\",\"2vjPBrBU-TM\",\"9bZkp7q19f0\",\"e-ORhEE9VVg\",\"gCYcHz2k5x0\",\n  \"ktvTqknDobU\",\"ub82Xb1C8os\",\"fKopy74weus\",\"Qv5fqunQ_4I\",\"vNoKguSdy4Y\",\n  \"0KSOMA3QBU0\",\"lp-EO5I60KA\",\"DK_0jXPuIr0\",\"tVj0ZTS4WF4\",\"6fVE8kSM43I\",\n  \"6Ejga4kJUts\",\"gGdGFtwCNBE\",\"rYEDA3JcQqw\",\"AtKZKl7Bgu0\",\"eVTXPUF4Oz4\",\n  \"kffacxfA7G4\"\n]);\n\n/* =========================\n   localStorage: –∫—ç—à –ø—É–ª–∞\n   ========================= */\n\nconst LS_KEY_POOL = \"am.radio.pool\";\nconst LS_KEY_LAST = \"am.radio.last\";\n\nfunction readPoolLS() {\n  try {\n    const raw = localStorage.getItem(LS_KEY_POOL);\n    const arr = raw ? JSON.parse(raw) : [];\n    return Array.isArray(arr) ? uniq(arr) : [];\n  } catch { return []; }\n}\nfunction savePoolLS(arr) {\n  try {\n    localStorage.setItem(LS_KEY_POOL, JSON.stringify(uniq(arr).slice(0, 800)));\n  } catch { /* ignore */ }\n}\nfunction addToPoolLS(ids) {\n  if (!ids?.length) return;\n  const cur = new Set(readPoolLS());\n  ids.forEach((id) => cur.add(id));\n  savePoolLS([...cur]);\n}\n\n/* =========================\n   –°–±–æ—Ä ID –∏–∑ DOM\n   ========================= */\n\nfunction collectFromDOM(root = document) {\n  const out = new Set();\n\n  // –°—Å—ã–ª–∫–∏ –Ω–∞ YouTube\n  root.querySelectorAll('a[href*=\"youtu\"], a.yt').forEach((a) => {\n    const href = a.getAttribute(\"href\") || \"\";\n    const id = getYouTubeId(href);\n    if (id) out.add(id);\n  });\n\n  // –í–æ–∑–º–æ–∂–Ω—ã–µ data-–∞—Ç—Ä–∏–±—É—Ç—ã\n  root.querySelectorAll(\"[data-yt],[data-youtube],[data-ytid]\").forEach((el) => {\n    const raw = el.getAttribute(\"data-yt\") || el.getAttribute(\"data-youtube\") || el.getAttribute(\"data-ytid\") || \"\";\n    const id = getYouTubeId(raw);\n    if (id) out.add(id);\n  });\n\n  return [...out];\n}\n\nfunction installCollector() {\n  // —Å—Ç–∞—Ä—Ç–æ–≤–∞—è –≤—ã–±–æ—Ä–∫–∞\n  addToPoolLS(collectFromDOM());\n\n  // –Ω–∞–±–ª—é–¥–∞–µ–º –∑–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è–º–∏ (–º–æ–¥–∞–ª–∫–∏, –ø–æ–¥–≥—Ä—É–∑–∫–∏ –∏ —Ç.–ø.)\n  const mo = new MutationObserver((mutations) => {\n    let added = [];\n    for (const m of mutations) {\n      if (!m.addedNodes) continue;\n      m.addedNodes.forEach((n) => {\n        if (n.nodeType !== 1) return; // ELEMENT_NODE\n        added = added.concat(collectFromDOM(n));\n      });\n    }\n    if (added.length) addToPoolLS(added);\n  });\n  mo.observe(document.documentElement, { childList: true, subtree: true });\n}\n\n/* =========================\n   –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∏—Ç–æ–≥–æ–≤–æ–≥–æ –ø—É–ª–∞\n   ========================= */\n\nfunction buildPool() {\n  const mem = readPoolLS();\n  const dom = collectFromDOM();\n  return uniq([...SEED_IDS, ...mem, ...dom]);\n}\n\n/* =========================\n   Mix Radio\n   ========================= */\n\nfunction startMixRadio(player) {\n  const pool = buildPool();\n  if (!pool.length || !player) return;\n\n  // –±–æ–ª—å—à–∞—è –ø–µ—Ä–µ–º–µ—à–∞–Ω–Ω–∞—è –æ—á–µ—Ä–µ–¥—å\n  let order = shuffle(pool);\n\n  // –∞–Ω—Ç–∏-–ø–æ–≤—Ç–æ—Ä —Å—Ç–∞—Ä—Ç–æ–≤–æ–≥–æ\n  const last = localStorage.getItem(LS_KEY_LAST);\n  if (last && order.length > 1 && order[0] === last) {\n    order.push(order.shift());\n  }\n  localStorage.setItem(LS_KEY_LAST, order[0]);\n\n  // –æ—Ç–¥–∞—ë–º –æ—á–µ—Ä–µ–¥—å –ø–ª–µ–µ—Ä—É\n  player.openQueue?.(order, { shuffle: false, loop: true, startIndex: 0 });\n}\n\n/* =========================\n   Bootstrap\n   ========================= */\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–µ–∫—Ü–∏–∏/–≥—Ä–∏–¥–∞/–º–æ–¥–∞–ª–æ–∫ (–∫–∞–∫ –±—ã–ª–æ)\n  try { initArtists(); } catch { /* ignore */ }\n\n  // –°–æ–∑–¥–∞—ë–º –º–∏–Ω–∏-–ø–ª–µ–µ—Ä\n  const player = createMiniPlayer?.();\n\n  // –ü–∞—Ç—á ‚Äî —Å—Ç—Ä–æ–≥–æ –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –ø–ª–µ–µ—Ä–∞\n  try { mountPlayerPatch(player); } catch { /* ignore */ }\n\n  // –°–±–æ—Ä ID –Ω–∞ –ª–µ—Ç—É (–º–æ–¥–∞–ª–∫–∏, –¥–∏–Ω–∞–º–∏–∫–∞)\n  installCollector();\n\n  // –ö–Ω–æ–ø–∫–∞ ¬´Mix Radio / Next¬ª\n  const btn = document.querySelector(\"#random-radio\");\n  if (btn) {\n    btn.addEventListener(\"click\", (e) => {\n      e.preventDefault();\n\n      // –ï—Å–ª–∏ —Å–≤–µ—Ä–Ω—É—Ç (–ø—É–∑—ã—Ä—å) ‚Äî –ø—Ä–æ—Å—Ç–æ next, –Ω–µ —Ä–∞—Å–∫—Ä—ã–≤–∞—è –ø–ª–µ–µ—Ä\n      if (player?.isMinimized?.()) {\n        player.next?.();\n        return;\n      }\n\n      // –ï—Å–ª–∏ –µ—â—ë –Ω–µ –∞–∫—Ç–∏–≤–µ–Ω ‚Äî —Å—Ç–∞—Ä—Ç—É–µ–º —Ä–∞–¥–∏–æ –∏–ª–∏ next –ø–æ –≥–æ—Ç–æ–≤–æ–π –æ—á–µ—Ä–µ–¥–∏\n      if (!player?.isActive?.()) {\n        if (player?.hasQueue?.()) player.next?.();\n        else startMixRadio(player);\n        return;\n      }\n\n      // –ï—Å–ª–∏ –∞–∫—Ç–∏–≤–µ–Ω ‚Äî –ø—Ä–æ—Å—Ç–æ next\n      player.next?.();\n    });\n  }\n\n  // === –†–∞–¥–∏–æ-–º–µ–Ω—é (–¥–æ–ø. –∫–Ω–æ–ø–∫–∞ –ø–æ–¥ MixRadio) ===\n  const ensureMenu = () => installMixRadioMenu(\"#mixradio-menu-btn\", player);\n\n  // —Å—Ä–∞–∑—É\n  ensureMenu();\n  // –ø–æ—Å–ª–µ –ø–æ–ª–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏\n  window.addEventListener(\"load\", ensureMenu);\n  // –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –ø–∞–Ω–µ–ª–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤ (–µ—Å–ª–∏ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏)\n  document.getElementById(\"filters-toggle\")?.addEventListener(\"click\", () => {\n    setTimeout(ensureMenu, 0);\n  });\n});\n","const refs = {\n  openBtn: document.querySelector('[data-menu-open]'),\n  closeBtn: document.querySelector('[data-menu-close]'),\n  menu: document.querySelector('[data-menu]'),\n  links: document.querySelectorAll('[data-menu-link]'),\n  logos: document.querySelectorAll('.header-logo'),\n  header: document.querySelector('.header'),\n};\n\nfunction openMenu() {\n  if (!refs.menu) return;\n  refs.menu.hidden = false;\n  refs.menu.classList.add('show');\n  document.body.style.overflow = 'hidden';\n  refs.openBtn?.setAttribute('aria-expanded', 'true');\n}\n\nfunction closeMenu() {\n  return new Promise(resolve => {\n    if (!refs.menu) return resolve();\n    refs.menu.classList.remove('show');\n    setTimeout(() => {\n      refs.menu.hidden = true;\n      document.body.style.overflow = '';\n      refs.openBtn?.setAttribute('aria-expanded', 'false');\n      resolve();\n    }, 400);\n  });\n}\n\n/* ---------- header offset helpers ---------- */\nfunction getHeaderOffset() {\n  return (refs.header?.offsetHeight || 80) + 8;\n}\nfunction applyScrollPadding() {\n  document.documentElement.style.scrollPaddingTop = `${getHeaderOffset()}px`;\n}\napplyScrollPadding();\nwindow.addEventListener('resize', () => requestAnimationFrame(applyScrollPadding));\n\n/* ---------- custom smooth scroll (no teleports) ---------- */\nfunction smoothScroll(targetHref, duration = 500) {\n  const raw = (targetHref || '').replace('#', '');\n  const el = document.getElementById(raw) || document.getElementById(`${raw}-section`);\n  if (!el) return;\n\n  const headerOffset = getHeaderOffset();\n  const targetY = el.getBoundingClientRect().top + window.pageYOffset - headerOffset;\n\n  const startY = window.pageYOffset;\n  const diff = targetY - startY;\n  let t0 = null;\n\n  const ease = t => (t < 0.5 ? 2 * t * t : 1 - Math.pow(-2 * t + 2, 2) / 2);\n\n  function step(ts) {\n    if (t0 === null) t0 = ts;\n    const p = Math.min(1, (ts - t0) / duration);\n    window.scrollTo(0, startY + diff * ease(p));\n    if (p < 1) {\n      requestAnimationFrame(step);\n    } else {\n      // NEW: –ø–µ—Ä–µ–Ω–æ—Å–∏–º —Ñ–æ–∫—É—Å –Ω–∞ —Å–µ–∫—Ü–∏—é, —á—Ç–æ–±—ã —Å—Å—ã–ª–∫–∞ –ø–æ—Ç–µ—Ä—è–ª–∞ :focus\n      el.setAttribute('tabindex', '-1');\n      el.focus({ preventScroll: true });\n      setTimeout(() => el.removeAttribute('tabindex'), 0);\n    }\n  }\n  requestAnimationFrame(step);\n}\n\n/* ---------- menu events ---------- */\nrefs.openBtn?.addEventListener('click', openMenu);\nrefs.closeBtn?.addEventListener('click', closeMenu);\n\nrefs.logos.forEach(logo => {\n  logo.addEventListener('click', e => {\n    if (logo.closest('.mobile-menu')) {\n      e.preventDefault();\n      closeMenu();\n      setTimeout(() => {\n        window.location.href = logo.getAttribute('href');\n      }, 400);\n    }\n  });\n});\n\nrefs.menu?.addEventListener('click', e => {\n  if (e.target === refs.menu) {\n    closeMenu();\n  }\n});\n\ndocument.addEventListener('keydown', e => {\n  if (e.key === 'Escape' && refs.menu?.classList.contains('show')) {\n    closeMenu();\n  }\n});\n\n/* ---------- scroll-spy with IO ---------- */\nconst navLinks = document.querySelectorAll('.header-nav-link, .mobile-menu-nav-link');\n\nconst linkTargets = new Map();\nnavLinks.forEach(a => {\n  const href = (a.getAttribute('href') || '').trim();\n  if (!href.startsWith('#')) return;\n  const rawId = href.slice(1);\n  const el = document.getElementById(rawId) || document.getElementById(`${rawId}-section`);\n  if (!el) return;\n  if (!linkTargets.has(el)) linkTargets.set(el, []);\n  linkTargets.get(el).push(a);\n});\n\nlet currentEl = null;\nfunction setActiveByEl(el) {\n  if (!el || currentEl === el) return;\n  navLinks.forEach(a => a.classList.remove('active'));\n  (linkTargets.get(el) || []).forEach(a => a.classList.add('active'));\n  currentEl = el;\n}\n\nlet lockUntil = 0;\nconst LOCK_MS = 700;\nconst isLocked = () => Date.now() < lockUntil;\n\nlet io;\nfunction initScrollSpy() {\n  if (io) io.disconnect();\n\n  const rootMargin = `-${getHeaderOffset()}px 0px -55% 0px`;\n  const visibleRatio = new Map();\n\n  io = new IntersectionObserver(\n    entries => {\n      entries.forEach(en => {\n        visibleRatio.set(en.target, en.isIntersecting ? en.intersectionRatio : 0);\n      });\n      if (isLocked()) return;\n      const best = [...visibleRatio.entries()].sort((a, b) => b[1] - a[1])[0];\n      if (best && best[1] > 0) setActiveByEl(best[0]);\n    },\n    { root: null, rootMargin, threshold: [0, 0.25, 0.5, 0.75, 1] }\n  );\n\n  linkTargets.forEach((_, el) => io.observe(el));\n}\ninitScrollSpy();\nwindow.addEventListener('resize', () => requestAnimationFrame(initScrollSpy));\n\n// ---------- HERO \"Explore Artists\" button smooth scroll ----------\nconst exploreBtn = document.getElementById('exploreBtn');\n\nif (exploreBtn) {\n  exploreBtn.addEventListener('click', async (e) => {\n    e.preventDefault();\n    exploreBtn.blur();\n\n    const href = exploreBtn.getAttribute('href') || '#artists-section';\n    const raw  = href.replace('#', '');\n    const el   = document.getElementById(raw) || document.getElementById(`${raw}-section`);\n    if (!el) return;\n\n    // –µ—Å–ª–∏ –≤–¥—Ä—É–≥ –æ—Ç–∫—Ä—ã—Ç –º–æ–±–∏–ª—å–Ω—ã–π –±—É—Ä–≥–µ—Ä ‚Äî –ø—Ä–∏–∫—Ä—ã–≤–∞–µ–º –ø–µ—Ä–µ–¥ —Å–∫—Ä–æ–ª–ª–æ–º\n    if (refs.menu?.classList.contains('show')) {\n      await closeMenu();\n    }\n\n    // –ø–æ–¥—Å–≤–µ—Ç–∏–º –∞–∫—Ç–∏–≤–Ω—ã–π –ø—É–Ω–∫—Ç –≤ —Ö–µ–¥–µ—Ä–µ (–µ—Å–ª–∏ —Ç–∞–∫–æ–π –µ—Å—Ç—å)\n    setActiveByEl(el);\n\n    // —Å–ª–µ–≥–∫–∞ ¬´–∑–∞–±–ª–æ–∫–∏—Ä—É–µ–º¬ª scroll-spy, —á—Ç–æ–±—ã –æ–Ω –Ω–µ –ø–µ—Ä–µ–±–∏–ª –∞–∫—Ç–∏–≤–Ω—ã–π –ø—É–Ω–∫—Ç –≤–æ –≤—Ä–µ–º—è –∞–Ω–∏–º–∞—Ü–∏–∏\n    lockUntil = Date.now() + LOCK_MS;\n\n    // –ø–ª–∞–≤–Ω—ã–π —Å–∫—Ä–æ–ª–ª —Å —É—á—ë—Ç–æ–º –≤—ã—Å–æ—Ç—ã —Ö–µ–¥–µ—Ä–∞\n    smoothScroll(href, 600); // –º–æ–∂–µ—à—å –ø–æ–¥–ø—Ä–∞–≤–∏—Ç—å –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å\n  });\n}\n\n/* ---------- nav handlers ---------- */\n// Desktop: –Ω–µ —Ç—Ä–æ–≥–∞–µ–º –º–æ–±–∏–ª—å–Ω—ã–µ (—É –Ω–∏—Ö –µ—Å—Ç—å data-menu-link)\nnavLinks.forEach(a => {\n  a.addEventListener('click', (e) => {\n    if (a.matches('[data-menu-link]')) return;\n    const href = (a.getAttribute('href') || '').trim();\n    if (!href.startsWith('#')) return;\n\n    e.preventDefault();\n    a.blur();                      // NEW: —Å–Ω–∏–º–∞–µ–º :focus —Å –∫–ª–∏–∫–Ω—É—Ç–æ–π —Å—Å—ã–ª–∫–∏\n\n    const raw = href.slice(1);\n    const el = document.getElementById(raw) || document.getElementById(`${raw}-section`);\n    if (!el) return;\n\n    setActiveByEl(el);\n    lockUntil = Date.now() + LOCK_MS;\n    smoothScroll(href);\n  });\n});\n\n// Mobile: –∂–¥—ë–º –∑–∞–∫—Ä—ã—Ç–∏–µ –º–µ–Ω—é, —Å–Ω–∏–º–∞–µ–º —Ñ–æ–∫—É—Å, –ø–æ—Ç–æ–º —Å–∫—Ä–æ–ª–ª–∏–º\nrefs.links.forEach(link =>\n  link.addEventListener('click', async e => {\n    e.preventDefault();\n    link.blur();                   // NEW: —Å–Ω–∏–º–∞–µ–º :focus —Å –º–æ–±–∏–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–∏\n    const targetId = link.getAttribute('href');\n    await closeMenu();\n    smoothScroll(targetId);\n  })\n);\n\nwindow.addEventListener('load', () => {\n  applyScrollPadding();\n  if (location.hash) {\n    setTimeout(() => smoothScroll(location.hash), 0);\n  }\n});\n\n\n","// ===== Imports =====\nimport Swiper from 'swiper/bundle';\nimport 'swiper/swiper-bundle.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { API_BASE } from './api.js';\n\n// ===== Constants / State =====\nconst STORAGE_KEY = 'myFeedback';\nconst FEEDBACKS_URL = `${API_BASE.replace(/\\/$/, '')}/feedbacks`;\nlet scrollY = 0;\nlet swiper = null;\n\n// ===== DOM refs =====\nlet overlay, openBtn, closeBtn, form, container, inputName, inputMessage, formRating;\n\n// ===== Utils =====\nfunction debounce(fn, delay = 400) {\n  let t;\n  return (...args) => {\n    clearTimeout(t);\n    t = setTimeout(() => fn(...args), delay);\n  };\n}\n\n// ===== Stars =====\nfunction createStars(container, rating) {\n  if (!container) return;\n  container.innerHTML = '';\n\n  for (let i = 1; i <= 5; i++) {\n    const star = document.createElement('span');\n    star.classList.add('star');\n    if (i <= rating) star.classList.add('filled');\n    container.appendChild(star);\n\n    if (container.id === 'customer-rating') {\n      star.addEventListener('click', () => {\n        container.dataset.rating = String(i);\n        createStars(container, i);\n        saveToLocalStorage();\n      });\n      star.addEventListener('mouseenter', () => hoveredStar(container, i));\n      star.addEventListener('mouseleave', () => {\n        const savedRating = parseInt(formRating.dataset.rating) || 0;\n        createStars(container, savedRating);\n      });\n    }\n  }\n}\n\nfunction hoveredStar(container, upTo) {\n  const stars = container.querySelectorAll('.star');\n  stars.forEach((star, index) => {\n    if (index < upTo) star.classList.add('filled');\n    else star.classList.remove('filled');\n  });\n}\n\n// ===== LocalStorage =====\nfunction saveToLocalStorage() {\n  const name = inputName?.value?.trim() || '';\n  const message = inputMessage?.value?.trim() || '';\n  const rating = Number(formRating?.dataset?.rating || 0);\n\n  if (!name && !message && rating === 0) {\n    localStorage.removeItem(STORAGE_KEY);\n    return;\n  }\n\n  const draft = { name, message, rating };\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(draft));\n}\n\nconst saveDraftDebounced = debounce(saveToLocalStorage, 400);\n\nfunction dataFromLocalStorage() {\n  let saved = null;\n  try {\n    saved = JSON.parse(localStorage.getItem(STORAGE_KEY) || 'null');\n  } catch {\n    saved = null;\n  }\n\n  if (!saved) {\n    if (formRating) {\n      formRating.dataset.rating = '0';\n      createStars(formRating, 0);\n    }\n    return;\n  }\n\n  if (inputName) inputName.value = saved.name || '';\n  if (inputMessage) inputMessage.value = saved.message || '';\n  if (formRating) {\n    formRating.dataset.rating = String(saved.rating ?? 0);\n    createStars(formRating, saved.rating ?? 0);\n  }\n}\n\nfunction resetLocalStorage() {\n  localStorage.removeItem(STORAGE_KEY);\n  form?.reset();\n  if (formRating) {\n    formRating.dataset.rating = '0';\n    createStars(formRating, 0);\n  }\n}\n\n// ===== Modal =====\nfunction openModal(e) {\n  e?.preventDefault?.();\n  scrollY = window.scrollY;\n  document.body.style.position = 'fixed';\n  document.body.style.top = `-${scrollY}px`;\n  document.body.style.left = '0';\n  document.body.style.right = '0';\n\n  overlay.classList.remove('hidden');\n  container.classList.add('hidden');\n\n  dataFromLocalStorage();\n}\n\nfunction closeModal() {\n  overlay.classList.add('hidden');\n  container.classList.remove('hidden');\n\n  document.body.style.position = '';\n  window.scrollTo(0, scrollY);\n\n  if (formRating) {\n    formRating.dataset.rating = '0';\n    createStars(formRating, 0);\n  }\n\n  saveToLocalStorage();\n}\n\n// ===== Swiper =====\nfunction initSwiper() {\n  if (swiper) {\n    swiper.destroy(true, true);\n    swiper = null;\n  }\n\n  swiper = new Swiper('.swiper', {\n    slidesPerView: 1,\n    spaceBetween: 0,\n    loop: false,\n    grabCursor: true,\n    navigation: {\n      nextEl: '.swiper-button-next',\n      prevEl: '.swiper-button-prev',\n    },\n    centeredSlides: false,\n    pagination: {\n      el: '.swiper-pagination',\n      type: 'custom',\n      clickable: true,\n      renderCustom: (sw, _current, total) => {\n        const first = 0;\n        const last = total - 1;\n        const middle = Math.floor(total / 2);\n        const curr = sw.realIndex;\n\n        const isActive = (i) =>\n          (i === first && curr === first) ||\n          (i === last && curr === last) ||\n          (i === middle && curr !== first && curr !== last);\n\n        const dot = (i) =>\n          `<span class=\"swiper-dots ${isActive(i) ? 'active' : ''}\" data-i=\"${i}\"></span>`;\n\n        return dot(first) + dot(middle) + dot(last);\n      },\n    },\n  });\n\n  const pag = document.querySelector('.swiper-pagination');\n  if (pag) {\n    pag.onclick = (e) => {\n      const dot = e.target.closest('.swiper-dots');\n      if (!dot) return;\n      swiper.slideTo(Number(dot.dataset.i));\n    };\n  }\n\n  swiper.on('slideChange', () => swiper.pagination.render());\n}\n\n// ===== Load Reviews =====\nasync function loadReviews() {\n  const wrapper = document.querySelector('.swiper-wrapper');\n  if (!wrapper) return;\n  wrapper.innerHTML = '';\n\n  try {\n    const res = await fetch(FEEDBACKS_URL);\n    const json = await res.json();\n    const feedbacks = (json?.data || []).slice(0, 10);\n\n    feedbacks.forEach((fb, index) => {\n      const stars = Math.round(fb.rating || 0);\n\n      const slide = document.createElement('div');\n      slide.className = 'swiper-slide';\n      slide.innerHTML = `\n        <div class=\"rating my-rating\" id=\"rating-${index}\" data-rating=\"${stars}\"></div>\n        <div class=\"feedback\">\n          <p class=\"customer-feedback\">${fb.descr}</p>\n          <h3 class=\"customer-name\">${fb.name}</h3>\n        </div>\n      `;\n\n      wrapper.appendChild(slide);\n      createStars(slide.querySelector('.rating'), stars);\n    });\n\n    initSwiper();\n  } catch (err) {\n    iziToast.error({ title: 'Error', message: 'Bad request (invalid request params)' });\n  }\n}\n\n// ===== Submit =====\nfunction attachSubmitHandler() {\n  form?.addEventListener('submit', async (e) => {\n    e.preventDefault();\n\n    const name = inputName.value.trim();\n    const message = inputMessage.value.trim();\n    const rating = Math.round(formRating.dataset.rating) || 0;\n\n    if (!name || name.length < 2 || name.length > 16) {\n      iziToast.error({ message: 'Shortest name - 2 letters; Largest name - 16 letters' });\n      return;\n    }\n    if (!message || message.length < 10 || message.length > 512) {\n      iziToast.error({ message: 'Min message - 10 symbols; Max message - 512 symbols' });\n      return;\n    }\n    if (rating < 1 || rating > 5) {\n      iziToast.error({ message: \"Rating must be between '1' and '5'\" });\n      return;\n    }\n\n    try {\n      const response = await fetch(FEEDBACKS_URL, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Accept: 'application/json',\n        },\n        body: JSON.stringify({ name, descr: message, rating }),\n      });\n\n      if (!response.ok) {\n        iziToast.error({ title: 'Error:', message: `${response.status}` });\n        return;\n      }\n\n      iziToast.success({ message: \"Success! Your comment posted\" });\n      resetLocalStorage();\n      closeModal();\n      document.body.classList.remove('no-scroll');\n\n      loadReviews();\n    } catch (err) {\n      iziToast.error({ message: 'Bad request (invalid request body)' });\n    }\n  });\n}\n\n// ===== Artists Button Smooth Scroll =====\nfunction initArtistsButton() {\n  // –í—Å—ñ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –¥–æ #artists\n  const artistsLinks = document.querySelectorAll('a[href=\"#artists\"]');\n  const artistsSection = document.querySelector('#artists');\n\n  if (artistsLinks.length && artistsSection) {\n    artistsLinks.forEach(link => {\n      link.addEventListener('click', (e) => {\n        e.preventDefault();\n        if (overlay && !overlay.classList.contains('hidden')) closeModal();\n        artistsSection.scrollIntoView({ behavior: 'smooth' });\n      });\n    });\n  }\n}\n\n// ===== Init App =====\nfunction initApp() {\n  overlay = document.querySelector('.overlay');\n  openBtn = document.querySelector('.feedback-btn');\n  closeBtn = document.querySelector('.close-icon');\n  form = document.querySelector('#feedback-form');\n  container = document.querySelector('.feedback-section');\n  inputName = document.querySelector('.form-input-name');\n  inputMessage = document.querySelector('.form-input-message');\n  formRating = document.getElementById('customer-rating');\n\n  createStars(formRating, parseInt(formRating?.dataset?.rating) || 0);\n\n  openBtn?.addEventListener('click', openModal);\n  closeBtn?.addEventListener('click', closeModal);\n\n  overlay?.addEventListener('click', (e) => {\n    if (e.target === overlay) closeModal();\n  });\n\n  document.addEventListener('keydown', (e) => {\n    if (e.key === 'Escape' && !overlay.classList.contains('hidden')) closeModal();\n  });\n\n  inputName?.addEventListener('input', saveDraftDebounced);\n  inputMessage?.addEventListener('input', saveDraftDebounced);\n\n  attachSubmitHandler();\n  loadReviews();\n  initArtistsButton();\n}\n\ndocument.addEventListener('DOMContentLoaded', initApp);\n","// –ì–õ–û–ë–ê–õ–¨–ù–´–ï SFX –î–õ–Ø –í–°–ï–ì–û –°–ê–ô–¢–ê\n// –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –æ–¥–∏–Ω —Ä–∞–∑ –≤ main.js:  import \"./js/global-sfx.js\";\nimport { UISound } from \"./artists/lib/sound.js\"; // –ø—É—Ç—å –ø–æ–¥ –≤–∞—à –ø—Ä–æ–µ–∫—Ç\n\n// ===== –ö–æ–Ω—Ñ–∏–≥ =====\nconst CLICKABLE_SELECTOR = [\n  'a[href]',\n  'button',\n  '[role=\"button\"]',\n  'input[type=\"button\"]',\n  'input[type=\"submit\"]',\n  'input[type=\"reset\"]',\n  'summary',\n  '.sfx-click'          // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π ¬´–º–∞—Ä–∫–µ—Ä-–∫–ª–∞—Å—Å¬ª\n].join(',');\n\n// –ì–¥–µ –ù–ï –∏–≥—Ä–∞—Ç—å (–ø–æ–ª–∑—É–Ω–∫–∏, –¥—Ä–∞–≥-–∑–æ–Ω—ã –∏ —Ç.–ø.)\nconst IGNORE_SELECTOR = [\n  '.no-sfx',\n  '[data-sfx=\"off\"]',\n  '[disabled],[aria-disabled=\"true\"]',\n  'input[type=\"range\"]',\n  '.am-player__dragzone', // –≤–∞—à–∞ –≤–µ—Ä—Ö–Ω—è—è –∑–æ–Ω–∞ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è –ø–ª–µ–µ—Ä–∞\n].join(',');\n\n// ===== –°–µ—Ä–≤–∏—Å =====\nconst SFX = {\n  enabled: localStorage.getItem('sfx') !== 'off',\n  lastAt: 0,\n  playOnce() {\n    if (!this.enabled) return;\n    const now = performance.now();\n    if (now - this.lastAt < 80) return; // –∞–Ω—Ç–∏-–¥—É–±–ª—å\n    this.lastAt = now;\n    try {\n      UISound?.tap?.(); // –≤–∞—à —Ç–µ–∫—É—â–∏–π –∑–≤—É–∫\n    } catch {\n      // –§–æ–ª–±—ç–∫ –º–∏–Ω–∏-–±–∏–ø–æ–º (–µ—Å–ª–∏ –≤–¥—Ä—É–≥ UISound –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω)\n      try {\n        const ctx = new (window.AudioContext || window.webkitAudioContext)();\n        const o = ctx.createOscillator();\n        const g = ctx.createGain();\n        o.type = 'triangle'; o.frequency.value = 660;\n        g.gain.setValueAtTime(0.06, ctx.currentTime);\n        g.gain.exponentialRampToValueAtTime(0.0001, ctx.currentTime + 0.06);\n        o.connect(g).connect(ctx.destination); o.start(); o.stop(ctx.currentTime + 0.07);\n      } catch {}\n    }\n  },\n};\n\n// –ì–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–æ–≤\ndocument.addEventListener('click', (e) => {\n  // —Ç–æ–ª—å–∫–æ ¬´–Ω–∞—Å—Ç–æ—è—â–∏–µ¬ª –ª–µ–≤—ã–µ –∫–ª–∏–∫–∏\n  if (!e.isTrusted || e.button !== 0 || e.metaKey || e.ctrlKey || e.altKey) return;\n\n  const el = e.target.closest(CLICKABLE_SELECTOR);\n  if (!el) return;\n  if (el.matches(IGNORE_SELECTOR)) return;\n\n  // –ï—Å–ª–∏ —ç–ª–µ–º–µ–Ω—Ç —Ç–∞—â–∏–ª–∏ (drag), –±—Ä–∞—É–∑–µ—Ä –æ–±—ã—á–Ω–æ –Ω–µ –∫–∏–¥–∞–µ—Ç click ‚Äî –Ω–æ –Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π:\n  if (Math.abs((e.movementX || 0)) > 2 || Math.abs((e.movementY || 0)) > 2) return;\n\n  SFX.playOnce();\n}, { capture: true });\n\n// –ö–ª–∞–≤–∏–∞—Ç—É—Ä–Ω–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è (Enter/Space) ‚Äî –¥–ª—è a11y\ndocument.addEventListener('keydown', (e) => {\n  if (!SFX.enabled) return;\n  if (!(e.key === 'Enter' || e.key === ' ')) return;\n\n  const el = e.target.closest(CLICKABLE_SELECTOR);\n  if (!el || el.matches(IGNORE_SELECTOR)) return;\n\n  SFX.playOnce();\n}, { capture: true });\n\n// –ü—É–±–ª–∏—á–Ω—ã–π —Ç—É–º–±–ª–µ—Ä (–º–æ–∂–Ω–æ –ø—Ä–∏–≤—è–∑–∞—Ç—å –∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º)\nwindow.SFX = {\n  enable()  { SFX.enabled = true;  localStorage.setItem('sfx', 'on');  },\n  disable() { SFX.enabled = false; localStorage.setItem('sfx', 'off'); },\n  toggle()  { SFX.enabled ? this.disable() : this.enable(); },\n};\n"],"names":["IS_DEV","logWarn","args","DEFAULT_API_DEV","DEFAULT_API_PROD","API_BASE","__vite_import_meta_env__","api","axios","res","err","toastError","msg","clampNumber","v","min","fallback","n","fetchArtists","page","limit","genre","sort","name","params","s","g","data","artists","totalArtists","pageOut","limitOut","_genresCache","GENRES_TTL","fetchGenres","now","names","out","fetchArtist","id","fetchArtistAlbums","ctx","master","comp","postLP","inited","init","AC","unlock","resume","tap","durNoise","nsrc","nbuf","ch","i","t","bp","hp","ng","osc","og","low","lg","UISound","normId","o","normGenres","NOPHOTO","normArtist","normTrack","normAlbum","a","rawTracks","_fetchArtists","_fetchGenres","_fetchArtist","obj","_fetchArtistAlbums","STORAGE_KEY","initial","state","storageLoaded","listeners","canUseStorage","k","loadFromStorage","raw","saveToStorage","notify","snap","fn","subscribe","ArtistState","p","on","getState","setState","patch","next","depth","savedY","lockScroll","unlockScroll","force","emergencyUnlock","_instance","loadYTAPI","rej","isIOS","getYouTubeId","urlOrId","u","m","clamp","b","shuffleArr","arr","j","fmtTimeSec","sec","createMiniPlayer","dock","bubble","host","btnClose","btnHide","btnPlay","btnPrev","btnNext","btnMute","vol","prog","tCur","tDur","dragzone","aYTlink","yt","ready","duration","timer","muted","volVal","userSeeking","queue","qi","loop","DOCK_KEY","dockDrag","BUBBLE_KEY","bubbleDragging","bubbleStart","_bubblePos","recentBubbleDrag","watchdogId","showBubble","useSaved","e","uiMin","r","dx","dy","clampBubbleToViewport","persistBubblePos","restoreBubblePos","hideBubble","setBubblePulse","isPlaying","setBubbleAmp","amp","margin","w","h","left","top","r0","pos","size","uiPlayIcon","uiMuteIcon","isMuted","uiShow","isMin","uiSetTime","cur","dur","clearTimer","startTimer","clearWatchdog","skipWithDelay","ms","autoNext","ensureYT","playByIndex","idx","opts","restoreDockPos","getVP","clampDock","rect","beginDockDrag","moveDockDrag","endDockDrag","open","openQueue","list","ids","start","reveal","prev","isActive","isMinimized","hasQueue","minimize","close","overlay","dialogEl","stageEl","imgEl","linkEl","closeBtn","backdropEl","isPanning","startX","startY","curX","curY","scale","baseW","baseH","stageW","stageH","activePointers","pinchActive","pinchBaseDist","pinchBaseScale","max","dist","midpoint","ensureZoom","bar","closeZoom","onWheel","toggleZoom","onPointerDown","onPointerMove","onPointerUpCancel","isZoomOpen","measureStage","applyTransform","measureBase","clampPan","contentW","contentH","maxX","maxY","openZoom","src","alt","doMeasure","newScale","pivot","center","factor","p1","p2","d","mid","cache","getPrefetched","initPrefetch","root","grid","hoverTimer","hoverId","schedulePrefetch","artist","albums","btn","SPRITE_RAW","SPRITE_CONTAINER_ID","ensureSpriteMounted","doc","wrap","icon","cls","FALLBACK_IMG","ensureModalShell","modal","fmtTime","msLike","total","years","isDirectYouTubeVideo","href","buildTrackLink","artistName","direct","title","q","x","trackRow","link","dedupe","isMixRadioOn","createArtistModal","rootEl","modalBody","modalClose","dialog","player","scrollTopBtn","onDialogScroll","onWinResize","placeScrollTop","right","ensureScrollTop","onEsc","links","hrefs","url","mix","zoomImg","render","artistId","cached","img","country","members","sex","bio","genres","albumsMarkup","alb","tracks","tr","openFor","RUNTIME_STYLE_ID","ensureRuntimeStyles","css","style","DEFAULT_LIMIT","looksLikeImageUrl","computeListLimit","ensureViewToggle","cleanText","yearsLabel","end","topGenres","composeBio","facts","gs","yrs","initGrid","panel","toggleBtn","resetBtn","resetBtnSm","viewToggle","searchInput","searchBtn","ddSort","ddSortBtn","ddSortList","ddGenre","ddGenreBtn","ddGenreList","pager","empty","sectionRoot","modalApi","reqId","lastAppliedLimit","show","el","hide","isDesktop","byName","isListMode","updateViewButtonUI","listOn","applyAutoLimitForCurrentMode","resetPage","want","loadArtists","syncPanelMode","st","scrollToGridTop","applyEmpty","resetGridInlineStyles","buildSkeletonCard","renderSkeleton","count","afterImagesFadeIn","done","attachImgFallbacks","gridCleanupTimer","lockGridHeight","hh","unlockGridHeight","swapGridContent","renderFn","newH","onEnd","buildCard","rawImg","tags","renderGrid","renderPager","totalPages","label","dis","act","win","from","to","loadGenres","allowRetry","myId","server","closeDropdowns","except","dd","ul","toggleDropdown","li","doSearch","resetAll","parseQuery","buildQuery","initRouter","urlState","changed","lastQS","qs","initArtists","mountPlayerPatch","NP","handle","dragging","baseLeft","baseTop","point","ev","onDown","onMove","onUp","target","installMixRadioMenu","buttonSelector","STYLE_ID","pop","sleepTimer","closePop","onDocClick","placeUnderButton","vw","px8","setSleep","minutes","clickGenre","buildPop","chip","uniq","shuffle","SEED_IDS","LS_KEY_POOL","LS_KEY_LAST","readPoolLS","savePoolLS","addToPoolLS","collectFromDOM","installCollector","mutations","added","buildPool","mem","dom","startMixRadio","pool","order","last","ensureMenu","refs","openMenu","closeMenu","resolve","getHeaderOffset","applyScrollPadding","smoothScroll","targetHref","headerOffset","targetY","diff","t0","ease","step","ts","logo","navLinks","linkTargets","rawId","currentEl","setActiveByEl","lockUntil","LOCK_MS","isLocked","io","initScrollSpy","rootMargin","visibleRatio","entries","en","best","_","exploreBtn","targetId","FEEDBACKS_URL","scrollY","swiper","openBtn","form","container","inputName","inputMessage","formRating","debounce","delay","createStars","rating","star","saveToLocalStorage","hoveredStar","savedRating","upTo","index","message","draft","saveDraftDebounced","dataFromLocalStorage","saved","resetLocalStorage","openModal","closeModal","initSwiper","Swiper","sw","_current","middle","curr","dot","pag","loadReviews","wrapper","fb","stars","slide","iziToast","attachSubmitHandler","response","initArtistsButton","artistsLinks","artistsSection","initApp","CLICKABLE_SELECTOR","IGNORE_SELECTOR","SFX"],"mappings":"w0BAUMA,GACJ,yBAAyB,KAAK,SAAS,QAAQ,IAC9C,SAAS,gBAAgB,aAAa,UAAU,GAAK,IAAI,gBAAkB,MAExEC,GAAU,IAAIC,IAAS,CAAMF,IAAQ,QAAQ,KAAK,GAAGE,CAAI,CAAG,EAQ5DC,GAAkB,OAClBC,GAAmB,sCAEnBC,GACJ,SAAS,gBAAgB,aAAa,UAAU,GAC/C,OAAO,YAAgB,KAAeC,IAAmB,SACzDN,GAASG,GAAkBC,IAKxBG,GAAMC,GAAM,OAAO,CACvB,QAASH,GACT,QAAS,KACT,QAAS,CAAE,OAAU,kBAAA,CACvB,CAAC,EAGDE,GAAI,aAAa,SAAS,IACvBE,GAAQA,EACRC,IACCT,GAAQ,oBAAqBS,GAAK,SAAWA,CAAG,EACzC,QAAQ,OAAOA,CAAG,EAE7B,EAKA,SAASC,GAAWC,EAAK,CACvB,GAAI,CAAE,OAAO,SAAS,MAAMA,CAAG,CAAG,MAAQ,CAAC,CAC7C,CAGA,SAASC,GAAYC,EAAGC,EAAKC,EAAU,CACrC,MAAMC,EAAI,OAAOH,CAAC,EAClB,OAAO,OAAO,SAASG,CAAC,EAAI,KAAK,IAAIF,EAAKE,CAAC,EAAID,CACjD,CAWA,eAAsBE,GACpB,CAAE,KAAAC,EAAO,EAAG,MAAAC,EAAQ,EAAG,MAAAC,EAAQ,GAAI,KAAAC,EAAO,GAAI,KAAAC,EAAO,EAAA,EAAO,CAAA,EAC5D,CACA,GAAI,CACF,MAAMC,EAAS,CACb,KAAMX,GAAYM,EAAM,EAAG,CAAC,EAC5B,MAAON,GAAYO,EAAO,EAAG,CAAC,CAAA,EAG1BK,EAAI,OAAOH,GAAQ,EAAE,EAAE,YAAA,GACzBG,IAAM,OAASA,IAAM,YAAe,SAAWA,GAEnD,MAAMC,EAAI,OAAOL,GAAS,EAAE,EAAE,KAAA,EAC1BK,GAAKA,IAAM,eAAcF,EAAO,MAAQE,GAE5C,MAAMT,EAAI,OAAOM,GAAQ,EAAE,EAAE,KAAA,EACzBN,EAAE,QAAU,IAAGO,EAAO,KAAOP,GAEjC,KAAM,CAAE,KAAAU,GAAS,MAAMpB,GAAI,IAAI,WAAY,CAAE,OAAAiB,EAAQ,EAG/CI,EAAU,MAAM,QAAQD,GAAM,OAAO,EAAIA,EAAK,QACnC,MAAM,QAAQA,CAAI,EAAaA,EAC/B,CAAA,EACXE,EAAehB,GAAYc,GAAM,aAAc,EAAGC,EAAQ,MAAM,EAChEE,EAAWjB,GAAYc,GAAM,KAAM,EAAGH,EAAO,IAAI,EACjDO,EAAWlB,GAAYc,GAAM,MAAO,EAAGH,EAAO,KAAK,EAEzD,MAAO,CAAE,QAAAI,EAAS,aAAAC,EAAc,KAAMC,EAAS,MAAOC,CAAA,CACxD,OAASrB,EAAK,CACZ,OAAAT,GAAQ,6BAA8BS,GAAK,SAAWA,CAAG,EACzDC,GAAW,kDAAkD,EACtD,CAAE,QAAS,CAAA,EAAI,aAAc,EAAG,KAAM,EAAG,MAAOE,GAAYO,EAAO,EAAG,CAAC,CAAA,CAChF,CACF,CAGA,IAAIY,GAAe,CAAE,GAAI,EAAG,KAAM,CAAA,CAAC,EACnC,MAAMC,GAAa,IAAS,IAM5B,eAAsBC,IAAc,CAClC,GAAI,CACF,MAAMC,EAAM,KAAK,IAAA,EACjB,GAAIH,GAAa,KAAK,QAAUG,EAAMH,GAAa,GAAKC,GACtD,OAAOD,GAAa,KAAK,MAAA,EAG3B,KAAM,CAAE,KAAAL,CAAA,EAAS,MAAMpB,GAAI,IAAI,SAAS,EAElC6B,GADM,MAAM,QAAQT,CAAI,EAAIA,EAAQA,GAAM,QAAU,CAAA,GAEvD,IAAKD,GACJ,OAAOA,GAAM,SACTA,EACAA,GAAG,MAAQA,GAAG,OAASA,GAAG,OAASA,GAAG,OAAS,EAAA,EAEpD,OAAO,OAAO,EAEXW,EAAM,CAAC,aAAc,GADd,CAAC,GAAG,IAAI,IAAID,CAAK,CAAC,CACG,EAElC,OAAAJ,GAAe,CAAE,GAAIG,EAAK,KAAME,CAAA,EACzBA,CACT,OAAS3B,EAAK,CACZ,OAAAT,GAAQ,4BAA6BS,GAAK,SAAWA,CAAG,EACxDC,GAAW,6BAA6B,EACjC,CAAC,YAAY,CACtB,CACF,CAOA,eAAsB2B,GAAYC,EAAI,CACpC,GAAI,CAACA,GAAMA,IAAO,EAAG,OAAO,KAC5B,GAAI,CACF,KAAM,CAAE,KAAAZ,GAAS,MAAMpB,GAAI,IAAI,YAAYgC,CAAE,EAAE,EAE/C,OAAIZ,GAAQ,CAAC,MAAM,QAAQA,CAAI,EAAUA,EACrC,MAAM,QAAQA,CAAI,GAAKA,EAAK,OAAeA,EAAK,CAAC,EACjD,MAAM,QAAQA,GAAM,OAAO,GAAKA,EAAK,QAAQ,OAAeA,EAAK,QAAQ,CAAC,EACvE,IACT,OAASjB,EAAK,CACZ,OAAAT,GAAQ,4BAA6BS,GAAK,SAAWA,CAAG,EACxDC,GAAW,+BAA+B,EACnC,IACT,CACF,CAOA,eAAsB6B,GAAkBD,EAAI,CAC1C,GAAI,CAACA,GAAMA,IAAO,QAAU,CAAA,EAC5B,GAAI,CACF,KAAM,CAAE,KAAAZ,GAAS,MAAMpB,GAAI,IAAI,YAAYgC,CAAE,SAAS,EAKtD,OAAI,MAAM,QAAQZ,CAAI,EAAUA,EAC5B,MAAM,QAAQA,GAAM,UAAU,EAAUA,EAAK,WAC7C,MAAM,QAAQA,GAAM,MAAM,EAAUA,EAAK,OACzC,MAAM,QAAQA,GAAM,KAAK,EAAUA,EAAK,MAErC,CAAA,CACT,OAASjB,EAAK,CACZ,OAAAT,GAAQ,kCAAmCS,GAAK,SAAWA,CAAG,EAC9DC,GAAW,+BAA+B,EACnC,CAAA,CACT,CACF,CCzLA,IAAI8B,EAAKC,GAAQC,GAAMC,GACnBC,GAAS,GAEb,SAASC,IAAO,CACd,GAAID,GAAQ,OACZ,MAAME,EAAK,OAAO,cAAgB,OAAO,mBACzC,GAAI,CAACA,EAAI,OACTN,EAAM,IAAIM,EAEVJ,GAAOF,EAAI,yBAAwB,EACnCE,GAAK,UAAU,MAAQ,IACvBA,GAAK,KAAK,MAAQ,GAClBA,GAAK,MAAM,MAAQ,EACnBA,GAAK,OAAO,MAAQ,KACpBA,GAAK,QAAQ,MAAQ,IAErBC,GAASH,EAAI,mBAAkB,EAC/BG,GAAO,KAAO,UACdA,GAAO,UAAU,MAAQ,KACzBA,GAAO,EAAE,MAAQ,GAEjBF,GAASD,EAAI,WAAU,EACvBC,GAAO,KAAK,MAAQ,IAEpBA,GAAO,QAAQE,EAAM,EACrBA,GAAO,QAAQD,EAAI,EACnBA,GAAK,QAAQF,EAAI,WAAW,EAG5B,MAAMO,EAAS,IAAM,CACnB,GAAI,CAAEP,EAAI,OAAM,CAAI,MAAQ,CAAC,CAC7B,OAAO,oBAAoB,cAAeO,CAAM,EAChD,OAAO,oBAAoB,UAAWA,CAAM,EAC5C,OAAO,oBAAoB,aAAcA,CAAM,CACjD,EACA,OAAO,iBAAiB,cAAeA,EAAQ,CAAE,KAAM,GAAM,QAAS,GAAM,EAC5E,OAAO,iBAAiB,UAAWA,EAAQ,CAAE,KAAM,GAAM,EACzD,OAAO,iBAAiB,aAAcA,EAAQ,CAAE,KAAM,GAAM,QAAS,GAAM,EAE3EH,GAAS,EACX,CAEA,SAASI,IAAS,CAAMR,GAAOA,EAAI,QAAU,aAAaA,EAAI,OAAM,CAAI,CAExE,SAASS,IAAM,CAEb,GADKL,IAAQC,GAAI,EACb,CAACL,EAAK,OACVQ,GAAM,EACN,MAAMd,EAAMM,EAAI,YAAc,KAGxBU,EAAW,KACXC,EAAOX,EAAI,mBAAkB,EAC7BY,EAAOZ,EAAI,aAAa,EAAG,KAAK,IAAI,GAAKA,EAAI,WAAaU,EAAY,CAAC,EAAGV,EAAI,UAAU,EACxFa,EAAKD,EAAK,eAAe,CAAC,EAChC,QAASE,EAAI,EAAGA,EAAID,EAAG,OAAQC,IAAK,CAClC,MAAMC,EAAID,EAAID,EAAG,OACjBA,EAAGC,CAAC,GAAK,KAAK,OAAM,EAAK,EAAI,GAAK,KAAK,IAAI,EAAIC,EAAG,CAAC,CACrD,CACAJ,EAAK,OAASC,EAEd,MAAMI,EAAKhB,EAAI,mBAAkB,EACjCgB,EAAG,KAAO,WAAYA,EAAG,UAAU,MAAQ,KAAMA,EAAG,EAAE,MAAQ,GAC9D,MAAMC,EAAKjB,EAAI,mBAAkB,EACjCiB,EAAG,KAAO,WAAYA,EAAG,UAAU,MAAQ,IAAKA,EAAG,EAAE,MAAQ,GAE7D,MAAMC,EAAKlB,EAAI,WAAU,EACzBkB,EAAG,KAAK,eAAe,KAAQxB,CAAG,EAClCwB,EAAG,KAAK,wBAAwB,IAAMxB,EAAM,IAAK,EACjDwB,EAAG,KAAK,6BAA6B,KAAQxB,EAAM,IAAK,EAExDiB,EAAK,QAAQK,CAAE,EAAGA,EAAG,QAAQC,CAAE,EAAGA,EAAG,QAAQC,CAAE,EAAGA,EAAG,QAAQjB,EAAM,EACnEU,EAAK,MAAMjB,CAAG,EAAGiB,EAAK,KAAKjB,EAAM,GAAI,EAGrC,MAAMyB,EAAMnB,EAAI,iBAAgB,EAChCmB,EAAI,KAAO,WAAYA,EAAI,UAAU,eAAe,KAAMzB,CAAG,EAC7D,MAAM0B,EAAKpB,EAAI,WAAU,EACzBoB,EAAG,KAAK,eAAe,KAAQ1B,CAAG,EAClC0B,EAAG,KAAK,wBAAwB,GAAM1B,EAAM,IAAK,EACjD0B,EAAG,KAAK,6BAA6B,KAAQ1B,EAAM,GAAI,EACvDyB,EAAI,QAAQC,CAAE,EAAGA,EAAG,QAAQnB,EAAM,EAClCkB,EAAI,MAAMzB,CAAG,EAAGyB,EAAI,KAAKzB,EAAM,IAAK,EAGpC,MAAM2B,EAAMrB,EAAI,iBAAgB,EAChCqB,EAAI,KAAO,OAAQA,EAAI,UAAU,eAAe,IAAK3B,CAAG,EACxD,MAAM4B,EAAKtB,EAAI,WAAU,EACzBsB,EAAG,KAAK,eAAe,KAAQ5B,CAAG,EAClC4B,EAAG,KAAK,wBAAwB,IAAM5B,EAAM,IAAK,EACjD4B,EAAG,KAAK,6BAA6B,KAAQ5B,EAAM,IAAK,EACxD2B,EAAI,QAAQC,CAAE,EAAGA,EAAG,QAAQrB,EAAM,EAClCoB,EAAI,MAAM3B,CAAG,EAAG2B,EAAI,KAAK3B,EAAM,IAAK,CACtC,CAEA,SAAShB,IAAO,CAEd,GADK0B,IAAQC,GAAI,EACb,CAACL,EAAK,OACVQ,GAAM,EACN,MAAMd,EAAMM,EAAI,YAAc,KACxBmB,EAAMnB,EAAI,iBAAgB,EAChCmB,EAAI,KAAO,WAAYA,EAAI,UAAU,eAAe,KAAMzB,CAAG,EAC7D,MAAMT,EAAIe,EAAI,WAAU,EACxBf,EAAE,KAAK,eAAe,KAAQS,CAAG,EACjCT,EAAE,KAAK,wBAAwB,IAAMS,EAAM,IAAK,EAChDT,EAAE,KAAK,6BAA6B,KAAQS,EAAM,GAAI,EACtDyB,EAAI,QAAQlC,CAAC,EAAGA,EAAE,QAAQgB,EAAM,EAChCkB,EAAI,MAAMzB,CAAG,EAAGyB,EAAI,KAAKzB,EAAM,IAAK,CACtC,CAEO,MAAM6B,EAAU,CAAE,IAAAd,GAAK,KAAA/B,EAAI,ECvG5B8C,GAAUC,GAAMA,GAAG,UAAYA,GAAG,IAAMA,GAAG,KAAOA,GAAG,UAAY,GAEjEC,GAAcD,GACd,MAAM,QAAQA,GAAG,MAAM,EAAUA,EAAE,OACnC,OAAOA,GAAG,UAAa,UAAYA,EAAE,SAAS,KAAI,EAC7CA,EAAE,SAAS,MAAM,MAAM,EAAE,OAAO,OAAO,EAC5CA,GAAG,MAAc,CAACA,EAAE,KAAK,EACtB,CAAA,EAGHE,GAAU,oDAEVC,GAAa,CAACH,EAAI,MAAQ,CAC9B,GAAID,GAAOC,CAAC,EACZ,KAAMA,EAAE,WAAaA,EAAE,MAAQ,iBAC/B,MAAOA,EAAE,gBAAkBA,EAAE,OAASA,EAAE,OAASA,EAAE,OAASE,GAC5D,QAASF,EAAE,YAAcA,EAAE,SAAW,MACtC,QAASA,EAAE,YAAcA,EAAE,SAAW,MACtC,OAASA,EAAE,WAAaA,EAAE,KAAO,MACjC,UAAWA,EAAE,gBAAkBA,EAAE,WAAaA,EAAE,OAAS,GACzD,OAAQC,GAAWD,CAAC,EACpB,WAAYA,EAAE,eAAiBA,EAAE,YAAcA,EAAE,WAAa,KAC9D,UAAYA,EAAE,kBAAoBA,EAAE,aAAeA,EAAE,eAAiBA,EAAE,SAAW,IACrF,GAEMI,GAAY,CAACd,EAAI,MAAQ,CAC7B,MAAOA,EAAE,UAAYA,EAAE,OAASA,EAAE,MAAQ,IAC1C,SAAU,OAAOA,EAAE,aAAeA,EAAE,UAAYA,EAAE,MAAQ,CAAC,EAE3D,QACEA,EAAE,aACFA,EAAE,SACFA,EAAE,aACFA,EAAE,KACFA,EAAE,OACFA,EAAE,MACFA,EAAE,MACF,EACJ,GAEMe,GAAY,CAACC,EAAI,KAAO,CAC5B,MAAMC,EACJ,MAAM,QAAQD,EAAE,MAAM,EAAIA,EAAE,OAC5B,MAAM,QAAQA,EAAE,KAAK,EAAKA,EAAE,MAC5B,MAAM,QAAQA,EAAE,KAAK,EAAKA,EAAE,MAAS,CAAA,EACvC,MAAO,CACL,MAAOA,EAAE,UAAYA,EAAE,OAASA,EAAE,MAAQ,QAC1C,OAAQC,EAAU,IAAIH,EAAS,CACnC,CACA,EAGO,eAAepD,GAAaM,EAAQ,CACzC,MAAMf,EAAM,MAAMiE,GAAclD,CAAM,EAIhCI,GAHO,MAAM,QAAQnB,GAAK,OAAO,EAAIA,EAAI,QAClC,MAAM,QAAQA,CAAG,EAAaA,EAC9B,CAAA,GACQ,IAAI4D,EAAU,EAC7BxC,EAAe,OAAOpB,GAAK,cAAgBA,GAAK,OAASmB,EAAQ,MAAM,EAC7E,MAAO,CAAE,QAAAA,EAAS,aAAAC,CAAY,CAChC,CAEO,eAAeK,IAAc,CAClC,MAAMzB,EAAM,MAAMkE,GAAY,EAC9B,OAAI,MAAM,QAAQlE,CAAG,EAAUA,EAC3B,MAAM,QAAQA,GAAK,MAAM,EAAUA,EAAI,OACpC,CAAA,CACT,CAEO,eAAe6B,GAAYC,EAAI,CACpC,MAAM9B,EAAM,MAAMmE,GAAarC,CAAE,EAC3BsC,EAAM,MAAM,QAAQpE,CAAG,EAAIA,EAAI,CAAC,EAC1B,MAAM,QAAQA,GAAK,OAAO,EAAIA,EAAI,QAAQ,CAAC,EAC3CA,EACZ,OAAOoE,EAAMR,GAAWQ,CAAG,EAAI,IACjC,CAEO,eAAerC,GAAkBD,EAAI,CAC1C,MAAM9B,EAAM,MAAMqE,GAAmBvC,CAAE,EAKvC,OAJa,MAAM,QAAQ9B,CAAG,EAAIA,EACrB,MAAM,QAAQA,GAAK,MAAM,EAAIA,EAAI,OACjC,MAAM,QAAQA,GAAK,KAAK,EAAKA,EAAI,MACjC,CAAA,GACD,IAAI8D,EAAS,CAC3B,CC3FA,MAAMQ,GAAc,iBAEdC,GAAU,CACd,KAAM,EACN,MAAO,EACP,MAAO,GACP,KAAM,GACN,EAAG,GACH,kBAAmB,EACrB,EAGA,IAAIC,EAAQ,CAAE,GAAGD,EAAO,EAGpBE,GAAgB,GACpB,MAAMC,GAAY,IAAI,IAGtB,SAASC,IAAgB,CACvB,GAAI,CACF,MAAMC,EAAI,YACV,oBAAa,QAAQA,EAAG,GAAG,EAC3B,aAAa,WAAWA,CAAC,EAClB,EACT,MAAQ,CACN,MAAO,EACT,CACF,CAEA,SAASC,IAAkB,CACzB,GAAI,CAAAJ,KACJA,GAAgB,GACZ,EAACE,GAAa,GAElB,GAAI,CACF,MAAMG,EAAM,aAAa,QAAQR,EAAW,EAC5C,GAAI,CAACQ,EAAK,OACV,MAAMV,EAAM,KAAK,MAAMU,CAAG,EAC1BN,EAAQ,CACN,KAAM,KAAK,IAAI,EAAG,OAAOJ,GAAK,IAAI,GAAKG,GAAQ,IAAI,EACnD,MAAO,KAAK,IAAI,EAAG,OAAOH,GAAK,KAAK,GAAKG,GAAQ,KAAK,EACtD,MAAO,OAAOH,GAAK,OAASG,GAAQ,KAAK,EACzC,KAAM,OAAOH,GAAK,MAAQG,GAAQ,IAAI,EACtC,EAAG,OAAOH,GAAK,GAAKG,GAAQ,CAAC,EAC7B,kBAAmB,CAAC,CAACH,GAAK,iBAChC,CACE,MAAQ,CAER,CACF,CAEA,SAASW,IAAgB,CACvB,GAAI,GAACN,IAAiB,CAACE,MACvB,GAAI,CACF,aAAa,QAAQL,GAAa,KAAK,UAAUE,CAAK,CAAC,CACzD,MAAQ,CAER,CACF,CAGA,SAASQ,IAAS,CAChB,MAAMC,EAAO,CAAE,GAAGT,CAAK,EACvB,UAAWU,KAAMR,GACf,GAAI,CAAEQ,EAAGD,CAAI,CAAG,MAAQ,CAAC,CAE7B,CAGO,SAASE,GAAUD,EAAI,CAC5B,OAAI,OAAOA,GAAO,WAAmB,IAAM,CAAC,GAC5CR,GAAU,IAAIQ,CAAE,EACT,IAAMR,GAAU,OAAOQ,CAAE,EAClC,CAWA,MAAME,EAAc,CAClB,KAAM,CACJ,OAAAP,GAAe,EACR,CAAE,GAAGL,CAAK,CACnB,EACA,QAAQa,EAAG,CACTR,GAAe,EACfL,EAAM,KAAO,KAAK,IAAI,EAAG,OAAOa,CAAC,GAAK,CAAC,EACvCN,GAAa,EAAIC,GAAM,CACzB,EACA,SAASxE,EAAG,CACVqE,GAAe,EACfL,EAAM,MAAQ,KAAK,IAAI,EAAG,OAAOhE,CAAC,GAAK+D,GAAQ,KAAK,EACpDQ,GAAa,EAAIC,GAAM,CACzB,EACA,SAAS3E,EAAG,CACVwE,GAAe,EACfL,EAAM,MAAQnE,GAAK,GACnB0E,GAAa,EAAIC,GAAM,CACzB,EACA,QAAQ3E,EAAG,CACTwE,GAAe,EACfL,EAAM,KAAOnE,GAAK,GAClB0E,GAAa,EAAIC,GAAM,CACzB,EACA,SAAS3E,EAAG,CACVwE,GAAe,EACfL,EAAM,EAAInE,GAAK,GACf0E,GAAa,EAAIC,GAAM,CACzB,EACA,eAAeM,EAAI,CACjBT,GAAe,EACfL,EAAM,kBAAoB,CAAC,CAACc,EAC5BP,GAAa,EAAIC,GAAM,CACzB,EACA,OAAQ,CACNH,GAAe,EACfL,EAAQ,CAAE,GAAGD,EAAO,EACpBQ,GAAa,EAAIC,GAAM,CACzB,CACF,EAOaO,GAAW,IAAMH,EAAY,IAAG,EAEhCI,GAAW,CAACC,EAAQ,KAAO,CACtCZ,GAAe,EACf,MAAMa,EAAO,CAAE,GAAGlB,CAAK,EAEvB,MAAI,SAAUiB,IAAQC,EAAK,KAAQ,KAAK,IAAI,EAAG,OAAOD,EAAM,IAAI,GAAM,CAAC,GACnE,UAAWA,IAAOC,EAAK,MAAQ,KAAK,IAAI,EAAG,OAAOD,EAAM,KAAK,GAAKlB,GAAQ,KAAK,GAC/E,UAAWkB,IAAOC,EAAK,MAAQ,OAAOD,EAAM,OAAS,EAAE,GACvD,SAAUA,IAAQC,EAAK,KAAQ,OAAOD,EAAM,MAAS,EAAE,GACvD,MAAOA,IAAWC,EAAK,EAAQ,OAAOD,EAAM,GAAS,EAAE,GACvD,sBAAuBA,IAAOC,EAAK,kBAAoB,CAAC,CAACD,EAAM,mBAEnEjB,EAAQkB,EACRX,GAAa,EAAIC,GAAM,EAChBI,EAAY,IAAG,CACxB,EAaAP,KClKA,IAAIc,GAAQ,EACRC,GAAS,EAEN,SAASC,IAAa,CAC3B,GAAIF,OAAY,EAAG,CACjBC,GAAS,OAAO,SAAW,SAAS,gBAAgB,WAAa,EACjE,MAAM5E,EAAI,SAAS,KAAK,MACxBA,EAAE,SAAW,QACbA,EAAE,IAAM,IAAI4E,EAAM,KAClB5E,EAAE,KAAO,IACTA,EAAE,MAAQ,IACVA,EAAE,MAAQ,OACV,SAAS,KAAK,UAAU,IAAI,eAAe,CAC7C,CACF,CAEO,SAAS8E,GAAaC,EAAQ,GAAO,CAE1C,GADIA,IAAOJ,GAAQ,GACfA,GAAQ,GAAK,EAAEA,KAAU,EAAG,CAC9B,MAAM3E,EAAI,SAAS,KAAK,MACxBA,EAAE,SAAWA,EAAE,IAAMA,EAAE,KAAOA,EAAE,MAAQA,EAAE,MAAQ,GAClD,OAAO,SAAS,EAAG4E,EAAM,EACzB,SAAS,KAAK,UAAU,OAAO,eAAe,CAChD,CACF,CAGO,SAASI,IAAkB,CAAEF,GAAa,EAAI,CAAG,CACpD,OAAO,OAAW,MACpB,OAAO,eAAiBE,GAExB,OAAO,iBAAiB,WAAY,IAAMA,GAAe,CAAE,GC/B7D,IAAIC,GAAY,KAGhB,SAASC,IAAY,CACnB,OAAI,OAAO,IAAM,OAAO,GAAG,OAAe,QAAQ,QAAO,GACrDA,GAAU,KACdA,GAAU,GAAK,IAAI,QAAQ,CAAClG,EAAKmG,IAAQ,CACvC,MAAMnF,EAAI,SAAS,cAAc,QAAQ,EACzCA,EAAE,IAAM,qCACRA,EAAE,QAAU,IAAMmF,EAAI,IAAI,MAAM,oBAAoB,CAAC,EACrD,SAAS,KAAK,YAAYnF,CAAC,EAC3B,MAAM+B,EAAI,WAAW,IAAMoD,EAAI,IAAI,MAAM,gBAAgB,CAAC,EAAG,IAAK,EAClE,OAAO,wBAA0B,IAAM,CAAE,aAAapD,CAAC,EAAG/C,EAAG,CAAI,CACnE,CAAC,GACMkG,GAAU,GACnB,CAEA,MAAME,GAAQ,mBAAmB,KAAK,UAAU,SAAS,EACzD,SAASC,GAAaC,EAAS,CAC7B,GAAI,CAACA,EAAS,MAAO,GACrB,GAAI,cAAc,KAAKA,CAAO,EAAG,OAAOA,EACxC,GAAI,CACF,MAAMC,EAAI,IAAI,IAAID,EAAS,SAAS,IAAI,EACxC,GAAI,aAAa,KAAKC,EAAE,QAAQ,EAAG,OAAOA,EAAE,SAAS,MAAM,CAAC,EAC5D,GAAIA,EAAE,aAAa,IAAI,GAAG,EAAG,OAAOA,EAAE,aAAa,IAAI,GAAG,EAC1D,MAAMC,EAAID,EAAE,SAAS,MAAM,+BAA+B,EAC1D,OAAOC,EAAIA,EAAE,CAAC,EAAI,EACpB,MAAQ,CAAE,MAAO,EAAI,CACvB,CACA,MAAMC,GAAQ,CAACpG,EAAG0D,EAAG2C,IAAM,KAAK,IAAIA,EAAG,KAAK,IAAI3C,EAAG1D,CAAC,CAAC,EAC/CsG,GAAcC,GAAQ,CAC1B,MAAM7C,EAAI6C,EAAI,MAAK,EACnB,QAAS9D,EAAIiB,EAAE,OAAS,EAAGjB,EAAI,EAAGA,IAAK,CACrC,MAAM+D,EAAK,KAAK,OAAM,GAAM/D,EAAI,GAAM,EACtC,CAACiB,EAAEjB,CAAC,EAAGiB,EAAE8C,CAAC,CAAC,EAAI,CAAC9C,EAAE8C,CAAC,EAAG9C,EAAEjB,CAAC,CAAC,CAC5B,CACA,OAAOiB,CACT,EACA,SAAS+C,GAAWC,EAAK,CACvBA,EAAM,KAAK,IAAI,EAAG,KAAK,MAAM,OAAOA,CAAG,GAAK,CAAC,CAAC,EAC9C,MAAMP,EAAI,KAAK,MAAMO,EAAM,EAAE,EACvB/F,EAAI,OAAO+F,EAAM,EAAE,EAAE,SAAS,EAAG,GAAG,EAC1C,MAAO,GAAGP,CAAC,IAAIxF,CAAC,EAClB,CAGO,SAASgG,IAAmB,CACjC,GAAIf,GAAW,OAAOA,GAGtB,MAAMgB,EAAO,SAAS,cAAc,KAAK,EACzCA,EAAK,UAAY,YACjBA,EAAK,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA8BjB,SAAS,KAAK,YAAYA,CAAI,EAE9B,IAAIC,EAAS,KAGb,MAAMC,EAAWF,EAAK,cAAc,iBAAiB,EAC/CG,EAAWH,EAAK,cAAc,mBAAmB,EACjDI,EAAWJ,EAAK,cAAc,kBAAkB,EAChDK,EAAWL,EAAK,cAAc,kBAAkB,EAChDM,EAAWN,EAAK,cAAc,kBAAkB,EAChDO,EAAWP,EAAK,cAAc,kBAAkB,EAChDQ,EAAWR,EAAK,cAAc,kBAAkB,EAChDS,EAAWT,EAAK,cAAc,oBAAoB,EAClDU,EAAWV,EAAK,cAAc,sBAAsB,EACpDW,EAAWX,EAAK,cAAc,iBAAiB,EAC/CY,EAAWZ,EAAK,cAAc,iBAAiB,EAC/Ca,EAAWb,EAAK,cAAc,sBAAsB,EACpDc,EAAWd,EAAK,cAAc,oBAAoB,EAGxD,IAAIe,EAAK,KACLC,EAAQ,GACRC,EAAW,EACXC,EAAQ,KACRC,EAAQ,GACRC,EAAS,GACTC,EAAc,GAEdC,EAAQ,CAAA,EACRC,EAAK,GACLC,EAAO,GAEX,MAAMC,GAAW,cACjB,IAAIC,EAAW,KAEf,MAAMC,GAAa,eACnB,IAAIC,EAAiB,GACjBC,EAAc,KACdC,EAAa,KAGbC,GAAmB,GAEnBC,GAAa,KAEb7C,KACFsB,EAAI,SAAW,GACfA,EAAI,MAAQ,sCAId,SAASwB,GAAWC,EAAW,GAAM,CAC9BjC,IACHA,EAAS,SAAS,cAAc,QAAQ,EACxCA,EAAO,UAAY,8BACnBA,EAAO,KAAO,SACdA,EAAO,aAAa,aAAc,aAAa,EAC/CA,EAAO,MAAM,QAAU,OACvBA,EAAO,UAAY,8BACnB,SAAS,KAAK,YAAYA,CAAM,EAGhCA,EAAO,iBAAiB,QAAUkC,GAAM,CACtC,GAAIJ,GAAkB,CACpBA,GAAmB,GACnBI,EAAE,eAAc,EAChBA,EAAE,gBAAe,EACjB,MACF,CACAC,GAAM,EAAK,CACb,CAAC,EAEDnC,EAAO,iBAAiB,cAAgBkC,GAAM,CAC5CP,EAAiB,GACjBG,GAAmB,GACnB,GAAI,CAAE9B,EAAO,kBAAkBkC,EAAE,SAAS,CAAG,MAAQ,CAAC,CACtD,MAAME,EAAIpC,EAAO,sBAAqB,EACtC4B,EAAc,CAAE,EAAGM,EAAE,QAAS,EAAGA,EAAE,QAAS,KAAME,EAAE,KAAM,IAAKA,EAAE,GAAG,CACtE,CAAC,EACDpC,EAAO,iBAAiB,cAAgBkC,GAAM,CAC5C,GAAI,CAACN,EAAa,OAClB,MAAMS,EAAKH,EAAE,QAAUN,EAAY,EAC7BU,EAAKJ,EAAE,QAAUN,EAAY,EAC/B,KAAK,IAAIS,CAAE,EAAI,KAAK,IAAIC,CAAE,EAAI,IAAGX,EAAiB,IACtD3B,EAAO,MAAM,KAAO,GAAI4B,EAAY,KAAOS,EAAM,CAAC,KAClDrC,EAAO,MAAM,IAAO,GAAI4B,EAAY,IAAOU,EAAM,CAAC,IACpD,CAAC,EACDtC,EAAO,iBAAiB,YAAckC,GAAM,CAC1C,GAAI,CAAElC,EAAO,sBAAsBkC,EAAE,SAAS,CAAG,MAAQ,CAAC,CAE1DJ,GAAmB,CAAC,CAACH,EACrBC,EAAc,KACdD,EAAiB,GACjBY,GAAqB,EAAIC,GAAgB,CAC3C,CAAC,EACDxC,EAAO,iBAAiB,gBAAiB,IAAM,CAC7C8B,GAAmB,CAAC,CAACH,EACrBC,EAAc,KACdD,EAAiB,EACnB,CAAC,EACD,OAAO,iBAAiB,SAAU,IAAM,CAAEY,GAAqB,EAAIC,IAAoB,CAAC,EACxF,OAAO,gBAAgB,iBAAiB,SAAU,IAAM,CAAED,GAAqB,EAAIC,IAAoB,CAAC,EACxG,OAAO,iBAAiB,oBAAqB,IAAM,CAAED,GAAqB,EAAIC,IAAoB,CAAC,GAErGxC,EAAO,MAAM,QAAU,OACvByC,GAAiBR,CAAQ,CAC3B,CACA,SAASS,IAAa,CAAM1C,IAAQA,EAAO,MAAM,QAAU,OAAQ,CACnE,SAAS2C,EAAeC,EAAW,CAC5B5C,GACLA,EAAO,UAAU,OAAO,YAAa,CAAC4C,CAAS,CACjD,CACA,SAASC,GAAa1J,EAAG,CACvB,GAAI,CAAC6G,EAAQ,OACb,MAAM8C,EAAM,KAAQ,KAAK,IAAI,EAAG,KAAK,IAAI,IAAK3J,CAAC,CAAC,EAAI,IAAO,IAC3D6G,EAAO,MAAM,YAAY,QAAS8C,EAAI,QAAQ,CAAC,CAAC,CAClD,CACA,SAASP,GAAsBQ,EAAS,EAAG,CACzC,GAAI,CAAC/C,GAAUA,EAAO,MAAM,UAAY,OAAQ,OAChD,MAAMgD,EAAI,OAAO,WAAYC,EAAI,OAAO,YAClCb,EAAIpC,EAAO,sBAAqB,EACtC,IAAIkD,EAAO3D,GAAM6C,EAAE,KAAMW,EAAQ,KAAK,IAAIA,EAAQC,EAAIZ,EAAE,MAAQW,CAAM,CAAC,EACnEI,GAAO5D,GAAM6C,EAAE,IAAMW,EAAQ,KAAK,IAAIA,EAAQE,EAAIb,EAAE,OAASW,CAAM,CAAC,EACxE/C,EAAO,MAAM,KAAO,GAAGkD,CAAI,KAC3BlD,EAAO,MAAM,IAAO,GAAGmD,EAAG,IAC5B,CACA,SAASX,IAAmB,CAC1B,GAAI,CAACxC,GAAUA,EAAO,MAAM,UAAY,OAAQ,OAChD,MAAMoC,EAAIpC,EAAO,sBAAqB,EAChCgD,EAAI,KAAK,IAAI,EAAG,OAAO,WAAcZ,EAAE,KAAK,EAC5Ca,EAAI,KAAK,IAAI,EAAG,OAAO,YAAcb,EAAE,MAAM,EACnDP,EAAa,CAAE,GAAItC,GAAM6C,EAAE,KAAOY,EAAG,EAAG,CAAC,EAAG,GAAIzD,GAAM6C,EAAE,IAAMa,EAAG,EAAG,CAAC,CAAC,EACtE,GAAI,CAAE,aAAa,QAAQvB,GAAY,KAAK,UAAUG,CAAU,CAAC,CAAG,MAAQ,CAAC,CAC/E,CACA,SAASY,GAAiBR,EAAW,GAAM,CACzC,GAAI,CAACjC,EAAQ,OACb,MAAMoD,EAAKpD,EAAO,sBAAqB,EACvC,IAAIkD,EAAMC,EACV,GAAIlB,EACF,GAAI,CACF,MAAMoB,EAAM,KAAK,MAAM,aAAa,QAAQ3B,EAAU,GAAK,MAAM,EACjE,GAAI2B,GAAO,OAAO,SAASA,EAAI,EAAE,GAAK,OAAO,SAASA,EAAI,EAAE,EAAG,CAC7D,MAAML,GAAI,KAAK,IAAI,EAAG,OAAO,WAAcI,EAAG,KAAK,EAC7CH,GAAI,KAAK,IAAI,EAAG,OAAO,YAAcG,EAAG,MAAM,EACpDF,EAAO3D,GAAM,KAAK,MAAM8D,EAAI,GAAKL,EAAC,EAAG,EAAGA,EAAC,EACzCG,EAAO5D,GAAM,KAAK,MAAM8D,EAAI,GAAKJ,EAAC,EAAG,EAAGA,EAAC,CAC3C,CACF,MAAQ,CAAC,CAEX,GAAI,CAAC,OAAO,SAASC,CAAI,GAAK,CAAC,OAAO,SAASC,CAAG,EAAG,CACnD,MAAMH,EAAI,OAAO,WAAYC,GAAI,OAAO,YAClCK,GAAOF,EAAG,OAAS,GACzBF,EAAO,KAAK,IAAI,EAAG,KAAK,OAAOF,EAAIM,IAAQ,CAAC,CAAC,EAC7CH,EAAO,KAAK,IAAI,EAAG,KAAK,MAAMF,GAAIK,GAAO,EAAE,CAAC,CAC9C,CACAtD,EAAO,MAAM,KAAO,GAAGkD,CAAI,KAC3BlD,EAAO,MAAM,IAAO,GAAGmD,CAAG,KAC1BZ,GAAqB,CACvB,CAEA,SAASgB,GAAWX,EAAW,CAAExC,EAAQ,YAAcwC,EAAY,IAAM,GAAK,CAC9E,SAASY,GAAWC,EAAW,CAAElD,EAAQ,YAAckD,EAAU,KAAO,IAAM,CAE9E,SAASC,GAAOtF,EAAI,CAClB2B,EAAK,UAAU,OAAO,oBAAqB,CAAC,CAAC3B,CAAE,EAE/C,MAAMuF,EAAQ5D,EAAK,UAAU,SAAS,gBAAgB,EAClD3B,GACGuF,GAAOjB,GAAU,CAI1B,CACA,SAASP,GAAM/D,EAAI,CACjB2B,EAAK,UAAU,OAAO,iBAAkB,CAAC,CAAC3B,CAAE,EACxCA,EAAI4D,GAAW,EAAI,EAClBU,GAAU,CACjB,CAEA,SAASkB,GAAUC,EAAKC,EAAK,CAG3B,GAFApD,EAAK,YAAcd,GAAWiE,CAAG,EACjClD,EAAK,YAAcf,GAAWkE,CAAG,EAC7B,CAAC1C,EAAa,CAChB,MAAMjI,EAAI2K,EAAM,EAAI,KAAK,MAAOD,EAAMC,EAAO,GAAI,EAAI,EACrDrD,EAAK,MAAQ,OAAOtH,CAAC,CACvB,CACF,CACA,SAAS4K,IAAa,CAAM9C,IAAS,cAAcA,CAAK,EAAGA,EAAQ,KAAQ,CAC3E,SAAS+C,IAAa,CACpBD,GAAU,EACV9C,EAAQ,YAAY,IAAM,CACxB,GAAI,CAACF,GAAS,CAACD,GAAM,OAAOA,EAAG,gBAAmB,WAAY,OAC9D,MAAM+C,EAAM/C,EAAG,eAAc,GAAM,EAC7BgD,EAAM9C,GAAYF,EAAG,YAAW,GAAM,EAC5CE,EAAW8C,EACXF,GAAUC,EAAKC,CAAG,CACpB,EAAG,GAAG,CACR,CACA,SAASG,IAAgB,CAAMlC,KAAc,aAAaA,EAAU,EAAGA,GAAa,KAAQ,CAG5F,SAASmC,GAAcC,EAAK,IAAM,CAAE,WAAWC,EAAUD,CAAE,CAAG,CAE9D,SAASE,EAASzJ,EAAI,CACpB,OAAOoE,GAAS,EAAG,KAAK,IAAM,CAC5B,GAAI8B,EAAI,CAAE,GAAI,CAAEA,EAAG,QAAO,CAAI,MAAQ,CAAC,CAAEA,EAAK,IAAM,CACpDb,EAAK,UAAY,gCACjBa,EAAK,IAAI,GAAG,OAAO,eAAgB,CACjC,KAAM,mCACN,QAASlG,EACT,WAAY,CAAE,SAAU,EAAG,IAAK,EAAG,eAAgB,EAAG,SAAU,EAAG,YAAa,EAAG,OAAQ,SAAS,MAAM,EAC1G,OAAQ,CACN,QAAS,IAAM,CACbmG,EAAQ,GACRC,EAAWF,EAAG,YAAW,GAAM,EAC/B8C,GAAU,EAAG5C,CAAQ,EACjB,CAAC9B,IAAS,OAAO4B,EAAG,WAAc,YAAYA,EAAG,UAAUK,CAAM,EACjED,GAASJ,EAAG,MAAMA,EAAG,KAAI,EAC7ByC,GAAW,EAAI,EACfZ,EAAe,EAAI,EACnBE,GAAa1B,CAAM,EACnB6C,GAAU,EAEVC,GAAa,EACblC,GAAa,WAAW,IAAM,CAC5B,GAAI,CACEjB,GAAMA,EAAG,gBAAkBA,EAAG,mBAAqB,GAAG,YAAY,UACpE,QAAQ,KAAK,sCAAsC,EACnD6B,EAAe,EAAK,EACpBuB,GAAc,CAAC,EAEnB,MAAQ,CAAC,CACX,EAAG,GAAI,CACT,EACA,cAAgBhC,GAAM,CAChBA,EAAE,OAAS,GAAG,YAAY,SAC5B+B,GAAa,EACbV,GAAW,EAAI,EACfZ,EAAe,EAAI,EACnBqB,GAAU,GACD9B,EAAE,OAAS,GAAG,YAAY,QACnCqB,GAAW,EAAK,EAChBZ,EAAe,EAAK,EACpBoB,GAAU,GACD7B,EAAE,OAAS,GAAG,YAAY,QACnCqB,GAAW,EAAK,EAChBZ,EAAe,EAAK,EACpBoB,GAAU,EACVE,GAAa,EACbG,EAAQ,EAEZ,EACA,QAAS,IAAM,CACbb,GAAW,EAAK,EAChBZ,EAAe,EAAK,EACpBoB,GAAU,EACVE,GAAa,EACbC,GAAc,IAAI,CACpB,CACV,CACA,CAAO,CACH,CAAC,CACH,CAGA,eAAeI,EAAYC,EAAKC,EAAO,GAAI,CACzC,GAAI,CAACnD,EAAM,OAAQ,OACnBC,EAAK/B,GAAMgF,EAAK,EAAGlD,EAAM,OAAS,CAAC,EACnC,MAAMzG,EAAKyG,EAAMC,CAAE,EACnB,GAAI,CAAC1G,GAAM,CAAC,cAAc,KAAKA,CAAE,EAC/B,eAAQ,KAAK,wBAAyBA,CAAE,EACjCsJ,GAAc,CAAC,EAExBrD,EAAQ,KAAO,mCAAmCjG,CAAE,GAGrC4J,EAAK,QAAU,IAE5BrC,GAAM,EAAK,EACXuB,GAAO,EAAI,EACXe,EAAc,GAGT1E,EAAK,UAAU,SAAS,mBAAmB,GAAG2D,GAAO,EAAI,EAIhE3C,EAAQ,GAAOC,EAAW,EAAG+C,GAAU,EAAIE,GAAa,EACxD,GAAI,CAAE,MAAMI,EAASzJ,CAAE,CAAG,MAAc,CAAEsJ,GAAc,IAAI,CAAG,CACjE,CAEA,SAASE,GAAW,CACb/C,EAAM,SACPC,EAAKD,EAAM,OAAS,EAAGiD,EAAYhD,EAAK,EAAG,CAAE,OAAQ,GAAO,EACvDC,GAAM+C,EAAY,EAAG,CAAE,OAAQ,EAAK,CAAE,EACjD,CAGA,SAASI,GAAQ,CACf,MAAM1B,EAAI,OAAO,gBAAgB,OAAS,SAAS,gBAAgB,aAAe,OAAO,WACnFC,EAAI,OAAO,gBAAgB,QAAU,SAAS,gBAAgB,cAAgB,OAAO,YAC3F,MAAO,CAAE,EAAAD,EAAG,EAAAC,CAAC,CACf,CACA,SAAS0B,GAAY,CACnB,GAAI,CAAC5E,EAAK,UAAU,SAAS,iBAAiB,EAAG,OACjD,MAAM6E,EAAO7E,EAAK,sBAAqB,EACjC,CAAE,EAAAiD,EAAG,EAAAC,CAAC,EAAKyB,EAAK,EACtB,IAAIxB,EAAO3D,GAAMqF,EAAK,KAAM,EAAG,KAAK,IAAI,EAAG5B,EAAI4B,EAAK,MAAQ,CAAC,CAAC,EAC1DzB,EAAO5D,GAAMqF,EAAK,IAAM,EAAG,KAAK,IAAI,EAAG3B,EAAI2B,EAAK,OAAS,CAAC,CAAC,EAC/D7E,EAAK,MAAM,KAAO,GAAGmD,CAAI,KACzBnD,EAAK,MAAM,IAAO,GAAGoD,CAAG,KACxB,GAAI,CAAE,aAAa,QAAQ3B,GAAU,KAAK,UAAU,CAAE,KAAA0B,EAAM,IAAAC,CAAG,CAAE,CAAC,CAAG,MAAQ,CAAC,CAChF,CACA,SAASsB,GAAiB,CACxB,IAAIpB,EAAM,KACV,GAAI,CAAEA,EAAM,KAAK,MAAM,aAAa,QAAQ7B,EAAQ,GAAK,MAAM,CAAG,MAAQ,CAAC,CACvE6B,GAAO,OAAO,SAASA,EAAI,IAAI,GAAK,OAAO,SAASA,EAAI,GAAG,GAC7DtD,EAAK,UAAU,IAAI,iBAAiB,EACpCA,EAAK,MAAM,UAAY,OACvBA,EAAK,MAAM,KAAO,GAAGsD,EAAI,IAAI,KAC7BtD,EAAK,MAAM,IAAO,GAAGsD,EAAI,GAAG,KAC5BtD,EAAK,MAAM,MAAQ,OACnBA,EAAK,MAAM,OAAS,OACpB4E,EAAS,IAET5E,EAAK,UAAU,OAAO,iBAAiB,EACvCA,EAAK,MAAM,KAAOA,EAAK,MAAM,IAAMA,EAAK,MAAM,MAAQA,EAAK,MAAM,OAAS,GAC1EA,EAAK,MAAM,UAAY,GAE3B,CACA,SAAS8E,EAAc3C,EAAG,CACxB,GAAI,CAACnC,EAAK,UAAU,SAAS,iBAAiB,EAAG,CAC/C,MAAMqC,EAAIrC,EAAK,sBAAqB,EACpCA,EAAK,UAAU,IAAI,iBAAiB,EACpCA,EAAK,MAAM,UAAY,OACvBA,EAAK,MAAM,KAAO,GAAGqC,EAAE,IAAI,KAC3BrC,EAAK,MAAM,IAAO,GAAGqC,EAAE,GAAG,KAC1BrC,EAAK,MAAM,MAAQ,OACnBA,EAAK,MAAM,OAAS,MACtB,CACA0B,EAAW,CACT,OAAQS,EAAE,QACV,OAAQA,EAAE,QACV,SAAU,WAAWnC,EAAK,MAAM,MAAQ,GAAG,EAC3C,QAAU,WAAWA,EAAK,MAAM,KAAO,GAAG,CAChD,EACIa,EAAS,UAAU,IAAI,UAAU,EACjC,GAAI,CAAEA,EAAS,oBAAoBsB,EAAE,SAAS,CAAG,MAAQ,CAAC,CAC5D,CACA,SAAS4C,EAAa5C,EAAG,CACvB,GAAI,CAACT,EAAU,OACf,IAAIyB,EAAOzB,EAAS,UAAYS,EAAE,QAAUT,EAAS,QACjD0B,EAAO1B,EAAS,SAAYS,EAAE,QAAUT,EAAS,QACrD,MAAMW,EAAIrC,EAAK,sBAAqB,EAC9B,CAAE,EAAAiD,EAAG,EAAAC,EAAC,EAAKyB,EAAK,EACtBxB,EAAO3D,GAAM2D,EAAM,EAAG,KAAK,IAAI,EAAGF,EAAIZ,EAAE,MAAQ,CAAC,CAAC,EAClDe,EAAO5D,GAAM4D,EAAM,EAAG,KAAK,IAAI,EAAGF,GAAIb,EAAE,OAAS,CAAC,CAAC,EACnDrC,EAAK,MAAM,KAAO,GAAGmD,CAAI,KACzBnD,EAAK,MAAM,IAAO,GAAGoD,CAAG,IAC1B,CACA,SAAS4B,GAAY7C,EAAG,CACtB,GAAKT,EACL,IAAI,CAAEb,EAAS,wBAAwBsB,EAAE,SAAS,CAAG,MAAQ,CAAC,CAC9DtB,EAAS,UAAU,OAAO,UAAU,EACpCa,EAAW,KACXkD,EAAS,EACX,CACA/D,EAAS,iBAAiB,cAAeiE,CAAa,EACtD,OAAO,iBAAiB,cAAeC,CAAY,EACnD,OAAO,iBAAiB,YAAaC,EAAW,EAChD,OAAO,iBAAiB,SAAUJ,CAAS,EAC3C,OAAO,gBAAgB,iBAAiB,SAAUA,CAAS,EAC3D,OAAO,iBAAiB,oBAAqBA,CAAS,EAGtDzE,EAAS,iBAAiB,QAAS,IAAM,CACvC,GAAI,CAAEY,GAAI,cAAeA,GAAI,UAAO,CAAM,MAAQ,CAAC,CACnDA,EAAK,KAAMC,EAAQ,GAAOC,EAAW,EAAG+C,KAAcE,GAAa,EACnEP,GAAO,EAAK,EAAGvB,GAAM,EAAK,EAC1Bd,EAAQ,CAAA,EAAIC,EAAK,GACjBqB,EAAe,EAAK,CACtB,CAAC,EACDxC,EAAQ,iBAAiB,QAAS,IAAM,CAAEgC,GAAM,EAAI,CAAG,CAAC,EAExDtB,EAAQ,iBAAiB,QAAS,IAAM,CACtC,GAAI,CAAEC,GAAI,cAAeA,GAAI,UAAO,CAAM,MAAQ,CAAC,CACnDA,EAAK,KAAMC,EAAQ,GAAOC,EAAW,EAAG+C,KAAcE,GAAa,EACnEP,GAAO,EAAK,EAAGvB,GAAM,EAAK,EAC1Bd,EAAQ,CAAA,EAAIC,EAAK,GACjBqB,EAAe,EAAK,CACtB,CAAC,EAEDvC,EAAQ,iBAAiB,QAAS,IAAM,CACtC,GAAI,CAACW,GAAS,CAACD,EAAI,QACTA,EAAG,eAAiBA,EAAG,eAAc,EAAK,MAC1C,GAAG,YAAY,SAAWA,EAAG,aAAU,EAAMyC,GAAW,EAAK,EAAGZ,EAAe,EAAK,IACvF7B,EAAG,YAAS,EAAMyC,GAAW,EAAI,EAAGZ,EAAe,EAAI,EAChE,CAAC,EACDtC,EAAQ,iBAAiB,QAAS,IAAM,CAAOgB,EAAM,QAAgBiD,EAAYhD,EAAK,EAAIA,EAAK,EAAKC,EAAOF,EAAM,OAAS,EAAI,EAAI,CAAE,OAAQ,GAAM,CAAG,CAAC,EACtJf,EAAQ,iBAAiB,QAAS,IAAM,CAAOe,EAAM,QAAgBiD,EAAYhD,EAAKD,EAAM,OAAS,EAAIC,EAAK,EAAKC,EAAO,EAAID,EAAK,CAAE,OAAQ,GAAM,CAAG,CAAC,EAEvJf,EAAQ,iBAAiB,QAAS,IAAM,CACjCO,IACLI,EAAQ,CAACA,EACLA,EAAOJ,EAAG,OAAI,EAAWA,EAAG,SAAM,EACtC0C,GAAWtC,CAAK,EAClB,CAAC,EACDV,EAAI,iBAAiB,QAAS,IAAM,CAClC,MAAMrH,EAAI,OAAOqH,EAAI,KAAK,GAAK,EAC/BW,EAAShI,EACJ+F,IAAO4B,GAAI,YAAY3H,CAAC,EACzBA,IAAM,GAAK,CAAC+H,GAASA,EAAQ,GAAMJ,GAAI,OAAI,EAAM0C,GAAW,EAAI,GAC3DrK,EAAI,GAAK+H,IAASA,EAAQ,GAAOJ,GAAI,SAAM,EAAM0C,GAAW,EAAK,GAC1EX,GAAa1J,CAAC,CAChB,CAAC,EACDsH,EAAK,iBAAiB,QAAS,IAAM,CACnCW,EAAc,GACd,MAAMjI,EAAI,OAAOsH,EAAK,KAAK,GAAK,EAC1BZ,EAAMmB,EAAW,EAAK7H,EAAI,IAAQ6H,EAAW,EACnDN,EAAK,YAAcd,GAAWC,CAAG,CACnC,CAAC,EACDY,EAAK,iBAAiB,SAAU,IAAM,CAEpC,GADAW,EAAc,GACV,CAACN,GAAM,CAACE,EAAU,OAEtB,MAAMnB,GADI,OAAOY,EAAK,KAAK,GAAK,GACf,IAAQO,EACzBF,EAAG,SAASjB,EAAK,EAAI,CACvB,CAAC,EAGD,eAAemF,GAAK5F,EAAS,CAC3B,MAAMxE,EAAKuE,GAAaC,CAAO,EAC1BxE,IACLyG,EAAQ,CAACzG,CAAE,EAAG0G,EAAK,EACnBa,GAAM,EAAK,EAAGuB,GAAO,EAAI,EAAGe,EAAc,EAC1C,MAAMH,EAAY,EAAG,CAAE,OAAQ,EAAI,CAAE,EACvC,CAEA,eAAeW,EAAUC,EAAMV,EAAO,GAAI,CACxC,MAAMW,GAAOD,GAAQ,CAAA,GAAI,IAAI/F,EAAY,EAAE,OAAO,OAAO,EACzD,GAAI,CAACgG,EAAI,OAAQ,OACjB5D,EAAO,CAAC,CAACiD,EAAK,KAEdnD,EADYmD,EAAK,QAAU/E,GAAW0F,CAAG,EAAIA,EAAI,MAAK,EAEtD,MAAMC,EAAQ7F,GAAM,OAAOiF,EAAK,YAAc,CAAC,GAAK,EAAG,EAAGnD,EAAM,OAAS,CAAC,EAC1Ec,GAAM,EAAK,EAAGuB,GAAO,EAAI,EAAGe,EAAc,EAC1C,MAAMH,EAAYc,EAAO,CAAE,OAAQ,EAAI,CAAE,CAC3C,CAGA,SAAS5G,IAAO,CACd,GAAI,CAAC6C,EAAM,OAAQ,OACnB,MAAMgE,EAAS,CAACtF,EAAK,UAAU,SAAS,gBAAgB,EACxDuE,EAAYhD,EAAKD,EAAM,OAAS,EAAIC,EAAK,EAAKC,EAAO,EAAID,EAAK,CAAE,OAAA+D,CAAM,CAAE,CAC1E,CACA,SAASC,IAAO,CACd,GAAI,CAACjE,EAAM,OAAQ,OACnB,MAAMgE,EAAS,CAACtF,EAAK,UAAU,SAAS,gBAAgB,EACxDuE,EAAYhD,EAAK,EAAIA,EAAK,EAAKC,EAAOF,EAAM,OAAS,EAAI,EAAI,CAAE,OAAAgE,CAAM,CAAE,CACzE,CAEA,SAASE,IAAe,CAAE,OAAOxF,EAAK,UAAU,SAAS,mBAAmB,CAAG,CAC/E,SAASyF,IAAe,CAAE,OAAOD,GAAQ,GAAMxF,EAAK,UAAU,SAAS,gBAAgB,CAAG,CAC1F,SAAS0F,IAAe,CAAE,OAAO,MAAM,QAAQpE,CAAK,GAAKA,EAAM,OAAS,CAAG,CAC3E,SAASqE,IAAe,CAAMH,GAAQ,GAAIpD,GAAM,EAAI,CAAG,CACvD,SAASwD,IAAe,CAAEzF,EAAS,MAAK,CAAI,CAE5C,OAAAnB,GAAY,CAAE,KAAAiG,GAAM,UAAAC,EAAW,KAAAzG,GAAM,KAAA8G,GAAM,SAAAI,GAAU,SAAAH,GAAU,YAAAC,GAAa,SAAAC,GAAU,MAAAE,EAAK,EACpF5G,EACT,CCriBA,IAAI6G,EAASC,GAAUC,GAASC,EAAOC,GAAQC,GAAUC,GACrDC,GAAY,GAAOC,GAAS,EAAGC,GAAS,EAAGC,GAAO,EAAGC,GAAO,EAAGC,EAAQ,EACvEC,GAAQ,EAAGC,GAAQ,EAAGC,GAAS,EAAGC,GAAS,EAC/C,MAAMC,EAAiB,IAAI,IAC3B,IAAIC,GAAc,GAAOC,GAAgB,EAAGC,GAAiB,EAE7D,MAAMzH,GAAQ,CAACpG,EAAGC,EAAK6N,IAAQ,KAAK,IAAI7N,EAAK,KAAK,IAAI6N,EAAK9N,CAAC,CAAC,EACvD+N,GAAO,CAACrK,EAAG2C,IAAM,KAAK,MAAM3C,EAAE,EAAI2C,EAAE,EAAG3C,EAAE,EAAI2C,EAAE,CAAC,EAChD2H,GAAW,CAACtK,EAAG2C,KAAO,CAAE,GAAI3C,EAAE,EAAI2C,EAAE,GAAK,EAAG,GAAI3C,EAAE,EAAI2C,EAAE,GAAK,IAGnE,SAAS4H,IAAa,CACpB,GAAIxB,EAAS,OAEbA,EAAU,SAAS,cAAc,KAAK,EACtCA,EAAQ,UAAY,UACpBA,EAAQ,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAWpB,SAAS,KAAK,YAAYA,CAAO,EAGjC,OAAO,OAAOA,EAAQ,MAAO,CAAE,SAAU,QAAS,MAAO,IAAK,OAAQ,OAAQ,QAAS,MAAM,CAAE,EAC/FC,GAAWD,EAAQ,cAAc,kBAAkB,EACnD,OAAO,OAAOC,GAAS,MAAO,CAC5B,SAAU,WAAY,MAAO,IAAK,QAAS,OAC3C,iBAAkB,WAAY,IAAK,OAAQ,QAAS,MACxD,CAAG,EAEDK,GAAaN,EAAQ,cAAc,oBAAoB,EACvD,OAAO,OAAOM,GAAW,MAAO,CAAE,SAAU,WAAY,MAAO,IAAK,WAAY,gBAAgB,CAAE,EAElGJ,GAAUF,EAAQ,cAAc,iBAAiB,EACjD,OAAO,OAAOE,GAAQ,MAAO,CAC3B,SAAU,WACV,WAAY,OACZ,aAAc,OACd,SAAU,SACV,QAAS,OACT,WAAY,SACZ,eAAgB,SAChB,UAAW,QACX,OAAQ,sBACR,YAAa,MACjB,CAAG,EAEDC,EAAQH,EAAQ,cAAc,eAAe,EAE7CG,EAAM,MAAM,SAAW,OACvBA,EAAM,MAAM,UAAY,OACxBA,EAAM,MAAM,MAAQ,OACpBA,EAAM,MAAM,YAAY,SAAU,OAAQ,WAAW,EACrDA,EAAM,MAAM,UAAY,UACxBA,EAAM,MAAM,gBAAkB,gBAC9BA,EAAM,MAAM,WAAa,YACzBA,EAAM,MAAM,WAAa,OACzBA,EAAM,MAAM,eAAiB,OAC7BA,EAAM,MAAM,cAAgB,OAE5B,MAAMsB,EAAMzB,EAAQ,cAAc,eAAe,EACjD,OAAO,OAAOyB,EAAI,MAAO,CACvB,QAAS,OAAQ,eAAgB,gBACjC,WAAY,SAAU,IAAK,MAC/B,CAAG,EAEDrB,GAASJ,EAAQ,cAAc,gBAAgB,EAC/CI,GAAO,MAAM,MAAQ,OACrBC,GAAWL,EAAQ,cAAc,iBAAiB,EAClD,OAAO,OAAOK,GAAS,MAAO,CAC5B,MAAO,OAAQ,OAAQ,OAAQ,aAAc,OAC7C,OAAQ,OAAQ,WAAY,+BAAgC,MAAO,OAAQ,OAAQ,SACvF,CAAG,EAGDC,GAAW,iBAAiB,QAASoB,EAAS,EAC9CrB,GAAS,iBAAiB,QAASqB,EAAS,EAE5C1B,EAAQ,iBAAiB,QAAS2B,GAAS,CAAE,QAAS,GAAO,EAC7DxB,EAAM,iBAAiB,WAAYyB,EAAU,EAE7CzB,EAAM,iBAAiB,cAAe0B,EAAa,EACnD1B,EAAM,iBAAiB,cAAe2B,EAAa,EACnD3B,EAAM,iBAAiB,YAAa4B,EAAiB,EACrD5B,EAAM,iBAAiB,gBAAiB4B,EAAiB,EAEzD,SAAS,iBAAiB,UAAYzF,GAAM,CAAMA,EAAE,MAAQ,UAAY0F,GAAU,GAAIN,GAAS,CAAI,CAAC,EACpG,OAAO,iBAAiB,SAAU,IAAM,CAAMM,GAAU,IAAMC,GAAY,EAAIC,GAAc,EAAM,CAAC,CACrG,CAGA,SAASC,IAAc,CACrB,MAAMzC,EAAOS,EAAM,MAAM,UACzBA,EAAM,MAAM,UAAY,8BACxB,MAAM3D,EAAI2D,EAAM,sBAAqB,EACrCA,EAAM,MAAM,UAAYT,EACxBmB,GAAQrE,EAAE,MAAOsE,GAAQtE,EAAE,MAC7B,CACA,SAASyF,IAAe,CACtB,MAAM/N,EAAIgM,GAAQ,sBAAqB,EACvCa,GAAS7M,EAAE,MAAO8M,GAAS9M,EAAE,MAC/B,CACA,SAASkO,IAAW,CAClB,GAAI,CAACvB,IAAS,CAACC,IAAS,CAACC,IAAU,CAACC,GAAQ,OAC5C,MAAMqB,EAAWxB,GAAQD,EAAO0B,EAAWxB,GAAQF,EACnD,GAAIyB,GAAYtB,GAAQL,GAAO,MAC1B,CAAE,MAAM6B,GAAQF,EAAWtB,IAAU,EAAGL,GAAO/G,GAAM+G,GAAM,CAAC6B,EAAMA,CAAI,CAAG,CAC9E,GAAID,GAAYtB,GAAQL,GAAO,MAC1B,CAAE,MAAM6B,GAAQF,EAAWtB,IAAU,EAAGL,GAAOhH,GAAMgH,GAAM,CAAC6B,EAAMA,CAAI,CAAG,CAChF,CACA,SAASN,IAAiB,CACxBE,GAAQ,EACRjC,EAAM,MAAM,UAAY,eAAeO,EAAI,OAAOC,EAAI,gBAAgBC,CAAK,IAC3ET,EAAM,MAAM,OAASS,EAAQ,EAAKL,GAAY,WAAa,OAAU,SACvE,CAGO,SAASkC,GAASC,EAAKC,EAAM,GAAI,CACtC,GAAI,CAACD,EAAK,OACVlB,GAAU,EAGVP,EAAe,MAAK,EACpBC,GAAc,GAAOC,GAAgB,EAAGC,GAAiB,EACzDb,GAAY,GAAOC,GAASC,GAAS,EAAGC,GAAOC,GAAO,EAAGC,EAAQ,EAEjET,EAAM,IAAMuC,EACZvC,EAAM,IAAMwC,GAAO,GACnBvC,GAAO,KAAOsC,EAEd1C,EAAQ,MAAM,QAAU,QAExB,MAAM4C,EAAY,IAAM,CAAEX,GAAY,EAAIE,KAAeC,GAAQ,EAAIF,GAAc,CAAI,EACnF/B,EAAM,UAAYA,EAAM,aAAe,EAAG,sBAAsByC,CAAS,EACxEzC,EAAM,OAAS,IAAM,sBAAsByC,CAAS,CAC3D,CAEO,SAASlB,IAAY,CACrB1B,IACLA,EAAQ,MAAM,QAAU,OACxBG,EAAM,IAAM,GACZc,EAAe,MAAK,EACpBC,GAAc,GAChB,CAEO,SAASc,IAAa,CAC3B,MAAO,CAAC,EAAEhC,GAAWA,EAAQ,MAAM,UAAY,OACjD,CAGA,SAAS4B,IAAa,CAEpBhB,EADaA,EACE,EAAI,EAAI,EACnBA,IAAU,IAAKF,GAAO,EAAGC,GAAO,GACpCuB,GAAc,CAChB,CACA,SAASP,GAAQ,EAAG,CAClB,GAAI,CAACK,GAAU,EAAI,OACnB,EAAE,eAAc,EAChB,MAAMa,EAAWlJ,GAAMiH,GAAS,EAAE,OAAS,EAAI,KAAQ,KAAO,EAAG,CAAC,EAE5D5B,EAAOmB,EAAM,sBAAqB,EAClC2C,EAAQ,CAAE,EAAG,EAAE,QAAS,EAAG,EAAE,OAAO,EACpCC,EAAS,CAAE,EAAG/D,EAAK,KAAOA,EAAK,MAAQ,EAAG,EAAGA,EAAK,IAAMA,EAAK,OAAS,CAAC,EACvEgE,EAASH,EAAWjC,EAC1BF,KAASqC,EAAO,EAAID,EAAM,IAAM,EAAIE,GACpCrC,KAASoC,EAAO,EAAID,EAAM,IAAM,EAAIE,GAEpCpC,EAAQiC,EACJjC,IAAU,IAAKF,GAAO,EAAGC,GAAO,GACpCuB,GAAc,CAChB,CACA,SAASL,GAAc,EAAG,CAIxB,GAHAZ,EAAe,IAAI,EAAE,UAAW,CAAE,EAAG,EAAE,QAAS,EAAG,EAAE,OAAO,CAAE,EAC9Dd,EAAM,kBAAkB,EAAE,SAAS,EAE/Bc,EAAe,OAAS,EAAG,CAC7B,KAAM,CAACgC,EAAIC,CAAE,EAAI,MAAM,KAAKjC,EAAe,QAAQ,EACnDC,GAAc,GACdC,GAAgBG,GAAK2B,EAAIC,CAAE,GAAK,EAChC9B,GAAiBR,EACjBL,GAAY,GACZ,MACF,CACIU,EAAe,OAAS,GAAKL,EAAQ,IACvCL,GAAY,GACZC,GAAS,EAAE,QAAUE,GACrBD,GAAS,EAAE,QAAUE,GACrBuB,GAAc,EAElB,CACA,SAASJ,GAAc,EAAG,CACxB,GAAKb,EAAe,IAAI,EAAE,SAAS,EAGnC,IAFAA,EAAe,IAAI,EAAE,UAAW,CAAE,EAAG,EAAE,QAAS,EAAG,EAAE,OAAO,CAAE,EAE1DC,IAAeD,EAAe,MAAQ,EAAG,CAC3C,KAAM,CAACgC,EAAIC,CAAE,EAAI,MAAM,KAAKjC,EAAe,QAAQ,EAC7CkC,EAAI7B,GAAK2B,EAAIC,CAAE,GAAK,EAC1B,IAAIL,EAAWlJ,GAAMyH,IAAkB+B,EAAIhC,IAAgB,EAAG,CAAC,EAE/D,MAAMiC,EAAM7B,GAAS0B,EAAIC,CAAE,EACrBlE,EAAOmB,EAAM,sBAAqB,EAClC4C,EAAS,CAAE,EAAG/D,EAAK,KAAOA,EAAK,MAAQ,EAAG,EAAGA,EAAK,IAAMA,EAAK,OAAS,CAAC,EACvEgE,EAASH,EAAWjC,EAC1BF,KAASqC,EAAO,EAAIK,EAAI,IAAM,EAAIJ,GAClCrC,KAASoC,EAAO,EAAIK,EAAI,IAAM,EAAIJ,GAElCpC,EAAQiC,EACJjC,IAAU,IAAKF,GAAO,EAAGC,GAAO,GACpCuB,GAAc,EACd,MACF,CAEI3B,IAAaU,EAAe,OAAS,GAAKL,EAAQ,IACpDF,GAAO,EAAE,QAAUF,GACnBG,GAAO,EAAE,QAAUF,GACnByB,GAAc,GAElB,CACA,SAASH,GAAkB,EAAG,CACxBd,EAAe,IAAI,EAAE,SAAS,GAAGA,EAAe,OAAO,EAAE,SAAS,EACtE,GAAI,CAAEd,EAAM,sBAAsB,EAAE,SAAS,CAAG,MAAQ,CAAC,CACrDc,EAAe,KAAO,IAAKC,GAAc,GAAOC,GAAgB,GAChEF,EAAe,OAAS,IAAKV,GAAY,GAAO2B,GAAc,EACpE,CCtOA,MAAMmB,GAAQ,IAAI,IAEX,SAASC,GAActO,EAAI,CAChC,OAAOqO,GAAM,IAAI,OAAOrO,CAAE,CAAC,CAC7B,CAEO,SAASuO,GAAaC,EAAM,CACjC,MAAMC,EAAOD,EAAK,cAAc,eAAe,EAC/C,GAAI,CAACC,EAAM,OAEX,IAAIC,EAAa,KACbC,EAAU,KAEd,SAASC,EAAiB5O,EAAI,CAC5B,aAAa0O,CAAU,EACvBA,EAAa,WAAW,SAAY,CAClC,GAAI,CACF,GAAIL,GAAM,IAAIrO,CAAE,EAAG,OACnB,KAAM,CAAC6O,EAAQC,CAAM,EAAI,MAAM,QAAQ,IAAI,CACzC/O,GAAYC,CAAE,EACdC,GAAkBD,CAAE,CAC9B,CAAS,EACDqO,GAAM,IAAIrO,EAAI,CAAE,OAAA6O,EAAQ,OAAAC,EAAQ,GAAI,KAAK,IAAG,EAAI,CAClD,MAAQ,CAAqB,CAC/B,EAAG,GAAG,CACR,CAEAL,EAAK,iBAAiB,aAAenH,GAAM,CACzC,MAAMyH,EAAMzH,EAAE,OAAO,QAAQ,sBAAsB,EACnD,GAAI,CAACyH,EAAK,OACV,MAAM/O,EAAK+O,EAAI,QAAQ,OAAO,GAAG,SAAS,GACrC/O,IACL2O,EAAU,OAAO3O,CAAE,EACnB4O,EAAiBD,CAAO,EAC1B,EAAG,EAAI,EAEPF,EAAK,iBAAiB,aAAenH,GAAM,CACrCA,EAAE,OAAO,QAAQ,sBAAsB,IACzC,aAAaoH,CAAU,EACvBA,EAAa,KACbC,EAAU,KAEd,EAAG,EAAI,CACT,CC/CA,MAAAK,GAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,ECUTC,GAAsB,oBAC5B,SAASC,GAAoBC,EAAM,SAAU,CAC3C,GAAIA,EAAI,eAAeF,EAAmB,EAAG,OAC7C,MAAMG,EAAOD,EAAI,cAAc,KAAK,EACpCC,EAAK,GAAKH,GACVG,EAAK,aAAa,cAAe,MAAM,EACvCA,EAAK,MAAM,SAAW,WACtBA,EAAK,MAAM,MAAQ,IACnBA,EAAK,MAAM,OAAS,IACpBA,EAAK,MAAM,SAAW,SACtBA,EAAK,UAAYJ,GACjBG,EAAI,KAAK,QAAQC,CAAI,CACvB,CACA,MAAMC,GAAO,CAACrP,EAAIsP,EAAM,QACtB,eAAeA,CAAG,oCAAoCtP,CAAE,kBAAkBA,CAAE,iBAGxEuP,GACJ,2BACA,mBACE;AAAA;AAAA;AAAA;AAAA,WAKJ,EAGA,SAASC,GAAiBL,EAAM,SAAU,CACxC,IAAIM,EAAQN,EAAI,cAAc,eAAe,EAC7C,OAAIM,IAEJA,EAAQN,EAAI,cAAc,KAAK,EAC/BM,EAAM,GAAK,eACXA,EAAM,UAAY,SAClBA,EAAM,aAAa,SAAU,EAAE,EAC/BA,EAAM,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAQlBN,EAAI,KAAK,YAAYM,CAAK,EACnBA,EACT,CAGA,SAASC,GAAQC,EAAQ,CACvB,MAAMpG,EAAK,OAAOoG,CAAM,EACxB,GAAI,CAAC,OAAO,SAASpG,CAAE,EAAG,MAAO,IACjC,MAAMqG,EAAQ,KAAK,MAAMrG,EAAK,GAAI,EAC5B7E,EAAI,KAAK,MAAMkL,EAAQ,EAAE,EACzB,EAAI,OAAOA,EAAQ,EAAE,EAAE,SAAS,EAAG,GAAG,EAC5C,MAAO,GAAGlL,CAAC,IAAI,CAAC,EAClB,CACA,SAASmL,GAAM1B,EAAI,GAAI,CACrB,MAAMjP,EAAIiP,EAAE,YAAcA,EAAE,eAAiBA,EAAE,UACzC7G,EAAI6G,EAAE,WAAaA,EAAE,kBAAoBA,EAAE,aAAeA,EAAE,QAClE,OAAIjP,GAAKoI,EAAU,GAAGpI,CAAC,IAAIoI,CAAC,GACxBpI,EAAU,GAAGA,CAAC,WACX,qBACT,CACA,SAAS4Q,GAAqBC,EAAO,GAAI,CACvC,GAAI,CAACA,EAAM,MAAO,GAClB,GAAI,CACF,MAAMtL,EAAI,IAAI,IAAIsL,EAAM,SAAS,IAAI,EACrC,MAAI,aAAa,KAAKtL,EAAE,QAAQ,EAAU,CAAC,CAACA,EAAE,SAAS,MAAM,CAAC,EAC1D,SAAS,KAAKA,EAAE,MAAM,EAAU,GAC7B,uBAAuB,KAAKA,EAAE,QAAQ,CAC/C,MAAQ,CACN,MAAO,EACT,CACF,CACA,SAASuL,GAAe/O,EAAI,GAAIgP,EAAa,GAAI,CAC/C,MAAMC,EACJjP,EAAE,SACFA,EAAE,aACFA,EAAE,KACFA,EAAE,OACFA,EAAE,aACF,GACF,GAAIiP,EAAQ,OAAOA,EAGnB,MAAMC,EAAQlP,EAAE,OAASA,EAAE,UAAYA,EAAE,MAAQ,GAC3CmP,EAAI,CAACH,EAAYE,CAAK,EAAE,IAAKE,GAAM,OAAOA,GAAK,EAAE,EAAE,MAAM,EAAE,OAAO,OAAO,EAAE,KAAK,GAAG,EACzF,OAAKD,EACE,gDAAgD,mBAAmBA,CAAC,CAAC,GAD7D,EAEjB,CAEA,SAASE,GAASrP,EAAI,GAAIgP,EAAa,GAAI,CACzC,MAAME,EAAQlP,EAAE,OAASA,EAAE,UAAYA,EAAE,MAAQ,IAC3CiI,EAAQwG,GAAQzO,EAAE,UAAYA,EAAE,aAAeA,EAAE,IAAI,EACrDsP,EAAQP,GAAe/O,EAAGgP,CAAU,EAC1C,MAAO;AAAA;AAAA,cAEKE,CAAK;AAAA,cACLjH,CAAG;AAAA,cAETqH,EACI,uBAAuBA,CAAI;AAAA,iBACtBlB,GAAK,2BAA4B,WAAW,CAAC;AAAA,mBAElD,6BACZ;AAAA,UAEA,CACA,SAASmB,GAAO1L,EAAI,CAAC,MAAM5F,EAAE,IAAI,IAAMsI,EAAE,CAAA,EAAG,UAAU6I,KAAKvL,EAAQuL,GAAG,CAACnR,EAAE,IAAImR,CAAC,IAAGnR,EAAE,IAAImR,CAAC,EAAE7I,EAAE,KAAK6I,CAAC,GAAG,OAAO7I,CAAE,CAC9G,SAASiJ,IAAc,CAErB,MAAO,CAAC,CAAC,SAAS,cAAc,oFAAoF,CACtH,CAGO,SAASC,GAAkBC,EAAS,SAAU,CAEnDzB,GAAoB,QAAQ,EAE5B,MAAMO,GACHkB,GAAUA,EAAO,cAAgBA,EAAO,cAAc,eAAe,EAAI,OAC1E,SAAS,cAAc,eAAe,GACtCnB,GAAiB,QAAQ,EAErBoB,EAAanB,EAAM,cAAc,UAAU,EAC3CoB,EAAapB,EAAM,cAAc,WAAW,EAC5CqB,EAAarB,EAAM,cAAc,iBAAiB,EAGlDsB,EAAS7L,GAAgB,EAG/B,IAAI8L,EAAe,KACfC,EAAiB,KACjBC,EAAiB,KAErB,SAASC,GAAiB,CACxB,GAAI,CAEF,MAAM3J,EAAIsJ,EAAO,sBAAqB,EAChCM,EAAQ,KAAK,IAAI,GAAK,OAAO,YAAc5J,EAAE,KAAOA,EAAE,OAAS,EAAG,EACxEwJ,EAAa,MAAM,MAAS,GAAGI,CAAK,KACpCJ,EAAa,MAAM,OAAS,MAC9B,MAAQ,CAAC,CACX,CACA,SAASK,GAAkB,CACpBL,IACHA,EAAe,SAAS,cAAc,QAAQ,EAC9CA,EAAa,KAAO,SACpBA,EAAa,UAAY,oBACzBA,EAAa,aAAa,aAAc,eAAe,EACvDA,EAAa,YAAc,IAC3BF,EAAO,YAAYE,CAAY,EAC/BA,EAAa,iBAAiB,QAAS,IAAM,CAC3C,GAAI,CAAEvP,GAAS,MAAG,CAAM,MAAQ,CAAC,CACjCqP,EAAO,SAAS,CAAE,IAAK,EAAG,SAAU,SAAU,CAChD,CAAC,GAECG,GAAgBH,EAAO,oBAAoB,SAAUG,CAAc,EACnEC,IACF,OAAO,oBAAoB,SAAUA,CAAW,EAChD,OAAO,gBAAgB,oBAAoB,SAAUA,CAAW,EAChE,OAAO,oBAAoB,oBAAqBA,CAAW,GAE7DD,EAAiB,IAAM,CACrB,GAAI,CACFD,EAAa,MAAM,SAAWF,EAAO,WAAa,GAAK,IAAM,OAAS,OACtEK,EAAc,CAChB,MAAQ,CAAC,CACX,EACAL,EAAO,iBAAiB,SAAUG,CAAc,EAEhDC,EAAc,IAAM,CAAEC,EAAc,CAAI,EACxC,OAAO,iBAAiB,SAAUD,CAAW,EAC7C,OAAO,gBAAgB,iBAAiB,SAAUA,CAAW,EAC7D,OAAO,iBAAiB,oBAAqBA,CAAW,EAExDC,EAAc,CAChB,CAGA,MAAMG,EAAShK,GAAM,CAAE,GAAIA,EAAE,MAAQ,SAAU,CAAE,GAAI,CAAE7F,GAAS,MAAG,CAAM,MAAQ,CAAC,CAAEsJ,EAAK,CAAI,CAAE,EAE/F,SAASX,GAAO,CACdqF,EAAM,gBAAgB,QAAQ,EAC9B1L,GAAU,EACVsN,EAAe,EACXL,IAAcA,EAAa,MAAM,QAAU,QAC/CJ,EAAU,UAAY,4CACtB,SAAS,iBAAiB,UAAWU,CAAK,CAC5C,CAEA,SAASvG,GAAQ,CACf0E,EAAM,aAAa,SAAU,EAAE,EAC/BzL,GAAY,EACZ4M,EAAU,UAAY,GACtB,SAAS,oBAAoB,UAAWU,CAAK,EAEzCL,IAAkBH,EAAO,oBAAoB,SAAUG,CAAc,EAAGA,EAAiB,MACzFC,IACF,OAAO,oBAAoB,SAAUA,CAAW,EAChD,OAAO,gBAAgB,oBAAoB,SAAUA,CAAW,EAChE,OAAO,oBAAoB,oBAAqBA,CAAW,EAC3DA,EAAc,MAEZF,IAAcA,EAAa,MAAM,QAAU,OACjD,CAEAH,EAAW,iBAAiB,QAAS,IAAM,CAAE,GAAI,CAAEpP,GAAS,MAAG,CAAM,MAAQ,CAAC,CAAEsJ,EAAK,CAAI,CAAC,EAC1F0E,EAAM,iBAAiB,QAAUnI,GAAM,CACrC,GAAIA,EAAE,OAAO,UAAU,SAAS,kBAAkB,EAAG,CACnD,GAAI,CAAE7F,GAAS,MAAG,CAAM,MAAQ,CAAC,CACjCsJ,EAAK,CACP,CACF,CAAC,EAGD0E,EAAM,iBAAiB,QAAUnI,GAAM,CACrC,MAAMrF,EAAIqF,EAAE,OAAO,QAAQ,MAAM,EACjC,GAAIrF,EAAG,CACL,MAAM8N,EAAO9N,EAAE,MAAQA,EAAE,aAAa,MAAM,GAAK,GAGjD,GAAI,CAAC6N,GAAqBC,CAAI,EAC5B,OAEFzI,EAAE,eAAc,EAChB,GAAI,CAAE7F,GAAS,MAAG,CAAM,MAAQ,CAAC,CAGjC,MAAM8P,EAAQ,MAAM,KAAK9B,EAAM,iBAAiB,MAAM,CAAC,EACjD+B,EAAQhB,GACZe,EACG,IAAKlB,GAAMA,EAAE,IAAI,EACjB,OAAQoB,GAAQA,GAAO3B,GAAqB2B,CAAG,CAAC,CAC3D,EACM,IAAIjH,EAAQgH,EAAM,QAAQvP,EAAE,IAAI,EAGhC,GAFIuI,EAAQ,IAAGA,EAAQ,GAEnB,CAACgH,EAAM,OAAQ,CAAET,EAAO,KAAK9O,EAAE,IAAI,EAAG,MAAQ,CAElD,MAAMyP,EAAMjB,GAAY,EACxBM,EAAO,UAAUS,EAAO,CAAE,WAAYhH,EAAO,QAASkH,EAAK,KAAMA,EAAK,EACtE,MACF,CACA,MAAMC,EAAUrK,EAAE,OAAO,QAAQ,cAAc,EAC/C,GAAIqK,EAAS,CACX,GAAI,CAAElQ,GAAS,MAAG,CAAM,MAAQ,CAAC,CACjC,MAAMiM,EACJiE,EAAQ,YACRA,EAAQ,aAAa,KAAK,GAC1BA,EAAQ,aAAa,UAAU,GAC/B,GACFlE,GAASC,EAAKiE,EAAQ,aAAa,KAAK,GAAK,EAAE,CACjD,CACF,CAAC,EAGD,eAAeC,EAAOC,EAAU,CAE9B,MAAMC,EAASxD,KAAgB,OAAOuD,CAAQ,CAAC,EAEzC,CAAChD,EAAQC,CAAM,EAAI,MAAM,QAAQ,IAAI,CACzCgD,GAAQ,QAAU/R,GAAY8R,CAAQ,EAAE,MAAM,IAAM,IAAI,EACxDC,GAAQ,QAAU7R,GAAkB4R,CAAQ,EAAE,MAAM,IAAM,EAAE,CAClE,CAAK,EAEK1D,EAAIU,GAAU,CAAA,EACd7P,EAAUmP,EAAE,MAAQA,EAAE,WAAa,iBACnC4D,EAAU5D,EAAE,OAASA,EAAE,gBAAkBoB,GACzCyC,EAAU7D,EAAE,SAAWA,EAAE,YAAc,MACvC8D,EAAU9D,EAAE,SAAWA,EAAE,YAAc,MACvC+D,GAAU/D,EAAE,QAAWA,EAAE,WAAc,MACvCgE,EAAUhE,EAAE,WAAaA,EAAE,gBAAkB,GAC7CiE,GAAU,MAAM,QAAQjE,EAAE,MAAM,EAAIA,EAAE,OAC3BA,EAAE,MAAQ,CAACA,EAAE,KAAK,EAAI,CAAA,EAGjCkE,GADY,MAAM,QAAQvD,CAAM,EAAIA,EAAS,CAAA,GACpB,IAAIwD,GAAO,CACxC,MAAMnC,GAASmC,GAAK,OAASA,GAAK,UAAYA,GAAK,MAAQ,QACrDC,GAAS,MAAM,QAAQD,GAAK,MAAM,EAAIA,EAAI,OAChC,MAAM,QAAQA,GAAK,KAAK,EAAIA,EAAI,MAAQ,GACxD,MAAO;AAAA;AAAA,yCAE4BnC,EAAK;AAAA;AAAA;AAAA,cAGhCoC,GAAO,IAAIC,IAAMlC,GAASkC,GAAIxT,CAAI,CAAC,EAAE,KAAK,EAAE,CAAC;AAAA;AAAA,eAGvD,CAAC,EAAE,KAAK,EAAE,EAEV4R,EAAU,UAAY;AAAA,kCACQ5R,CAAI;AAAA;AAAA;AAAA,wCAGE+S,CAAG,UAAU/S,CAAI;AAAA,oDACLuQ,EAAY;AAAA;AAAA;AAAA;AAAA,kGAIkCM,GAAM1B,CAAC,CAAC;AAAA,yFACjB+D,EAAG;AAAA;AAAA;AAAA,6FAGCD,CAAO;AAAA,6FACPD,CAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAMnFG,GAAO,GAAG;AAAA;AAAA;AAAA,YAGfC,GAAO,OAAS,wBAAwBA,GAAO,IAAIjT,GAAK,qBAAqBA,CAAC,SAAS,EAAE,KAAK,EAAE,CAAC,SAAW,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAMhHkT,GAAgB,uDAAuD;AAAA,aAE/E,CAGA,eAAeI,EAAQzS,EAAI,CACzB,GAAI,CAAEyB,GAAS,MAAG,CAAM,MAAQ,CAAC,CACjC2I,EAAI,EACJ,MAAMwH,EAAO5R,CAAE,CACjB,CAEA,MAAO,CAAE,QAAAyS,EAAS,MAAA1H,CAAK,CACzB,CC3UA,MAAMkE,GAAsB,oBAC5B,SAASC,GAAoBC,EAAM,SAAU,CAC3C,GAAIA,EAAI,eAAeF,EAAmB,EAAG,OAC7C,MAAMG,EAAOD,EAAI,cAAc,KAAK,EACpCC,EAAK,GAAKH,GACVG,EAAK,aAAa,cAAe,MAAM,EACvCA,EAAK,MAAM,SAAW,WACtBA,EAAK,MAAM,MAAQ,IACnBA,EAAK,MAAM,OAAS,IACpBA,EAAK,MAAM,SAAW,SACtBA,EAAK,UAAYJ,GACjBG,EAAI,KAAK,QAAQC,CAAI,CACvB,CACA,MAAMC,GAAO,CAACrP,EAAIsP,EAAM,QACtB,eAAeA,CAAG,oCAAoCtP,CAAE,kBAAkBA,CAAE,iBAGxE0S,GAAmB,uBACzB,SAASC,IAAsB,CAC7B,GAAI,SAAS,eAAeD,EAAgB,EAAG,OAC/C,MAAME,EAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAQNC,EAAQ,SAAS,cAAc,OAAO,EAC5CA,EAAM,GAAKH,GACXG,EAAM,YAAcD,EACpB,SAAS,KAAK,YAAYC,CAAK,CACjC,CAGA,MAAMC,GAAgB,EAGhBvD,GACJ,2BACA,mBACE;AAAA;AAAA;AAAA;AAAA,WAKJ,EAGA,SAASwD,GAAkBtO,EAAG,CAI5B,MAHI,GAACA,GAAK,OAAOA,GAAM,UACnB,CAAC,gBAAgB,KAAKA,CAAC,GACvB,mBAAmB,KAAKA,CAAC,GACzB,CAAC,8CAA8C,KAAKA,CAAC,EAE3D,CAGA,SAASuO,IAAmB,CAC1B,MAAM5K,EAAI,OAAO,YAAc,SAAS,gBAAgB,aAAe,EACvE,OAAIA,GAAK,KAAa,GAClBA,GAAK,IAAY,GACd,EACT,CAGA,SAAS6K,GAAiBzE,EAAM,CAC9B,IAAIO,EAAMP,EAAK,cAAc,cAAc,EAC3C,OAAKO,IACHA,EAAM,SAAS,cAAc,QAAQ,EACrCA,EAAI,GAAK,cACTA,EAAI,KAAO,SACXA,EAAI,UAAY,gBAChBA,EAAI,aAAa,eAAgB,OAAO,EACxCA,EAAI,YAAc,aAEhBP,EAAK,cAAc,eAAe,GAClCA,EAAK,cAAc,UAAU,GAC7BA,GACI,YAAYO,CAAG,GAEhBA,CACT,CAGA,SAASmE,GAAUhU,EAAI,GAAI,CACzB,OAAO,OAAOA,CAAC,EACZ,QAAQ,OAAQ,GAAG,EACnB,QAAQ,oBAAqB,KAAK,EAClC,KAAI,CACT,CACA,SAASiU,GAAWlR,EAAI,GAAI,CAC1B,MAAMuI,EAAQvI,EAAE,eAAiBA,EAAE,YAAcA,EAAE,WAAa,GAC1DmR,EAAQnR,EAAE,kBAAoBA,EAAE,aAAeA,EAAE,eAAiBA,EAAE,SAAW,GACrF,OAAIuI,GAAS4I,EAAY,GAAG5I,CAAK,IAAI4I,CAAG,GACpC5I,EAAc,SAASA,CAAK,GACzB,EACT,CACA,SAAS6I,GAAUpR,EAAG,CAEpB,OADY,MAAM,QAAQA,GAAG,MAAM,EAAIA,EAAE,OAAUA,GAAG,MAAQ,CAACA,EAAE,KAAK,EAAI,CAAA,GAC/D,IAAI,MAAM,EAAE,OAAO,OAAO,EAAE,MAAM,EAAG,CAAC,CACnD,CACA,SAASqR,GAAWrR,EAAG,CACrB,MAAMe,EAAMkQ,GAAUjR,GAAG,gBAAkBA,GAAG,WAAaA,GAAG,OAAS,EAAE,EAEnExD,EADU4U,GAAUpR,CAAC,EAAE,KAAK9C,GAAK,QAAQ,KAAKA,CAAC,CAAC,EAElD,mEACA,8DAEEoU,EAAQ,CAAA,EACRC,EAAKH,GAAUpR,CAAC,EAAOuR,EAAG,QAAQD,EAAM,KAAK,WAAWC,EAAG,KAAK,IAAI,CAAC,EAAE,EAC7E,MAAMxB,EAAU/P,EAAE,YAAcA,EAAE,QAAa+P,GAASuB,EAAM,KAAK,YAAYvB,CAAO,EAAE,EACxF,MAAMyB,EAAMN,GAAWlR,CAAC,EAAOwR,GAAKF,EAAM,KAAK,WAAWE,CAAG,EAAE,EAE/D,IAAItB,EAAMnP,GAAOvE,EACjB,OAAI8U,EAAM,SAAQpB,GAAO,IAAMoB,EAAM,KAAK,IAAI,EAAI,KAI9CpB,EAAI,OADU,KACYnP,IAC5BmP,GAAO,gDAEFA,CACT,CAIO,SAASuB,GAASlF,EAAO,SAAS,cAAc,kBAAkB,EAAG,CAC1E,GAAI,CAACA,EAAM,OAEXU,GAAoB,QAAQ,EAC5ByD,GAAmB,EAGnB,MAAMgB,EAAanF,EAAK,cAAc,gBAAgB,EAChDoF,EAAapF,EAAK,cAAc,iBAAiB,EACjDqF,EAAarF,EAAK,cAAc,gBAAgB,EAChDsF,EAAatF,EAAK,cAAc,mBAAmB,EACnDuF,EAAad,GAAiBzE,CAAI,EAElCwF,EAAcxF,EAAK,cAAc,QAAQ,EACzCyF,EAAczF,EAAK,cAAc,YAAY,EAE7C0F,EAAc1F,EAAK,cAAc,qBAAqB,EACtD2F,EAAc3F,EAAK,cAAc,cAAc,GAAM0F,GAAQ,cAAc,UAAU,EACrFE,EAAc5F,EAAK,cAAc,eAAe,GAAK0F,GAAQ,cAAc,WAAW,EAEtFG,EAAc7F,EAAK,cAAc,sBAAsB,EACvD8F,EAAc9F,EAAK,cAAc,eAAe,GAAK6F,GAAS,cAAc,UAAU,EACtFE,EAAc/F,EAAK,cAAc,gBAAgB,GAAI6F,GAAS,cAAc,WAAW,EAEvF5F,EAAQD,EAAK,cAAc,eAAe,EAC1CgG,EAAQhG,EAAK,cAAc,gBAAgB,EAC3CiG,EAAQjG,EAAK,cAAc,gBAAgB,EAEjD,GAAI,CAACC,EAAM,CACT,QAAQ,KAAK,mDAAmD,EAChE,MACF,CAEA,MAAMiG,EAAclG,EAAK,QAAQ,WAAW,GAAKA,EAG3CmG,EAAWjE,GAAkB,QAAQ,EAG3C,IAAIkE,EAAQ,EAGRC,EAAmB,KAGvB,MAAMC,EAAQC,GAAOA,GAAMA,EAAG,gBAAgB,QAAQ,EAChDC,EAAQD,GAAOA,GAAMA,EAAG,aAAa,SAAU,EAAE,EACjDE,EAAY,IAAM,WAAW,oBAAoB,EAAE,QACnDC,EAAU,IAAO,GAAG,WAAa,GAAG,MAAQ,IAAI,YAAW,EAC3DC,GAAa,IAAMT,EAAY,UAAU,SAAS,WAAW,EAEnE,SAASU,EAAmBC,EAAQ,CAClCtB,GAAY,aAAa,eAAgB,OAAOsB,CAAM,CAAC,EACnDtB,IAAYA,EAAW,YAAcsB,EAAS,eAAiB,YACrE,CAEA,SAASC,GAA6B,CAAE,UAAAC,EAAY,EAAK,EAAK,CAAA,EAAI,CAChE,MAAMC,EAAOL,KAAenC,GAAgB,EAAKF,GAC7C+B,IAAqBW,IACzBX,EAAmBW,EACnBlS,EAAY,SAASkS,CAAI,EACrBD,GAAWjS,EAAY,QAAQ,CAAC,EACpCmS,GAAW,EACb,CAEA,SAASC,GAAgB,CACvB,MAAMC,EAAKrS,EAAY,IAAG,EACtB2R,EAAS,GACXtB,GAAO,aAAa,cAAe,OAAO,EAC1CC,GAAW,aAAa,gBAAiB,OAAO,EAChDtQ,EAAY,eAAe,EAAK,IAEhCqQ,GAAO,aAAa,cAAegC,EAAG,kBAAoB,QAAU,MAAM,EAC1E/B,GAAW,aAAa,gBAAiB+B,EAAG,kBAAoB,OAAS,OAAO,EAEpF,CAEA,SAASC,GAAkB,CACzB,MAAMrN,EAAMiG,EAAK,sBAAqB,EAAG,IAAM,OAAO,QAAU,GAChE,OAAO,SAAS,CAAE,IAAAjG,EAAK,SAAU,QAAQ,CAAE,CAC7C,CAEA,SAASsN,EAAWrS,EAAI,CAClBA,GACFsR,EAAKL,CAAK,EAAGO,EAAKvG,CAAI,EAAGuG,EAAKR,CAAK,EAAGsB,GAAqB,IAE3Dd,EAAKP,CAAK,EAAGK,EAAKrG,CAAI,EAE1B,CACA,SAASqH,IAAwB,CAC/BrH,EAAK,MAAM,OAAS,GACpBA,EAAK,MAAM,SAAW,GACtBA,EAAK,MAAM,WAAa,GACxBA,EAAK,MAAM,WAAa,EAC1B,CAGA,SAASsH,IAAoB,CAC3B,MAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAUT,CACA,SAASC,GAAeC,EAAO,CAC7B,MAAMvX,EAAI,KAAK,IAAI,EAAG,OAAOuX,CAAK,GAAKnD,EAAa,EACpDrE,EAAK,UAAY,IAAI,MAAM/P,CAAC,EAAE,KAAK,CAAC,EAAE,IAAIqX,EAAiB,EAAE,KAAK,EAAE,EACpEjB,EAAKrG,CAAI,EAAGuG,EAAKP,CAAK,EAAGO,EAAKR,CAAK,CACrC,CACA,SAAS0B,IAAoB,CACdzH,EAAK,iBAAiB,cAAc,EAC5C,QAASsD,GAAQ,CACpB,MAAMoE,EAAO,IAAMpE,EAAI,UAAU,IAAI,WAAW,EAC5CA,EAAI,UAAYA,EAAI,aAAe,EAAGoE,EAAI,EACzCpE,EAAI,iBAAiB,OAAQoE,EAAM,CAAE,KAAM,GAAM,CACxD,CAAC,CACH,CACA,SAASC,GAAqB,CAC5B3H,EAAK,iBAAiB,KAAK,EAAE,QAAQsD,GAAO,CAC1CA,EAAI,QAAU,IAAM,CAAEA,EAAI,QAAU,KAAMA,EAAI,IAAMxC,EAAc,CACpE,CAAC,CACH,CAGA,IAAI8G,GAAmB,KACvB,SAASC,GAAejO,EAAG,CACzB,MAAMkO,EAAKlO,GAAKoG,EAAK,sBAAqB,EAAG,OAC7CA,EAAK,MAAM,WAAa,SACxBA,EAAK,MAAM,SAAW,SACtBA,EAAK,MAAM,WAAa,OACxBA,EAAK,MAAM,OAAS,GAAG,KAAK,IAAI,EAAG,KAAK,MAAM8H,GAAM,CAAC,CAAC,CAAC,IACzD,CACA,SAASC,IAAmB,CAAEV,GAAqB,CAAI,CACvD,SAASW,GAAgBC,EAAU,CACjCA,EAAQ,EACHjI,EAAK,aACV,MAAMkI,EAAOlI,EAAK,aAClBA,EAAK,MAAM,WAAa,oBACxBA,EAAK,MAAM,OAAS,GAAGkI,CAAI,KAC3B,MAAMC,EAAStP,GAAM,CACfA,EAAE,SAAWmH,GAAQnH,EAAE,eAAiB,WAC5CmH,EAAK,oBAAoB,gBAAiBmI,CAAK,EAC/CJ,GAAgB,EAClB,EACA/H,EAAK,iBAAiB,gBAAiBmI,CAAK,EAC5C,aAAaP,EAAgB,EAC7BA,GAAmB,WAAWG,GAAkB,GAAG,CACrD,CAGA,SAASK,GAAU,EAAG,CACpB,MAAM7W,EAAQ,GAAG,IAAM,GAAG,KAAO,GAAG,UAAY,GAC1ChB,EAAQ,GAAG,WAAa,GAAG,MAAQ,UACnC8X,EAAQ,GAAG,gBAAkB,GAAG,OAAS,GAAG,OAAS,GACrD/E,EAAQgB,GAAkB+D,CAAM,EAAIA,EAASvH,GAE7C4C,EAAQmB,GAAW,CAAC,EACpByD,EAAQ,MAAM,QAAQ,GAAG,MAAM,EAAI,EAAE,OAAU,GAAG,MAAQ,CAAC,EAAE,KAAK,EAAI,CAAA,EAE5E,MAAO;AAAA,kCACuB/W,CAAE;AAAA;AAAA;AAAA;AAAA,mBAIjB+R,CAAG;AAAA,mBACH/S,CAAI;AAAA;AAAA,mDAE4BuQ,EAAY;AAAA;AAAA;AAAA,kCAG7BwH,EAAK,IAAI9V,GAAK,qBAAqBA,CAAC,SAAS,EAAE,KAAK,EAAE,CAAC;AAAA,kCACvDjC,CAAI;AAAA,gCACNmT,CAAG;AAAA;AAAA;AAAA,YAGvB9C,GAAK,iCAAiC,CAAC;AAAA;AAAA,YAGjD,CACA,SAAS2H,GAAWlS,EAAK,CACvB2J,EAAK,UAAY3J,EAAI,IAAI+R,EAAS,EAAE,KAAK,EAAE,EAC3CT,EAAkB,EAClBF,GAAiB,CACnB,CAEA,SAASe,GAAYrY,EAAMsY,EAAY,CACrC,GAAIA,GAAc,EAAG,CAAE1C,EAAM,UAAY,GAAIQ,EAAKR,CAAK,EAAG,MAAQ,CAClE,GAAI0C,IAAe,EAAG,CACpB1C,EAAM,UAAY,2DAClBM,EAAKN,CAAK,EAAG,MACf,CACA,MAAMzF,EAAM,CAACoI,EAAO5T,GAAG6T,GAAM,GAAOC,EAAM,KACxC,WAAWD,GAAM,WAAa,EAAE,eAAe7T,EAAC,YAAY8T,EAAM,SAAW,EAAE,KAAKF,CAAK,YAErFG,EAAM,EACNC,EAAO,KAAK,IAAI,EAAG3Y,EAAO0Y,CAAG,EAC7BE,EAAK,KAAK,IAAIN,EAAYtY,EAAO0Y,CAAG,EACpCxX,EAAM,CAAA,EAEZA,EAAI,KAAKiP,EAAI,IAAK,KAAK,IAAI,EAAGnQ,EAAO,CAAC,EAAGA,IAAS,EAAG,EAAK,CAAC,EACvD2Y,EAAO,IACTzX,EAAI,KAAKiP,EAAI,IAAK,EAAG,GAAOnQ,IAAS,CAAC,CAAC,EACnC2Y,EAAO,GAAGzX,EAAI,KAAK,0CAA0C,GAEnE,QAASyD,EAAIgU,EAAMhU,GAAKiU,EAAIjU,IAAKzD,EAAI,KAAKiP,EAAI,OAAOxL,CAAC,EAAGA,EAAG,GAAOA,IAAM3E,CAAI,CAAC,EAC1E4Y,EAAKN,IACHM,EAAKN,EAAa,GAAGpX,EAAI,KAAK,0CAA0C,EAC5EA,EAAI,KAAKiP,EAAI,OAAOmI,CAAU,EAAGA,EAAY,GAAOtY,IAASsY,CAAU,CAAC,GAE1EpX,EAAI,KAAKiP,EAAI,IAAK,KAAK,IAAImI,EAAYtY,EAAO,CAAC,EAAGA,IAASsY,EAAY,EAAK,CAAC,EAE7E1C,EAAM,UAAY1U,EAAI,KAAK,EAAE,EAC7BgV,EAAKN,CAAK,CACZ,CAGA,eAAeiD,IAAa,CAC1B,GAAI,CACFpD,GAAS,UAAU,IAAI,SAAS,EAChCC,GAAY,aAAa,YAAa,MAAM,EACxCA,IAAYA,EAAW,SAAW,IAClCC,IACFA,EAAY,UAAY;AAAA;AAAA;AAAA;AAAA,kBAM1B,MAAMjK,EAAO,MAAM3K,GAAW,EAC1B4U,IAAaA,EAAY,UAAYjK,EAAK,IAAKnL,GAAM,iBAAiBA,CAAC,KAAKA,CAAC,OAAO,EAAE,KAAK,EAAE,EACnG,MAAQ,CACFoV,IAAaA,EAAY,UAAY,kCAC3C,QAAC,CACCF,GAAS,UAAU,OAAO,SAAS,EACnCC,GAAY,gBAAgB,WAAW,EACnCA,IAAYA,EAAW,SAAW,GACxC,CACF,CAEA,eAAemB,GAAYiC,EAAa,GAAM,CAC5C,MAAMC,EAAO,EAAE/C,EAET,CAAE,KAAAhW,EAAM,MAAAC,EAAO,MAAAC,EAAO,KAAAC,EAAM,EAAAqR,CAAC,EAAK9M,EAAY,IAAG,EAEvDgT,GAAe7H,EAAK,sBAAqB,EAAG,MAAM,EAClDuH,GAAenX,CAAK,EACpBmW,EAAKR,CAAK,EAEV,IAAIlK,EAAO,CAAA,EACPsF,GAAQ,EAEZ,GAAI,CACF,MAAMgI,EAAS,MAAMjZ,GAAa,CAChC,KAAAC,EAAM,MAAAC,EACN,MAAOC,GAAS,GAChB,KAAOC,GAAS,GAChB,KAAOqR,GAAG,OAAI,GAAQ,EAC9B,CAAO,EACD,GAAIuH,IAAS/C,EAAO,OACpBtK,EAAQ,MAAM,QAAQsN,EAAO,OAAO,EAAIA,EAAO,QAAW,MAAM,QAAQA,CAAM,EAAIA,EAAS,CAAA,EAC3FhI,GAAQ,OAAOgI,EAAO,cAAgBA,EAAO,OAAStN,EAAK,QAAU,CAAC,CACxE,MAAQ,CACN,GAAIqN,IAAS/C,EAAO,OACpBtK,EAAO,CAAA,EAAIsF,GAAQ,CACrB,CAEA,IAAIsH,GAAa,KAAK,IAAI,EAAG,KAAK,KAAKtH,GAAQ,KAAK,IAAI,EAAG,OAAO/Q,CAAK,GAAKiU,EAAa,CAAC,CAAC,EAC3F,GAAIlU,EAAOsY,IAAcQ,EAAc,OAAApU,EAAY,QAAQ4T,EAAU,EAAUzB,GAAY,EAAK,EAChG,GAAI7W,EAAO,GAAK8Y,EAAuB,OAAApU,EAAY,QAAQ,CAAC,EAAkBmS,GAAY,EAAK,EAK/F,GAHI1W,IAAS,QAAQuL,EAAOA,EAAK,MAAK,EAAG,KAAK,CAACrI,EAAG2C,KAAMsQ,EAAOjT,CAAC,EAAE,cAAciT,EAAOtQ,EAAC,CAAC,CAAC,GACtF7F,IAAS,SAAQuL,EAAOA,EAAK,MAAK,EAAG,KAAK,CAACrI,EAAG2C,KAAMsQ,EAAOtQ,EAAC,EAAE,cAAcsQ,EAAOjT,CAAC,CAAC,CAAC,GAEtF0V,IAAS/C,EAEb,IAAI,CAACtK,EAAK,OAAQ,CAChBmE,EAAK,UAAY,GACjBoH,EAAW,EAAI,EACfW,GAAgB,EAChB,MACF,CAEAX,EAAW,EAAK,EAChBY,GAAgB,IAAMO,GAAW1M,CAAI,CAAC,EACtC2M,GAAY3T,EAAY,MAAM,KAAM4T,EAAU,EAChD,CAGA,SAASW,GAAeC,EAAQ,CAC9B,CAAC5D,EAAQG,CAAO,EAAE,QAAS0D,GAAO,CAChC,GAAIA,GAAMA,IAAOD,EAAQ,CACvBC,EAAG,UAAU,OAAO,MAAM,EAC1B,MAAMC,EAAKD,EAAG,cAAc,WAAW,EACnCC,IAAIA,EAAG,MAAM,QAAU,OAC7B,CACF,CAAC,CACH,CACA,SAASC,GAAeF,EAAI,CAC1B,GAAI,CAACA,EAAI,OACT,MAAM3N,EAAO,CAAC2N,EAAG,UAAU,SAAS,MAAM,EAC1CF,GAAeE,CAAE,EACjBA,EAAG,UAAU,OAAO,OAAQ3N,CAAI,EAChC,MAAM4N,EAAKD,EAAG,cAAc,WAAW,EACnCC,IAAIA,EAAG,MAAM,QAAU5N,EAAO,QAAU,OAC9C,CAGAwJ,GAAW,iBAAiB,QAAS,IAAM,CACzC,GAAI,CAAEnS,GAAS,MAAG,CAAM,MAAQ,CAAC,CACjC,MAAMkU,EAAKrS,EAAY,IAAG,EAC1BA,EAAY,eAAe,CAACqS,EAAG,iBAAiB,EAChDD,EAAa,CACf,CAAC,EACD,iBAAiB,SAAU,IAAM,CAC/BA,EAAa,EACTP,GAAU,GAAIG,GAA6B,CAAE,UAAW,EAAI,CAAE,CACpE,CAAC,EAEDnB,GAAW,iBAAiB,QAAS,IAAM,CAAE,GAAI,CAAE1S,GAAS,MAAG,CAAM,MAAQ,CAAC,CAAEwW,GAAe/D,CAAM,CAAG,CAAC,EACzGI,GAAY,iBAAiB,QAAS,IAAM,CAAE,GAAI,CAAE7S,GAAS,MAAG,CAAM,MAAQ,CAAC,CAAEwW,GAAe5D,CAAO,CAAG,CAAC,EAC3G,SAAS,iBAAiB,QAAU/M,GAAM,CAAOA,EAAE,OAAO,QAAQ,KAAK,GAAGuQ,GAAc,CAAI,CAAC,EAE7FzD,GAAY,iBAAiB,QAAU9M,GAAM,CAC3C,MAAM4Q,EAAK5Q,EAAE,OAAO,QAAQ,IAAI,EAAG,GAAK4Q,EACxC,IAAI,CAAEzW,GAAS,MAAG,CAAM,MAAQ,CAAC,CACjC6B,EAAY,QAAQ4U,EAAG,QAAQ,KAAO,EAAE,EACxCD,GAAe/D,CAAM,EACrBuB,GAAW,EACb,CAAC,EAEDlB,GAAa,iBAAiB,QAAUjN,GAAM,CAC5C,MAAM4Q,EAAK5Q,EAAE,OAAO,QAAQ,IAAI,EAAG,GAAI,CAAC4Q,EAAI,OAC5C,GAAI,CAAEzW,GAAS,MAAG,CAAM,MAAQ,CAAC,CACjC,MAAMlD,EAAI2Z,EAAG,QAAQ,KAAO,GAC5B5U,EAAY,SAAS/E,IAAM,aAAe,GAAKA,CAAC,EAChD0Z,GAAe5D,CAAO,EACtBoB,GAAW,EACXtB,GAAW,MAAK,CAClB,CAAC,EAED,SAASgE,IAAW,CAClB,GAAI,CAAE1W,GAAS,MAAG,CAAM,MAAQ,CAAC,CACjC6B,EAAY,SAAS0Q,GAAa,MAAM,KAAI,GAAM,EAAE,EACpD1Q,EAAY,QAAQ,CAAC,EACrBmS,GAAW,CACb,CACAxB,GAAW,iBAAiB,QAASkE,EAAQ,EAC7CnE,GAAa,iBAAiB,UAAY1M,GAAM,CAAMA,EAAE,MAAQ,SAAS6Q,GAAQ,CAAI,CAAC,EAEtF,SAASC,IAAW,CAClB9U,EAAY,MAAK,EACb0Q,IAAaA,EAAY,MAAQ,IACrC6D,GAAc,EACdhD,EAAmB,KACnBS,GAA6B,CAAE,UAAW,GAAM,CAClD,CACAzB,GAAU,iBAAiB,QAAS,IAAM,CAAE,GAAI,CAAEpS,GAAS,MAAG,CAAM,MAAQ,CAAC,CAAE2W,GAAQ,CAAI,CAAC,EAC5FtE,GAAY,iBAAiB,QAAS,IAAM,CAC1C,GAAI,CAAErS,GAAS,MAAG,CAAM,MAAQ,CAAC,CACjC2W,GAAQ,EACR9U,EAAY,eAAe,EAAK,EAChCoS,EAAa,CACf,CAAC,EACDlH,EAAK,cAAc,cAAc,GAAG,iBAAiB,QAAS,IAAM,CAAE,GAAI,CAAE/M,GAAS,MAAG,CAAM,MAAQ,CAAC,CAAE2W,GAAQ,CAAI,CAAC,EAEtH5D,GAAO,iBAAiB,QAAUlN,GAAM,CACtC,MAAM1C,EAAI0C,EAAE,OAAO,QAAQ,mBAAmB,EAC9C,GAAI,CAAC1C,GAAKA,EAAE,SAAU,OACtB,MAAMrB,EAAI,OAAOqB,EAAE,QAAQ,IAAI,GAAK,EACpC,GAAIrB,IAAMD,EAAY,IAAG,EAAG,KAC5B,IAAI,CAAE7B,GAAS,OAAI,CAAM,MAAQ,CAAC,CAClCmU,EAAe,EACftS,EAAY,QAAQC,CAAC,EACrBkS,GAAW,EACb,CAAC,EAGDhH,GAAM,iBAAiB,QAAUnH,GAAM,CACrC,MAAMyH,EAAMzH,EAAE,OAAO,QAAQ,mCAAmC,EAChE,GAAIyH,EAAK,CACP,MAAM/O,EAAK+O,EAAI,QAAQ,OAAO,GAAG,SAAS,GAC1C,GAAI,CAAC/O,EAAI,OACT,GAAI,CAAEyB,GAAS,MAAG,CAAM,MAAQ,CAAC,CACjCkT,EAAS,QAAQ3U,CAAE,EACnB,MACF,CACA,MAAM+R,EAAMzK,EAAE,OAAO,QAAQ,kBAAkB,EAC/C,GAAIyK,EAAK,CACP,GAAI,CAAEtQ,GAAS,MAAG,CAAM,MAAQ,CAAC,CACjC,MAAMiM,EAAMqE,EAAI,YAAcA,EAAI,KAAOA,EAAI,aAAa,KAAK,GAAK,GACpEtE,GAASC,EAAKqE,EAAI,aAAa,KAAK,GAAK,EAAE,CAC7C,CACF,CAAC,EAGDgC,GAAY,iBAAiB,QAAS,IAAM,CAC1C,GAAI,CAAEtS,GAAS,MAAG,CAAM,MAAQ,CAAC,CACjC,MAAM4T,EAAS,CAACF,GAAU,EAC1BT,EAAY,UAAU,OAAO,YAAaW,CAAM,EAChDX,EAAY,UAAU,OAAO,YAAa,CAACW,CAAM,EACjDD,EAAmBC,CAAM,EACzBR,EAAmB,KACnBS,GAA6B,CAAE,UAAW,GAAM,CAClD,CAAC,EAGDF,EAAmBD,GAAU,CAAE,EAC/BO,EAAa,EACbb,EAAmB,KACnBS,GAA6B,CAAE,UAAW,GAAO,EACjDmC,GAAU,EACVhC,GAAW,CACb,CCxiBA,SAAS4C,IAAa,CACpB,MAAM9U,EAAI,IAAI,gBAAgB,SAAS,MAAM,EACvC6M,GAAK7M,EAAE,IAAI,GAAG,GAAK,IAAI,KAAI,EAC3BzE,EAAQyE,EAAE,IAAI,OAAO,GAAK,GAC1BxE,EAAOwE,EAAE,IAAI,MAAM,GAAK,GACxB3E,EAAO,KAAK,IAAI,EAAG,OAAO2E,EAAE,IAAI,MAAM,GAAK,CAAC,CAAC,EACnD,MAAO,CAAE,EAAA6M,EAAG,MAAAtR,EAAO,KAAAC,EAAM,KAAAH,CAAI,CAC/B,CAEA,SAAS0Z,GAAWpZ,EAAG,CACrB,MAAMqE,EAAI,IAAI,gBACd,OAAIrE,EAAE,GAAGqE,EAAE,IAAI,IAAKrE,EAAE,CAAC,EACnBA,EAAE,OAAOqE,EAAE,IAAI,QAASrE,EAAE,KAAK,EAC/BA,EAAE,MAAMqE,EAAE,IAAI,OAAQrE,EAAE,IAAI,EAC5BA,EAAE,MAAQA,EAAE,OAAS,GAAGqE,EAAE,IAAI,OAAQ,OAAOrE,EAAE,IAAI,CAAC,EACjDqE,EAAE,SAAQ,CACnB,CAEO,SAASgV,IAAa,CAE3B,MAAMC,EAAWH,GAAU,EACrBpP,EAAMxF,GAAQ,EACdE,EAAQ,CAAA,EACd,IAAI8U,EAAU,GACd,UAAW3V,IAAK,CAAC,IAAI,QAAQ,OAAO,MAAM,EACpC0V,EAAS1V,CAAC,IAAM,QAAa0V,EAAS1V,CAAC,IAAMmG,EAAInG,CAAC,IACpDa,EAAMb,CAAC,EAAI0V,EAAS1V,CAAC,EACrB2V,EAAU,IAGVA,GAAS/U,GAASC,CAAK,EAG3B,IAAI+U,EAAS,KACbrV,GAAWnE,GAAM,CACf,MAAMyZ,EAAKL,GAAWpZ,CAAC,EACvB,GAAIyZ,IAAOD,EAAQ,OACnBA,EAASC,EACT,MAAMlH,EAAMkH,EAAK,IAAIA,CAAE,GAAK,SAAS,SACrC,QAAQ,aAAa,KAAM,GAAIlH,CAAG,CACpC,CAAC,CACH,CCzCO,SAASmH,GAAYpK,EAAO,SAAS,cAAc,kBAAkB,EAAG,CACxEA,IAGL+J,GAAe,EAGD7H,GAAkBlC,CAAI,EAGpCD,GAAaC,CAAI,EAGjBkF,GAASlF,CAA+B,EAC1C,CCfe,SAASqK,GAAiB9H,EAAQ,CAE/C,MAAM5L,EAAO,SAAS,cAAc,YAAY,EAChD,GAAI,CAACA,EAAM,OAEX,MAAMC,EAAS,SAAS,cAAc,oBAAoB,EACpDY,EAAW,SAAS,cAAc,sBAAsB,EAG9D,CAACZ,EAAQY,CAAQ,EAAE,QAAS+O,GAAO,CAC7BA,IAAIA,EAAG,MAAM,YAAc,OACjC,CAAC,EAGD,MAAM+D,EAAK,CAAE,QAAS,EAAK,EAGrBC,EAAS3T,GAAUY,EACzB,GAAI,CAAC+S,EAAQ,OAEb,IAAIC,EAAW,GACXxN,EAAS,EAAGC,EAAS,EACrBwN,EAAW,EAAGC,EAAU,EAG5B,MAAMC,EAASC,GACTA,EAAG,SAAWA,EAAG,QAAQ,CAAC,EACrB,CAAE,EAAGA,EAAG,QAAQ,CAAC,EAAE,QAAS,EAAGA,EAAG,QAAQ,CAAC,EAAE,OAAO,EAEzDA,EAAG,gBAAkBA,EAAG,eAAe,CAAC,EACnC,CAAE,EAAGA,EAAG,eAAe,CAAC,EAAE,QAAS,EAAGA,EAAG,eAAe,CAAC,EAAE,OAAO,EAEpE,CAAE,EAAGA,EAAG,QAAS,EAAGA,EAAG,OAAO,EAGjCC,EAAUD,GAAO,CACrB,MAAM7V,EAAI4V,EAAMC,CAAE,EAClB5N,EAASjI,EAAE,EACXkI,EAASlI,EAAE,EAIX,MAAMyG,GADS5E,GAAUD,GACL,sBAAqB,EACzC8T,EAAWjP,EAAK,KAChBkP,EAAWlP,EAAK,IAEhBgP,EAAW,GAGPI,EAAG,YAAYA,EAAG,eAAc,EAEpC,OAAO,iBAAiB,YAAaE,EAAQR,CAAE,EAC/C,OAAO,iBAAiB,YAAaQ,EAAQR,CAAE,EAC/C,OAAO,iBAAiB,WAAYS,EAAMT,CAAE,EAC5C,OAAO,iBAAiB,UAAWS,EAAMT,CAAE,CAC7C,EAEMQ,EAAUF,GAAO,CACrB,GAAI,CAACJ,EAAU,OAEf,MAAMzV,EAAI4V,EAAMC,CAAE,EACZ3R,EAAKlE,EAAE,EAAIiI,EACX9D,EAAKnE,EAAE,EAAIkI,EAEX+N,EAASpU,GAAUD,EACfqU,EAAO,YACPA,EAAO,aAGjBA,EAAO,MAAM,SAAW,QACxBA,EAAO,MAAM,KAAO,GAAG,KAAK,MAAMP,EAAWxR,CAAE,CAAC,KAChD+R,EAAO,MAAM,IAAO,GAAG,KAAK,MAAMN,EAAWxR,CAAE,CAAC,KAChD8R,EAAO,MAAM,MAAQ,OACrBA,EAAO,MAAM,OAAS,OAElBJ,EAAG,YAAYA,EAAG,eAAc,CACtC,EAEMG,EAAQH,GAAO,CACnBJ,EAAW,GACX,OAAO,oBAAoB,YAAaM,EAAQR,CAAE,EAClD,OAAO,oBAAoB,YAAaQ,EAAQR,CAAE,EAClD,OAAO,oBAAoB,WAAYS,EAAMT,CAAE,EAC/C,OAAO,oBAAoB,UAAWS,EAAMT,CAAE,EAC1CM,EAAG,YAAYA,EAAG,eAAc,CACtC,EAGAL,EAAO,iBAAiB,aAAcM,EAAQP,CAAE,EAChDC,EAAO,iBAAiB,YAAaM,EAAQP,CAAE,EAI/C3T,EAAK,UAAU,IAAI,0BAA0B,CAC/C,CC/FO,SAASsU,GAAoBC,EAAiB,qBAAsB3I,EAAQ,CACjF,MAAMhC,EAAM,SAAS,cAAc2K,CAAc,EACjD,GAAI,CAAC3K,GAAOA,EAAI,QAAQ,UAAW,OACnCA,EAAI,QAAQ,UAAY,IAGxB,MAAM4K,EAAW,sBACjB,GAAI,CAAC,SAAS,eAAeA,CAAQ,EAAG,CACtC,MAAMhE,EAAK,SAAS,cAAc,OAAO,EACzCA,EAAG,GAAKgE,EACRhE,EAAG,YAAc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAmBjB,SAAS,KAAK,YAAYA,CAAE,CAC9B,CAEA,IAAIiE,EAAM,KACNC,EAAa,KAEjB,SAASC,GAAW,CACdF,GAAOA,EAAI,YAAYA,EAAI,WAAW,YAAYA,CAAG,EACzDA,EAAM,KACN,SAAS,oBAAoB,QAASG,EAAY,EAAI,EACtD,OAAO,oBAAoB,SAAUC,CAAgB,EACrD,OAAO,oBAAoB,SAAUA,CAAgB,EACrD,SAAS,oBAAoB,UAAW1I,CAAK,CAC/C,CACA,SAASA,EAAMhK,EAAE,CAAKA,EAAE,MAAM,UAAUwS,EAAQ,CAAI,CACpD,SAASC,EAAWzS,EAAE,CACfsS,GACDtS,EAAE,SAAWyH,IACZ6K,EAAI,SAAStS,EAAE,MAAM,GAAGwS,EAAQ,EACvC,CAEA,SAASE,GAAmB,CAC1B,GAAI,CAACJ,EAAK,OACV,MAAMpS,EAAIuH,EAAI,sBAAqB,EAC7B3G,EAAI,KAAK,IAAI,IAAK,KAAK,MAAMZ,EAAE,KAAK,CAAC,EAC3CoS,EAAI,MAAM,MAAQxR,EAAI,KACtBwR,EAAI,MAAM,SAAWxR,EAAI,KAEzB,MAAM6R,EAAK,OAAO,WACZC,EAAM,EACN5R,EAAO,KAAK,IAAI,KAAK,IAAI4R,EAAK1S,EAAE,IAAI,EAAGyS,EAAK7R,EAAI8R,CAAG,EACnD3R,EAAOf,EAAE,OAAS,EAGxBoS,EAAI,MAAM,KAAOtR,EAAO,KACxBsR,EAAI,MAAM,IAAOrR,EAAM,IACzB,CAEA,SAAS4R,EAASC,EAAS,CAEzB,GADIP,IAAc,aAAaA,CAAU,EAAGA,EAAa,MACrD,CAACO,EAAS,CAAEN,EAAQ,EAAI,MAAQ,CACpCD,EAAa,WAAW,IAAM,CAC5B,GAAI,CACE9I,GAAQ,MAAOA,EAAO,MAAK,EACtBA,GAAQ,KAAMA,EAAO,KAAI,EACzBA,GAAQ,OAAOA,EAAO,MAAK,CACtC,MAAQ,CAAC,CACT8I,EAAa,IACf,EAAGO,EAAU,GAAK,GAAI,EACtBN,EAAQ,CACV,CAEA,SAASO,EAAWrb,EAAM,CACxB,MAAMkZ,EACJ,SAAS,cAAc,+BAA+BlZ,CAAI,IAAI,GAC9D,MAAM,KAAK,SAAS,iBAAiB,mBAAmB,CAAC,EACtD,KAAKqR,IAAMA,EAAE,aAAa,IAAI,OAAO,YAAW,IAAO,OAAOrR,CAAI,EAAE,YAAW,CAAE,EAClFkZ,GAAIA,EAAG,MAAK,EAChB4B,EAAQ,CACV,CAEA,SAASQ,GAAW,CAClBR,EAAQ,EACRF,EAAM,SAAS,cAAc,KAAK,EAClCA,EAAI,UAAY,aAChBA,EAAI,UAAY;AAAA;AAAA;AAAA;AAAA,YAIR,CAAC,MAAM,OAAO,OAAO,UAAU,aAAa,WAAW,EAAE,IAAIza,GAC7D,8DAA8DA,CAAC,KAAKA,CAAC,WACjF,EAAY,KAAK,EAAE,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAYhB,SAAS,KAAK,YAAYya,CAAG,EAE7BA,EAAI,iBAAiB,QAAUtS,GAAM,CACnC,MAAMiT,EAAOjT,EAAE,OAAO,QAAQ,mBAAmB,EACjD,GAAIiT,EAAM,CAAEF,EAAWE,EAAK,QAAQ,KAAK,EAAG,MAAQ,CACpD,MAAM3V,EAAI0C,EAAE,OAAO,QAAQ,cAAc,EACzC,GAAI1C,EAAG,CAAEuV,EAAS,OAAOvV,EAAE,QAAQ,KAAK,GAAK,CAAC,EAAG,MAAQ,CAC3D,CAAC,EAGD,sBAAsBoV,CAAgB,EACtC,OAAO,iBAAiB,SAAUA,EAAkB,CAAE,QAAS,GAAM,EACrE,OAAO,iBAAiB,SAAUA,CAAgB,EAClD,SAAS,iBAAiB,QAASD,EAAY,EAAI,EACnD,SAAS,iBAAiB,UAAWzI,CAAK,CAC5C,CAGAvC,EAAI,iBAAiB,QAAUzH,GAAM,CAEnC,GADAA,EAAE,eAAc,EACZsS,EAAK,CAAEE,EAAQ,EAAI,MAAQ,CAC/BQ,EAAQ,CACV,CAAC,CACH,CCzHA,SAAS/V,GAAaC,EAAS,CAC7B,GAAI,CAACA,EAAS,MAAO,GACrB,GAAI,cAAc,KAAKA,CAAO,EAAG,OAAOA,EAExC,GAAI,CACF,MAAMC,EAAI,IAAI,IAAID,EAAS,SAAS,IAAI,EACxC,GAAI,cAAc,KAAKC,EAAE,QAAQ,EAAG,OAAOA,EAAE,SAAS,MAAM,CAAC,EAC7D,MAAMlG,EAAIkG,EAAE,aAAa,IAAI,GAAG,EAChC,GAAIlG,GAAK,cAAc,KAAKA,CAAC,EAAG,OAAOA,EACvC,MAAMmG,EAAID,EAAE,SAAS,MAAM,kCAAkC,EAC7D,GAAIC,GAAKA,EAAE,CAAC,GAAK,cAAc,KAAKA,EAAE,CAAC,CAAC,EAAG,OAAOA,EAAE,CAAC,CACvD,MAAQ,CAAa,CACrB,MAAO,EACT,CAEA,MAAM8V,GAAQ1V,GAAQ,MAAM,KAAK,IAAI,KAAKA,GAAO,CAAA,GAAI,OAAO,OAAO,CAAC,CAAC,EACrE,SAAS2V,GAAQxY,EAAG,CAClB,MAAM6C,EAAM7C,EAAE,MAAK,EACnB,QAASjB,EAAI8D,EAAI,OAAS,EAAG9D,EAAI,EAAGA,IAAK,CACvC,MAAM+D,EAAK,KAAK,OAAM,GAAM/D,EAAI,GAAM,EACtC,CAAC8D,EAAI9D,CAAC,EAAG8D,EAAIC,CAAC,CAAC,EAAI,CAACD,EAAIC,CAAC,EAAGD,EAAI9D,CAAC,CAAC,CACpC,CACA,OAAO8D,CACT,CAMA,MAAM4V,GAAWF,GAAK,CAEpB,cAAc,cAAc,cAAc,cAAc,cACxD,cAAc,cAAc,cAAc,cAAc,cACxD,cAAc,cAAc,cAAc,cAAc,cACxD,cAAc,cAAc,cAAc,cAAc,cACxD,cAAc,cAAc,cAAc,cAAc,cACxD,cAAc,cAAc,cAAc,cAAc,cACxD,cAAc,cAEd,cAAc,cAAc,cAAc,cAAc,cACxD,cAAc,cAAc,cAAc,cAAc,cACxD,cAAc,cAAc,cAAc,cAAc,cACxD,cAAc,cAAc,cAAc,cAAc,cACxD,aACF,CAAC,EAMKG,GAAc,gBACdC,GAAc,gBAEpB,SAASC,IAAa,CACpB,GAAI,CACF,MAAM7X,EAAM,aAAa,QAAQ2X,EAAW,EACtC7V,EAAM9B,EAAM,KAAK,MAAMA,CAAG,EAAI,CAAA,EACpC,OAAO,MAAM,QAAQ8B,CAAG,EAAI0V,GAAK1V,CAAG,EAAI,CAAA,CAC1C,MAAQ,CAAE,MAAO,CAAA,CAAI,CACvB,CACA,SAASgW,GAAWhW,EAAK,CACvB,GAAI,CACF,aAAa,QAAQ6V,GAAa,KAAK,UAAUH,GAAK1V,CAAG,EAAE,MAAM,EAAG,GAAG,CAAC,CAAC,CAC3E,MAAQ,CAAe,CACzB,CACA,SAASiW,GAAYxQ,EAAK,CACxB,GAAI,CAACA,GAAK,OAAQ,OAClB,MAAMtB,EAAM,IAAI,IAAI4R,IAAY,EAChCtQ,EAAI,QAASvK,GAAOiJ,EAAI,IAAIjJ,CAAE,CAAC,EAC/B8a,GAAW,CAAC,GAAG7R,CAAG,CAAC,CACrB,CAMA,SAAS+R,GAAexM,EAAO,SAAU,CACvC,MAAM1O,EAAM,IAAI,IAGhB,OAAA0O,EAAK,iBAAiB,wBAAwB,EAAE,QAASvM,GAAM,CAC7D,MAAM8N,EAAO9N,EAAE,aAAa,MAAM,GAAK,GACjCjC,EAAKuE,GAAawL,CAAI,EACxB/P,GAAIF,EAAI,IAAIE,CAAE,CACpB,CAAC,EAGDwO,EAAK,iBAAiB,sCAAsC,EAAE,QAASuG,GAAO,CAC5E,MAAM/R,EAAM+R,EAAG,aAAa,SAAS,GAAKA,EAAG,aAAa,cAAc,GAAKA,EAAG,aAAa,WAAW,GAAK,GACvG/U,EAAKuE,GAAavB,CAAG,EACvBhD,GAAIF,EAAI,IAAIE,CAAE,CACpB,CAAC,EAEM,CAAC,GAAGF,CAAG,CAChB,CAEA,SAASmb,IAAmB,CAE1BF,GAAYC,GAAc,CAAE,EAGjB,IAAI,iBAAkBE,GAAc,CAC7C,IAAIC,EAAQ,CAAA,EACZ,UAAWzW,KAAKwW,EACTxW,EAAE,YACPA,EAAE,WAAW,QAAShG,GAAM,CACtBA,EAAE,WAAa,IACnByc,EAAQA,EAAM,OAAOH,GAAetc,CAAC,CAAC,EACxC,CAAC,EAECyc,EAAM,QAAQJ,GAAYI,CAAK,CACrC,CAAC,EACE,QAAQ,SAAS,gBAAiB,CAAE,UAAW,GAAM,QAAS,GAAM,CACzE,CAMA,SAASC,IAAY,CACnB,MAAMC,EAAMR,GAAU,EAChBS,EAAMN,GAAc,EAC1B,OAAOR,GAAK,CAAC,GAAGE,GAAU,GAAGW,EAAK,GAAGC,CAAG,CAAC,CAC3C,CAMA,SAASC,GAAcxK,EAAQ,CAC7B,MAAMyK,EAAOJ,GAAS,EACtB,GAAI,CAACI,EAAK,QAAU,CAACzK,EAAQ,OAG7B,IAAI0K,EAAQhB,GAAQe,CAAI,EAGxB,MAAME,EAAO,aAAa,QAAQd,EAAW,EACzCc,GAAQD,EAAM,OAAS,GAAKA,EAAM,CAAC,IAAMC,GAC3CD,EAAM,KAAKA,EAAM,OAAO,EAE1B,aAAa,QAAQb,GAAaa,EAAM,CAAC,CAAC,EAG1C1K,EAAO,YAAY0K,EAAO,CAAE,QAAS,GAAO,KAAM,GAAM,WAAY,EAAG,CACzE,CAMA,SAAS,iBAAiB,mBAAoB,IAAM,CAElD,GAAI,CAAE7C,GAAW,CAAI,MAAQ,CAAe,CAG5C,MAAM7H,EAAS7L,KAAgB,EAG/B,GAAI,CAAE2T,GAAiB9H,CAAM,CAAG,MAAQ,CAAe,CAGvDkK,GAAgB,EAGhB,MAAMlM,EAAM,SAAS,cAAc,eAAe,EAC9CA,GACFA,EAAI,iBAAiB,QAAUzH,GAAM,CAInC,GAHAA,EAAE,eAAc,EAGZyJ,GAAQ,gBAAiB,CAC3BA,EAAO,OAAI,EACX,MACF,CAGA,GAAI,CAACA,GAAQ,aAAc,CACrBA,GAAQ,aAAcA,EAAO,OAAI,EAChCwK,GAAcxK,CAAM,EACzB,MACF,CAGAA,EAAO,OAAI,CACb,CAAC,EAIH,MAAM4K,EAAa,IAAMlC,GAAoB,qBAAsB1I,CAAM,EAGzE4K,EAAU,EAEV,OAAO,iBAAiB,OAAQA,CAAU,EAE1C,SAAS,eAAe,gBAAgB,GAAG,iBAAiB,QAAS,IAAM,CACzE,WAAWA,EAAY,CAAC,CAC1B,CAAC,CACH,CAAC,ECxND,MAAMC,EAAO,CACX,QAAS,SAAS,cAAc,kBAAkB,EAClD,SAAU,SAAS,cAAc,mBAAmB,EACpD,KAAM,SAAS,cAAc,aAAa,EAC1C,MAAO,SAAS,iBAAiB,kBAAkB,EACnD,MAAO,SAAS,iBAAiB,cAAc,EAC/C,OAAQ,SAAS,cAAc,SAAS,CAC1C,EAEA,SAASC,IAAW,CACbD,EAAK,OACVA,EAAK,KAAK,OAAS,GACnBA,EAAK,KAAK,UAAU,IAAI,MAAM,EAC9B,SAAS,KAAK,MAAM,SAAW,SAC/BA,EAAK,SAAS,aAAa,gBAAiB,MAAM,EACpD,CAEA,SAASE,IAAY,CACnB,OAAO,IAAI,QAAQC,GAAW,CAC5B,GAAI,CAACH,EAAK,KAAM,OAAOG,EAAO,EAC9BH,EAAK,KAAK,UAAU,OAAO,MAAM,EACjC,WAAW,IAAM,CACfA,EAAK,KAAK,OAAS,GACnB,SAAS,KAAK,MAAM,SAAW,GAC/BA,EAAK,SAAS,aAAa,gBAAiB,OAAO,EACnDG,EAAO,CACT,EAAG,GAAG,CACR,CAAC,CACH,CAGA,SAASC,IAAkB,CACzB,OAAQJ,EAAK,QAAQ,cAAgB,IAAM,CAC7C,CACA,SAASK,IAAqB,CAC5B,SAAS,gBAAgB,MAAM,iBAAmB,GAAGD,GAAe,CAAE,IACxE,CACAC,GAAkB,EAClB,OAAO,iBAAiB,SAAU,IAAM,sBAAsBA,EAAkB,CAAC,EAGjF,SAASC,GAAaC,EAAY/V,EAAW,IAAK,CAChD,MAAMpD,GAAOmZ,GAAc,IAAI,QAAQ,IAAK,EAAE,EACxCpH,EAAK,SAAS,eAAe/R,CAAG,GAAK,SAAS,eAAe,GAAGA,CAAG,UAAU,EACnF,GAAI,CAAC+R,EAAI,OAET,MAAMqH,EAAeJ,GAAe,EAC9BK,EAAUtH,EAAG,sBAAqB,EAAG,IAAM,OAAO,YAAcqH,EAEhE3Q,EAAS,OAAO,YAChB6Q,EAAOD,EAAU5Q,EACvB,IAAI8Q,EAAK,KAET,MAAMC,EAAOvb,GAAMA,EAAI,GAAM,EAAIA,EAAIA,EAAI,EAAI,KAAK,IAAI,GAAKA,EAAI,EAAG,CAAC,EAAI,EAEvE,SAASwb,EAAKC,EAAI,CACZH,IAAO,OAAMA,EAAKG,GACtB,MAAMnZ,EAAI,KAAK,IAAI,GAAImZ,EAAKH,GAAMnW,CAAQ,EAC1C,OAAO,SAAS,EAAGqF,EAAS6Q,EAAOE,EAAKjZ,CAAC,CAAC,EACtCA,EAAI,EACN,sBAAsBkZ,CAAI,GAG1B1H,EAAG,aAAa,WAAY,IAAI,EAChCA,EAAG,MAAM,CAAE,cAAe,EAAI,CAAE,EAChC,WAAW,IAAMA,EAAG,gBAAgB,UAAU,EAAG,CAAC,EAEtD,CACA,sBAAsB0H,CAAI,CAC5B,CAGAb,EAAK,SAAS,iBAAiB,QAASC,EAAQ,EAChDD,EAAK,UAAU,iBAAiB,QAASE,EAAS,EAElDF,EAAK,MAAM,QAAQe,GAAQ,CACzBA,EAAK,iBAAiB,QAASrV,GAAK,CAC9BqV,EAAK,QAAQ,cAAc,IAC7BrV,EAAE,eAAc,EAChBwU,GAAS,EACT,WAAW,IAAM,CACf,OAAO,SAAS,KAAOa,EAAK,aAAa,MAAM,CACjD,EAAG,GAAG,EAEV,CAAC,CACH,CAAC,EAEDf,EAAK,MAAM,iBAAiB,QAAS,GAAK,CACpC,EAAE,SAAWA,EAAK,MACpBE,GAAS,CAEb,CAAC,EAED,SAAS,iBAAiB,UAAW,GAAK,CACpC,EAAE,MAAQ,UAAYF,EAAK,MAAM,UAAU,SAAS,MAAM,GAC5DE,GAAS,CAEb,CAAC,EAGD,MAAMc,GAAW,SAAS,iBAAiB,yCAAyC,EAE9EC,GAAc,IAAI,IACxBD,GAAS,QAAQ3a,GAAK,CACpB,MAAM8N,GAAQ9N,EAAE,aAAa,MAAM,GAAK,IAAI,KAAI,EAChD,GAAI,CAAC8N,EAAK,WAAW,GAAG,EAAG,OAC3B,MAAM+M,EAAQ/M,EAAK,MAAM,CAAC,EACpBgF,EAAK,SAAS,eAAe+H,CAAK,GAAK,SAAS,eAAe,GAAGA,CAAK,UAAU,EAClF/H,IACA8H,GAAY,IAAI9H,CAAE,GAAG8H,GAAY,IAAI9H,EAAI,EAAE,EAChD8H,GAAY,IAAI9H,CAAE,EAAE,KAAK9S,CAAC,EAC5B,CAAC,EAED,IAAI8a,GAAY,KAChB,SAASC,GAAcjI,EAAI,CACrB,CAACA,GAAMgI,KAAchI,IACzB6H,GAAS,QAAQ3a,GAAKA,EAAE,UAAU,OAAO,QAAQ,CAAC,GACjD4a,GAAY,IAAI9H,CAAE,GAAK,CAAA,GAAI,QAAQ9S,GAAKA,EAAE,UAAU,IAAI,QAAQ,CAAC,EAClE8a,GAAYhI,EACd,CAEA,IAAIkI,GAAY,EAChB,MAAMC,GAAU,IACVC,GAAW,IAAM,KAAK,IAAG,EAAKF,GAEpC,IAAIG,GACJ,SAASC,IAAgB,CACnBD,IAAIA,GAAG,WAAU,EAErB,MAAME,EAAa,IAAItB,GAAe,CAAE,kBAClCuB,EAAe,IAAI,IAEzBH,GAAK,IAAI,qBACPI,GAAW,CAIT,GAHAA,EAAQ,QAAQC,GAAM,CACpBF,EAAa,IAAIE,EAAG,OAAQA,EAAG,eAAiBA,EAAG,kBAAoB,CAAC,CAC1E,CAAC,EACGN,GAAQ,EAAI,OAChB,MAAMO,EAAO,CAAC,GAAGH,EAAa,QAAO,CAAE,EAAE,KAAK,CAACtb,EAAG2C,IAAMA,EAAE,CAAC,EAAI3C,EAAE,CAAC,CAAC,EAAE,CAAC,EAClEyb,GAAQA,EAAK,CAAC,EAAI,GAAGV,GAAcU,EAAK,CAAC,CAAC,CAChD,EACA,CAAE,KAAM,KAAM,WAAAJ,EAAY,UAAW,CAAC,EAAG,IAAM,GAAK,IAAM,CAAC,CAAC,CAChE,EAEET,GAAY,QAAQ,CAACc,EAAG5I,IAAOqI,GAAG,QAAQrI,CAAE,CAAC,CAC/C,CACAsI,GAAa,EACb,OAAO,iBAAiB,SAAU,IAAM,sBAAsBA,EAAa,CAAC,EAG5E,MAAMO,GAAa,SAAS,eAAe,YAAY,EAEnDA,IACFA,GAAW,iBAAiB,QAAS,MAAO,GAAM,CAChD,EAAE,eAAc,EAChBA,GAAW,KAAI,EAEf,MAAM7N,EAAO6N,GAAW,aAAa,MAAM,GAAK,mBAC1C5a,EAAO+M,EAAK,QAAQ,IAAK,EAAE,EAC3BgF,EAAO,SAAS,eAAe/R,CAAG,GAAK,SAAS,eAAe,GAAGA,CAAG,UAAU,EAChF+R,IAGD6G,EAAK,MAAM,UAAU,SAAS,MAAM,GACtC,MAAME,GAAS,EAIjBkB,GAAcjI,CAAE,EAGhBkI,GAAY,KAAK,IAAG,EAAKC,GAGzBhB,GAAanM,EAAM,GAAG,EACxB,CAAC,EAKH6M,GAAS,QAAQ3a,GAAK,CACpBA,EAAE,iBAAiB,QAAUqF,GAAM,CACjC,GAAIrF,EAAE,QAAQ,kBAAkB,EAAG,OACnC,MAAM8N,GAAQ9N,EAAE,aAAa,MAAM,GAAK,IAAI,KAAI,EAChD,GAAI,CAAC8N,EAAK,WAAW,GAAG,EAAG,OAE3BzI,EAAE,eAAc,EAChBrF,EAAE,KAAI,EAEN,MAAMe,EAAM+M,EAAK,MAAM,CAAC,EAClBgF,EAAK,SAAS,eAAe/R,CAAG,GAAK,SAAS,eAAe,GAAGA,CAAG,UAAU,EAC9E+R,IAELiI,GAAcjI,CAAE,EAChBkI,GAAY,KAAK,IAAG,EAAKC,GACzBhB,GAAanM,CAAI,EACnB,CAAC,CACH,CAAC,EAGD6L,EAAK,MAAM,QAAQrL,GACjBA,EAAK,iBAAiB,QAAS,MAAMjJ,GAAK,CACxCA,EAAE,eAAc,EAChBiJ,EAAK,KAAI,EACT,MAAMsN,EAAWtN,EAAK,aAAa,MAAM,EACzC,MAAMuL,GAAS,EACfI,GAAa2B,CAAQ,CACvB,CAAC,CACH,EAEA,OAAO,iBAAiB,OAAQ,IAAM,CACpC5B,GAAkB,EACd,SAAS,MACX,WAAW,IAAMC,GAAa,SAAS,IAAI,EAAG,CAAC,CAEnD,CAAC,EC/MD,MAAM1Z,GAAc,aACdsb,GAAgB,GAAGhgB,GAAS,QAAQ,MAAO,EAAE,CAAC,aACpD,IAAIigB,GAAU,EACVC,GAAS,KAGThT,GAASiT,GAAS5S,GAAU6S,GAAMC,GAAWC,GAAWC,GAAcC,EAG1E,SAASC,GAASnb,EAAIob,EAAQ,IAAK,CACjC,IAAIvd,EACJ,MAAO,IAAItD,IAAS,CAClB,aAAasD,CAAC,EACdA,EAAI,WAAW,IAAMmC,EAAG,GAAGzF,CAAI,EAAG6gB,CAAK,CACzC,CACF,CAGA,SAASC,GAAYN,EAAWO,EAAQ,CACtC,GAAKP,EACL,CAAAA,EAAU,UAAY,GAEtB,QAASnd,EAAI,EAAGA,GAAK,EAAGA,IAAK,CAC3B,MAAM2d,EAAO,SAAS,cAAc,MAAM,EAC1CA,EAAK,UAAU,IAAI,MAAM,EACrB3d,GAAK0d,GAAQC,EAAK,UAAU,IAAI,QAAQ,EAC5CR,EAAU,YAAYQ,CAAI,EAEtBR,EAAU,KAAO,oBACnBQ,EAAK,iBAAiB,QAAS,IAAM,CACnCR,EAAU,QAAQ,OAAS,OAAOnd,CAAC,EACnCyd,GAAYN,EAAWnd,CAAC,EACxB4d,GAAkB,CACpB,CAAC,EACDD,EAAK,iBAAiB,aAAc,IAAME,GAAYV,EAAWnd,CAAC,CAAC,EACnE2d,EAAK,iBAAiB,aAAc,IAAM,CACxC,MAAMG,EAAc,SAASR,EAAW,QAAQ,MAAM,GAAK,EAC3DG,GAAYN,EAAWW,CAAW,CACpC,CAAC,EAEL,EACF,CAEA,SAASD,GAAYV,EAAWY,EAAM,CACtBZ,EAAU,iBAAiB,OAAO,EAC1C,QAAQ,CAACQ,EAAMK,IAAU,CACzBA,EAAQD,EAAMJ,EAAK,UAAU,IAAI,QAAQ,EACxCA,EAAK,UAAU,OAAO,QAAQ,CACrC,CAAC,CACH,CAGA,SAASC,IAAqB,CAC5B,MAAM5f,EAAOof,IAAW,OAAO,KAAI,GAAM,GACnCa,EAAUZ,IAAc,OAAO,KAAI,GAAM,GACzCK,EAAS,OAAOJ,GAAY,SAAS,QAAU,CAAC,EAEtD,GAAI,CAACtf,GAAQ,CAACigB,GAAWP,IAAW,EAAG,CACrC,aAAa,WAAWlc,EAAW,EACnC,MACF,CAEA,MAAM0c,EAAQ,CAAE,KAAAlgB,EAAM,QAAAigB,EAAS,OAAAP,CAAM,EACrC,aAAa,QAAQlc,GAAa,KAAK,UAAU0c,CAAK,CAAC,CACzD,CAEA,MAAMC,GAAqBZ,GAASK,GAAoB,GAAG,EAE3D,SAASQ,IAAuB,CAC9B,IAAIC,EAAQ,KACZ,GAAI,CACFA,EAAQ,KAAK,MAAM,aAAa,QAAQ7c,EAAW,GAAK,MAAM,CAChE,MAAQ,CACN6c,EAAQ,IACV,CAEA,GAAI,CAACA,EAAO,CACNf,IACFA,EAAW,QAAQ,OAAS,IAC5BG,GAAYH,EAAY,CAAC,GAE3B,MACF,CAEIF,KAAWA,GAAU,MAAQiB,EAAM,MAAQ,IAC3ChB,KAAcA,GAAa,MAAQgB,EAAM,SAAW,IACpDf,IACFA,EAAW,QAAQ,OAAS,OAAOe,EAAM,QAAU,CAAC,EACpDZ,GAAYH,EAAYe,EAAM,QAAU,CAAC,EAE7C,CAEA,SAASC,IAAoB,CAC3B,aAAa,WAAW9c,EAAW,EACnC0b,IAAM,MAAK,EACPI,IACFA,EAAW,QAAQ,OAAS,IAC5BG,GAAYH,EAAY,CAAC,EAE7B,CAGA,SAASiB,GAAU,EAAG,CACpB,GAAG,iBAAc,EACjBxB,GAAU,OAAO,QACjB,SAAS,KAAK,MAAM,SAAW,QAC/B,SAAS,KAAK,MAAM,IAAM,IAAIA,EAAO,KACrC,SAAS,KAAK,MAAM,KAAO,IAC3B,SAAS,KAAK,MAAM,MAAQ,IAE5B/S,GAAQ,UAAU,OAAO,QAAQ,EACjCmT,GAAU,UAAU,IAAI,QAAQ,EAEhCiB,GAAoB,CACtB,CAEA,SAASI,IAAa,CACpBxU,GAAQ,UAAU,IAAI,QAAQ,EAC9BmT,GAAU,UAAU,OAAO,QAAQ,EAEnC,SAAS,KAAK,MAAM,SAAW,GAC/B,OAAO,SAAS,EAAGJ,EAAO,EAEtBO,IACFA,EAAW,QAAQ,OAAS,IAC5BG,GAAYH,EAAY,CAAC,GAG3BM,GAAkB,CACpB,CAGA,SAASa,IAAa,CAChBzB,KACFA,GAAO,QAAQ,GAAM,EAAI,EACzBA,GAAS,MAGXA,GAAS,IAAI0B,GAAO,UAAW,CAC7B,cAAe,EACf,aAAc,EACd,KAAM,GACN,WAAY,GACZ,WAAY,CACV,OAAQ,sBACR,OAAQ,qBACd,EACI,eAAgB,GAChB,WAAY,CACV,GAAI,qBACJ,KAAM,SACN,UAAW,GACX,aAAc,CAACC,EAAIC,EAAUhQ,IAAU,CAErC,MAAM8L,EAAO9L,EAAQ,EACfiQ,EAAS,KAAK,MAAMjQ,EAAQ,CAAC,EAC7BkQ,EAAOH,EAAG,UAEVhV,EAAY3J,GACfA,IAAM,GAAS8e,IAAS,GACxB9e,IAAM0a,GAAQoE,IAASpE,GACvB1a,IAAM6e,GAAUC,IAAS,GAASA,IAASpE,EAExCqE,EAAO/e,GACX,4BAA4B2J,EAAS3J,CAAC,EAAI,SAAW,EAAE,aAAaA,CAAC,YAEvE,OAAO+e,EAAI,CAAK,EAAIA,EAAIF,CAAM,EAAIE,EAAIrE,CAAI,CAC5C,CACN,CACA,CAAG,EAED,MAAMsE,EAAM,SAAS,cAAc,oBAAoB,EACnDA,IACFA,EAAI,QAAW1Y,GAAM,CACnB,MAAMyY,EAAMzY,EAAE,OAAO,QAAQ,cAAc,EACtCyY,GACL/B,GAAO,QAAQ,OAAO+B,EAAI,QAAQ,CAAC,CAAC,CACtC,GAGF/B,GAAO,GAAG,cAAe,IAAMA,GAAO,WAAW,QAAQ,CAC3D,CAGA,eAAeiC,IAAc,CAC3B,MAAMC,EAAU,SAAS,cAAc,iBAAiB,EACxD,GAAKA,EACL,CAAAA,EAAQ,UAAY,GAEpB,GAAI,GAEW,MADD,MAAM,MAAMpC,EAAa,GACd,KAAI,IACF,MAAQ,CAAA,GAAI,MAAM,EAAG,EAAE,EAEtC,QAAQ,CAACqC,EAAInB,IAAU,CAC/B,MAAMoB,EAAQ,KAAK,MAAMD,EAAG,QAAU,CAAC,EAEjCE,EAAQ,SAAS,cAAc,KAAK,EAC1CA,EAAM,UAAY,eAClBA,EAAM,UAAY;AAAA,mDAC2BrB,CAAK,kBAAkBoB,CAAK;AAAA;AAAA,yCAEtCD,EAAG,KAAK;AAAA,sCACXA,EAAG,IAAI;AAAA;AAAA,QAIvCD,EAAQ,YAAYG,CAAK,EACzB5B,GAAY4B,EAAM,cAAc,SAAS,EAAGD,CAAK,CACnD,CAAC,EAEDX,GAAU,CACZ,MAAc,CACZa,GAAS,MAAM,CAAE,MAAO,QAAS,QAAS,uCAAwC,CACpF,EACF,CAGA,SAASC,IAAsB,CAC7BrC,IAAM,iBAAiB,SAAU,MAAO,GAAM,CAC5C,EAAE,eAAc,EAEhB,MAAMlf,EAAOof,GAAU,MAAM,KAAI,EAC3Ba,EAAUZ,GAAa,MAAM,KAAI,EACjCK,EAAS,KAAK,MAAMJ,EAAW,QAAQ,MAAM,GAAK,EAExD,GAAI,CAACtf,GAAQA,EAAK,OAAS,GAAKA,EAAK,OAAS,GAAI,CAChDshB,GAAS,MAAM,CAAE,QAAS,sDAAsD,CAAE,EAClF,MACF,CACA,GAAI,CAACrB,GAAWA,EAAQ,OAAS,IAAMA,EAAQ,OAAS,IAAK,CAC3DqB,GAAS,MAAM,CAAE,QAAS,qDAAqD,CAAE,EACjF,MACF,CACA,GAAI5B,EAAS,GAAKA,EAAS,EAAG,CAC5B4B,GAAS,MAAM,CAAE,QAAS,oCAAoC,CAAE,EAChE,MACF,CAEA,GAAI,CACF,MAAME,EAAW,MAAM,MAAM1C,GAAe,CAC1C,OAAQ,OACR,QAAS,CACP,eAAgB,mBAChB,OAAQ,kBAClB,EACQ,KAAM,KAAK,UAAU,CAAE,KAAA9e,EAAM,MAAOigB,EAAS,OAAAP,EAAQ,CAC7D,CAAO,EAED,GAAI,CAAC8B,EAAS,GAAI,CAChBF,GAAS,MAAM,CAAE,MAAO,SAAU,QAAS,GAAGE,EAAS,MAAM,GAAI,EACjE,MACF,CAEAF,GAAS,QAAQ,CAAE,QAAS,8BAA8B,CAAE,EAC5DhB,GAAiB,EACjBE,GAAU,EACV,SAAS,KAAK,UAAU,OAAO,WAAW,EAE1CS,GAAW,CACb,MAAc,CACZK,GAAS,MAAM,CAAE,QAAS,oCAAoC,CAAE,CAClE,CACF,CAAC,CACH,CAGA,SAASG,IAAoB,CAE3B,MAAMC,EAAe,SAAS,iBAAiB,oBAAoB,EAC7DC,EAAiB,SAAS,cAAc,UAAU,EAEpDD,EAAa,QAAUC,GACzBD,EAAa,QAAQnQ,GAAQ,CAC3BA,EAAK,iBAAiB,QAAUjJ,GAAM,CACpCA,EAAE,eAAc,EACZ0D,IAAW,CAACA,GAAQ,UAAU,SAAS,QAAQ,GAAGwU,GAAU,EAChEmB,EAAe,eAAe,CAAE,SAAU,QAAQ,CAAE,CACtD,CAAC,CACH,CAAC,CAEL,CAGA,SAASC,IAAU,CACjB5V,GAAU,SAAS,cAAc,UAAU,EAC3CiT,GAAU,SAAS,cAAc,eAAe,EAChD5S,GAAW,SAAS,cAAc,aAAa,EAC/C6S,GAAO,SAAS,cAAc,gBAAgB,EAC9CC,GAAY,SAAS,cAAc,mBAAmB,EACtDC,GAAY,SAAS,cAAc,kBAAkB,EACrDC,GAAe,SAAS,cAAc,qBAAqB,EAC3DC,EAAa,SAAS,eAAe,iBAAiB,EAEtDG,GAAYH,EAAY,SAASA,GAAY,SAAS,MAAM,GAAK,CAAC,EAElEL,IAAS,iBAAiB,QAASsB,EAAS,EAC5ClU,IAAU,iBAAiB,QAASmU,EAAU,EAE9CxU,IAAS,iBAAiB,QAAU,GAAM,CACpC,EAAE,SAAWA,IAASwU,GAAU,CACtC,CAAC,EAED,SAAS,iBAAiB,UAAY,GAAM,CACtC,EAAE,MAAQ,UAAY,CAACxU,GAAQ,UAAU,SAAS,QAAQ,GAAGwU,GAAU,CAC7E,CAAC,EAEDpB,IAAW,iBAAiB,QAASe,EAAkB,EACvDd,IAAc,iBAAiB,QAASc,EAAkB,EAE1DoB,GAAmB,EACnBN,GAAW,EACXQ,GAAiB,CACnB,CAEA,SAAS,iBAAiB,mBAAoBG,EAAO,EC9TrD,MAAMC,GAAqB,CACzB,UACA,SACA,kBACA,uBACA,uBACA,sBACA,UACA,YACF,EAAE,KAAK,GAAG,EAGJC,GAAkB,CACtB,UACA,mBACA,oCACA,sBACA,sBACF,EAAE,KAAK,GAAG,EAGJC,GAAM,CACV,QAAS,aAAa,QAAQ,KAAK,IAAM,MACzC,OAAQ,EACR,UAAW,CACT,GAAI,CAAC,KAAK,QAAS,OACnB,MAAMnhB,EAAM,YAAY,IAAG,EAC3B,GAAI,EAAAA,EAAM,KAAK,OAAS,IACxB,MAAK,OAASA,EACd,GAAI,CACF6B,GAAS,MAAG,CACd,MAAQ,CAEN,GAAI,CACF,MAAMvB,EAAM,IAAK,OAAO,cAAgB,OAAO,oBACzCyB,EAAIzB,EAAI,iBAAgB,EACxBf,EAAIe,EAAI,WAAU,EACxByB,EAAE,KAAO,WAAYA,EAAE,UAAU,MAAQ,IACzCxC,EAAE,KAAK,eAAe,IAAMe,EAAI,WAAW,EAC3Cf,EAAE,KAAK,6BAA6B,KAAQe,EAAI,YAAc,GAAI,EAClEyB,EAAE,QAAQxC,CAAC,EAAE,QAAQe,EAAI,WAAW,EAAGyB,EAAE,MAAK,EAAIA,EAAE,KAAKzB,EAAI,YAAc,GAAI,CACjF,MAAQ,CAAC,CACX,EACF,CACF,EAGA,SAAS,iBAAiB,QAAU,GAAM,CAExC,GAAI,CAAC,EAAE,WAAa,EAAE,SAAW,GAAK,EAAE,SAAW,EAAE,SAAW,EAAE,OAAQ,OAE1E,MAAM6U,EAAK,EAAE,OAAO,QAAQ8L,EAAkB,EACzC9L,IACDA,EAAG,QAAQ+L,EAAe,GAG1B,KAAK,IAAK,EAAE,WAAa,CAAC,EAAK,GAAK,KAAK,IAAK,EAAE,WAAa,CAAC,EAAK,GAEvEC,GAAI,SAAQ,EACd,EAAG,CAAE,QAAS,GAAM,EAGpB,SAAS,iBAAiB,UAAY,GAAM,CAE1C,GADI,CAACA,GAAI,SACL,EAAE,EAAE,MAAQ,SAAW,EAAE,MAAQ,KAAM,OAE3C,MAAMhM,EAAK,EAAE,OAAO,QAAQ8L,EAAkB,EAC1C,CAAC9L,GAAMA,EAAG,QAAQ+L,EAAe,GAErCC,GAAI,SAAQ,CACd,EAAG,CAAE,QAAS,GAAM,EAGpB,OAAO,IAAM,CACX,QAAU,CAAEA,GAAI,QAAU,GAAO,aAAa,QAAQ,MAAO,IAAI,CAAI,EACrE,SAAU,CAAEA,GAAI,QAAU,GAAO,aAAa,QAAQ,MAAO,KAAK,CAAG,EACrE,QAAU,CAAEA,GAAI,QAAU,KAAK,QAAO,EAAK,KAAK,OAAM,CAAI,CAC5D"}