{"version":3,"file":"index.js","sources":["../src/js/feedback.js","../src/js/artist-modal.js","../src/js/artists.js"],"sourcesContent":["import axios from 'axios';\nimport Swiper from 'swiper';\nimport { Navigation, Pagination } from 'swiper/modules';\nimport 'swiper/css';\n\n//import 'swiper/css/navigation';\nimport 'swiper/css/pagination';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst BASE_URL = 'https://sound-wave.b.goit.study/api/feedbacks';\nconst container = document.querySelector('.swiper-wrapper');\nconst loader = document.getElementById('loader');\n\nlet pageCounter = Number(localStorage.getItem('feedbackPage')) || 1;\n\nexport async function fetchFeedbacks(page = 1, limit = 10) {\n  loader.style.display = 'block';\n\n  try {\n    const { data } = await axios.get(BASE_URL, {\n      params: { page, limit },\n    });\n    return data.data;\n  } catch (error) {\n    console.error('Error fetching feedbacks:', error);\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to load feedbacks',\n    });\n    return [];\n  } finally {\n    loader.style.display = 'none';\n  }\n}\n\nfunction createSlide(feedback) {\n  const rounded = Math.round(feedback.rating);\n\n  return `\n    <div class=\"swiper-slide\">\n      <div class=\"feedback-card\">\n        <div class=\"rating-stars\">\n          ${Array.from({ length: 5 }, (_, i) =>\n            `<svg class=\"star ${i < rounded ? 'filled' : 'empty'}\" width=\"20\" height=\"19\" viewBox=\"0 0 20 19\" xmlns=\"http://www.w3.org/2000/svg\">\n               <path d=\"M9.07088 0.612343C9.41462 -0.204115 10.5854 -0.204114 10.9291 0.612346L12.9579 5.43123C13.1029 5.77543 13.4306 6.01061 13.8067 6.0404L19.0727 6.45748C19.9649 6.52814 20.3267 7.62813 19.6469 8.2034L15.6348 11.5987C15.3482 11.8412 15.223 12.2218 15.3106 12.5843L16.5363 17.661C16.744 18.5211 15.7969 19.201 15.033 18.7401L10.5245 16.0196C10.2025 15.8252 9.7975 15.8252 9.47548 16.0196L4.96699 18.7401C4.20311 19.201 3.25596 18.5211 3.46363 17.661L4.68942 12.5843C4.77698 12.2218 4.65182 11.8412 4.36526 11.5987L0.353062 8.2034C-0.326718 7.62813 0.0350679 6.52814 0.927291 6.45748L6.19336 6.0404C6.5695 6.01061 6.89716 5.77543 7.04207 5.43123L9.07088 0.612343Z\" fill=\"currentColor\"/>\n            </svg>`\n          ).join('')}\n        </div>\n        <p class=\"message-text\">\"${feedback.descr}\"</p>\n        <p class=\"message-person\">${feedback.name}</p>\n      </div>\n    </div>\n  `;\n}\n\nasync function renderFeedbacks() {\n  const feedbacks = await fetchFeedbacks(pageCounter, 10);\n\n  if (!feedbacks.length) {\n    container.insertAdjacentHTML('beforeend', '<p>No feedbacks found.</p>');\n    return;\n  }\n\n  container.innerHTML = feedbacks.map(createSlide).join('');\n\n  const swiper = new Swiper('.swiper', {\n    modules: [Navigation, Pagination],\n    slidesPerView: 1,\n    navigation: {\n      nextEl: '.swiper-button-next',\n      prevEl: '.swiper-button-prev',\n    },\n    pagination: {\n      el: '.swiper-pagination',\n      clickable: true,\n      renderBullet: (index, className) => {\n        \n        if (index < 3) {\n          return `<span class=\"${className}\"></span>`;\n        }\n        return '';\n      },\n    },\n  });\n\n  swiper.on('slideChange', function () {\n    const activeSlide = swiper.activeIndex + 1;\n    let bulletIndex = 0;\n\n    if (activeSlide >= 1 && activeSlide <= 4) bulletIndex = 0;\n    else if (activeSlide >= 5 && activeSlide <= 9) bulletIndex = 1;\n    else bulletIndex = 2;\n\n    document\n      .querySelectorAll('.swiper-pagination-bullet')\n      .forEach(b => b.classList.remove('swiper-pagination-bullet-active'));\n\n    const bullets = document.querySelectorAll('.swiper-pagination-bullet');\n    if (bullets[bulletIndex]) {\n      bullets[bulletIndex].classList.add('swiper-pagination-bullet-active');\n    }\n  });\n\n  pageCounter++;\n  if (pageCounter > 70) {\n    pageCounter = 1;\n  }\n  localStorage.setItem('feedbackPage', pageCounter);\n}\n\nrenderFeedbacks();\n","function formatDuration(ms) {\n  if (!ms || isNaN(ms)) return \"—\";\n  const minutes = Math.floor(ms / 60000);\n  const seconds = Math.floor((ms % 60000) / 1000)\n    .toString()\n    .padStart(2, \"0\");\n  return `${minutes}:${seconds}`;\n}\n\nconst loaderOverlay = document.getElementById(\"loader-overlay\");\n\nasync function renderArtistModal(artistId) {\n  const modalWindow = document.querySelector(\".modal_window\");\n  const modalContent = modalWindow.querySelector(\".modal\");\n  const modalClose = modalWindow.querySelector(\".modal_close\");\n\n  try {\n    modalWindow.classList.remove(\"is_open\");\n    loaderOverlay.style.display = \"flex\";\n\n    const res = await fetch(`https://sound-wave.b.goit.study/api/artists/${artistId}/albums`);\n    if (!res.ok) throw new Error(`Request failed: ${res.status}`);\n    const data = await res.json();\n\n    const nameEl = modalWindow.querySelector(\".modal_artist\");\n    const imgEl = modalWindow.querySelector(\".modal_content img\");\n    const infoPs = modalWindow.querySelectorAll(\".modal_basic_info li p\");\n    const bioEl = modalWindow.querySelector(\".modal_text_biography\");\n    const genresList = modalWindow.querySelector(\".genres\");\n    const albumsContainer = modalWindow.querySelector(\".albums_info ul\");\n\n    nameEl.textContent = data.strArtist ?? \"Unknown artist\";\n    imgEl.src = data.strArtistThumb || \"https://via.placeholder.com/300x300?text=No+Image\";\n    imgEl.alt = data.strArtist ?? \"Artist\";\n\n    if (data.intFormedYear && data.intDiedYear) {\n      infoPs[0].textContent = `${data.intFormedYear} - ${data.intDiedYear}`;\n    } else if (data.intFormedYear) {\n      infoPs[0].textContent = `${data.intFormedYear} - present`;\n    } else {\n      infoPs[0].textContent = \"information missing\";\n    }\n\n    infoPs[1].textContent = data.strGender || \"Undefined\";\n    infoPs[2].textContent = data.intMembers || \"?\";\n    infoPs[3].textContent = data.strCountry || \"Undefined\";\n\n    bioEl.textContent = data.strBiographyEN || \"No biography available.\";\n\n    genresList.innerHTML = Array.isArray(data.genres) && data.genres.length\n      ? data.genres.map(g => `<li>${g}</li>`).join(\"\")\n      : \"<li>Unknown</li>\";\n\n    albumsContainer.innerHTML = \"\";\n    if (Array.isArray(data.albumsList) && data.albumsList.length) {\n      data.albumsList.forEach(album => {\n        const tracks = Array.isArray(album.tracks) ? album.tracks : [];\n        const rows = tracks.map(track => {\n          const playButton = track.movie\n            ? `<a href=\"${track.movie}\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"play-svg-link\">\n                 <svg width=\"21\" height=\"15\">\n                   <use href=\"../img/modal/modal-icons.svg#icon-play\"></use>\n                 </svg>\n               </a>`\n            : \"\";\n          return `\n            <tr>\n              <td>${track.strTrack || \"\"}</td>\n              <td>${formatDuration(Number(track.intDuration))}</td>\n              <td>${playButton}</td>\n            </tr>`;\n        }).join(\"\");\n\n        const tableHTML = `\n          <li>\n            <table>\n              <caption>${album.strAlbum || \"Album\"}${album.intYearReleased ? ` (${album.intYearReleased})` : \"\"}</caption>\n              <thead>\n                <tr class=\"album_columns\">\n                  <th>Track</th>\n                  <th>Time</th>\n                  <th>Link</th>\n                </tr>\n              </thead>\n              <tbody>${rows}</tbody>\n            </table>\n          </li>`;\n        albumsContainer.insertAdjacentHTML(\"beforeend\", tableHTML);\n      });\n    } else {\n      albumsContainer.innerHTML = \"<li>No albums found</li>\";\n    }\n\n    modalWindow.classList.add(\"is_open\");\n    document.body.style.overflow = \"hidden\";\n\n    function closeModal() {\n      modalWindow.classList.remove(\"is_open\");\n      document.removeEventListener(\"keydown\", onEscPress);\n      modalWindow.removeEventListener(\"click\", onBackdropClick);\n      modalClose.removeEventListener(\"click\", closeModal);\n      document.body.style.overflow = \"\";\n    }\n\n    modalClose.addEventListener(\"click\", closeModal);\n\n    function onBackdropClick(e) {\n      if (!modalContent.contains(e.target)) closeModal();\n    }\n    modalWindow.addEventListener(\"click\", onBackdropClick);\n\n    function onEscPress(e) {\n      if (e.key === \"Escape\") closeModal();\n    }\n    document.addEventListener(\"keydown\", onEscPress);\n\n  } catch (err) {\n    console.error(\"Помилка при завантаженні артиста:\", err);\n  } finally {\n    loaderOverlay.style.display = \"none\";\n  }\n}\n\n/* Приклад виклику\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  renderArtistModal(\"65ada227af9f6d155db46908\");\n});\n\n/*\nкнопка.addEventListener('click', () => {\n  renderArtistModal(\"треба сюди передати айді\"); \n});\n*/","const API_URL = 'https://sound-wave.b.goit.study/api/artists';\n\nlet currentPage = 1;\nconst limit = 8;\n\nconst artistsList = document.getElementById('artists-list');\nconst loadMoreBtn = document.getElementById('load-more');\n\nasync function fetchArtists(page = 1, limit = 8) {\n  try {\n    loadMoreBtn.textContent = 'Loading...';\n\n    const res = await fetch(`${API_URL}?page=${page}&limit=${limit}`);\n    if (!res.ok) throw new Error('Failed to fetch artists');\n\n    const data = await res.json();\n    console.log('API response:', data);\n\n    if (Array.isArray(data.artists)) {\n      renderArtists(data.artists);\n\n      if (data.artists.length < limit || page * limit >= data.totalArtists) {\n        loadMoreBtn.style.display = 'none';\n      } else {\n        loadMoreBtn.textContent = 'Load More';\n      }\n    } else {\n      console.error('Unexpected API structure:', data);\n    }\n  } catch (err) {\n    console.error(err);\n    alert('❌ Помилка завантаження артистів');\n  }\n}\n\nfunction renderArtists(artists) {\n  artists.forEach(artist => {\n    const card = document.createElement('div');\n    card.classList.add('artist-card');\n\n    card.innerHTML = `\n      <img src=\"${artist.photo}\" alt=\"${artist.name}\" class=\"artist-photo\" />\n      <div class=\"artist-content\">\n        <h3 class=\"artist-name\">${artist.name}</h3>\n        <p class=\"artist-genres\">${artist.genres.join(', ')}</p>\n        <p class=\"artist-description\">${\n          artist.description || 'No description available'\n        }</p>\n      </div>\n    `;\n\n    artistsList.appendChild(card);\n  });\n}\n\nloadMoreBtn.addEventListener('click', () => {\n  currentPage++;\n  fetchArtists(currentPage, limit);\n});\n\n// Стартове завантаження\nfetchArtists(currentPage, limit);\n"],"names":["BASE_URL","container","loader","pageCounter","fetchFeedbacks","page","limit","data","axios","error","iziToast","createSlide","feedback","rounded","_","i","renderFeedbacks","feedbacks","swiper","Swiper","Navigation","Pagination","index","className","activeSlide","bulletIndex","b","bullets","API_URL","currentPage","artistsList","loadMoreBtn","fetchArtists","res","renderArtists","err","artists","artist","card"],"mappings":"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"}